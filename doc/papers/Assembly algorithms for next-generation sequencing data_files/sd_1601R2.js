function createCookie(cookieName,value){var finalCookie;var cookieStart="<e><q>science</q>";var cookieEnd="<enc>N</enc></e>";var cookieValue;if(value){cookieValue=cookieStart;cookieValue+=value;cookieValue+=cookieEnd}finalCookie=cookieName+"="+cookieValue+";path=/";var hostName=document.location.hostname;hostName.toLowerCase();var domain="";if(hostName.indexOf("sciencedirect.com")!=-1&&hostName.match(/\.sciencedirect\.com\./)==null)domain=".sciencedirect.com";else if(hostName.indexOf(".lexisnexis.com")!=
-1)domain=".lexisnexis.com";else if(hostName.match(/\.sciencedirect\.com\./)!=null)domain=hostName;if(domain)finalCookie+=";domain="+domain;document.cookie=finalCookie}
var Cookie={get:function(cName){var beg=document.cookie.indexOf(cName+"=");var val=null;if(beg!=-1){beg=beg+cName.length+1;var end=document.cookie.indexOf(";",beg);if(end==-1)val=unescape(document.cookie.slice(beg));else val=unescape(document.cookie.slice(beg,end))}return val},getDomain:function(hn){var hostName=document.location.hostname;if(hn)hostName=hn;hostName.toLowerCase();var domain="";if(hostName.indexOf("sciencedirect.com")!=-1&&hostName.match(/\.sciencedirect\.com\./)==null)domain=".sciencedirect.com";
else if(hostName.indexOf(".lexisnexis.com")!=-1)domain=".lexisnexis.com";else if(hostName.match(/\.sciencedirect\.com\./)!=null)domain=hostName;else domain="";return domain},set:function(name,value,expDate){var expStr="";if(expDate!=null&&(typeof expDate=="object"&&Object.prototype.toString.call(expDate)=="[object Date]"))expStr=expDate.toGMTString();var path="/";var domain=Cookie.getDomain();var finalCookie=name+"="+escape(value)+";path="+path;if(expStr&&expStr!="")finalCookie+=";expires="+expStr;
if(domain&&domain!="")finalCookie+=";domain="+domain;document.cookie=finalCookie},remove:function(name){var pastDate=new Date;pastDate.setTime(1E3*60*60*5);Cookie.set(name,"",pastDate)},expiresIn:function(base,unit,amt){if(amt!=null&&unit!=null){var shift=0;if(unit=="milliseconds")shift=amt;else if(unit=="seconds")shift=1E3*amt;else if(unit=="minutes")shift=1E3*60*amt;else if(unit=="hours")shift=1E3*60*60*amt;else if(unit=="days")shift=1E3*60*60*24*amt;else shift=0;if(base!=null&&(typeof base=="object"&&
Object.prototype.toString.call(base)=="[object Date]")){base.setTime(base.getTime()+shift);return base}else return null}else return base}};var DBG={out:function(lvl,str){if(typeof SDM!="object")return;if(typeof SDM.pm!="object")return;if(SDM.pm.df=="undefined")return;if(SDM.pm.df>=lvl||(lvl==0||typeof ut=="object"))if(typeof console==="undefined"||typeof console.log==="undefined");else console.log(str)}};var PluginDetect={plugins:navigator.plugins,getByName:function(pluginName){var plugs=[];for(var p=0;p<this.plugins.length;p++)if(typeof this.plugins[p].name=="string")if(this.plugins[p].name==pluginName)plugs.push(this.plugins[p]);return plugs},getByType:function(typeStr){var plugs=[];for(var p=0;p<this.plugins.length;p++)if(this.isOfType(this.plugins[p],typeStr))plugs.push(this.plugins[p]);return plugs},dump:function(plugs){if(plugs==undefined)plugs=this.plugins;var s="";for(var p=0;p<plugs.length;p++){s+=
p+" "+plugs[p].name+" "+plugs[p].version+"\n";for(var m=0;m<plugs[p].length;m++)s+="\t"+m+" "+plugs[p][m].suffixes+" "+plugs[p][m].type+"\n"}return s},isOfType:function(plug,typeStr){var s="";for(var m=0;m<plug.length;m++)if(plug[m].type==typeStr)return true;return false},printPlugins:function(){if(typeof console==="undefined"||typeof console.log==="undefined");else console.log(this.dump())}};
var AdobeDetect={getVersion:function(){if(window.ActiveXObject){var xObj;try{xObj=new ActiveXObject("ACROPDF.PDF")}catch(e){}if(!xObj)try{xObj=new ActiveXObject("PDF.PdfCtrl")}catch(e){}try{if(xObj){var v1=xObj.getVersions().split(",");var v2=v1[0].split("=");var v3=v2[1];if(v3[v3.length-1]==".")v3=v3.slice(0,v3.length-1);return v3}}catch(e){}return undefined}else{var plug=PluginDetect.getByName("Adobe Acrobat");if(plug.length)if(plug[0].version!=undefined)return plug[0].version;else if(plug[0].description!=
undefined){var d=plug[0].description.split(" ");if(d.length)return d[d.length-1];else return undefined}else return undefined;else return undefined}}};var DynamicArtContent={dynamicComponents:null,buildDynamicRequestData:function(){var dynamicReqObj=new Object;var requestObj=new Object;requestObj.pii=SDM.pm.pii;requestObj.eid=SDM.pm.eid;requestObj.cid=SDM.pm.cid;requestObj.mod_cid=SDM.pm.mod_cid;requestObj.pdfEid=SDM.pm.pdfEid;requestObj.coverDate=SDM.pm.coverDate;requestObj.itemWeight=SDM.pm.itemWeight;requestObj.indexType=SDM.pm.indexType;requestObj.isEntitled=SDM.pm.entitled;requestObj.contentType=SDM.pm.contentType;if(SDM.pf.pdfAvail)dynamicReqObj.pdfExcerptUrl=
true;dynamicReqObj.isCDN=true;dynamicReqObj.getProdQual=true;dynamicReqObj.pageMetaData=requestObj;DynamicArtContent.requestData=JSON.stringify(dynamicReqObj);DynamicArtContent.retryNum=0;DynamicArtContent.fragReady=false;DynamicArtContent.ajaxCallInFlight=false;DynamicArtContent.retrieve()},retrieve:function(){DynamicArtContent.ajaxCallInFlight=true;var jqxhr=$.post(SDM.ep.urlPrefix+"/dc/article/all",{data:DynamicArtContent.requestData},function(res){try{SDM.pf.dc.respObj=$.parseJSON(res);DynamicArtContent.ajaxCallInFlight=
false;if(!Fragment.isAvail()||DynamicArtContent.fragReady){DynamicArtContent.fragReady=true;DynamicArtContent.processResponse()}}catch(e){DynamicArtContent.ajaxCallInFlight=false;DynamicArtContent.retryRetrieve()}});jqxhr.fail(function(){DBG.out(0,SDM.ep.urlPrefix+"/dc/article/all POST call failed.");DynamicArtContent.ajaxCallInFlight=false;DynamicArtContent.retryRetrieve()})},retryRetrieve:function(){if(!DynamicArtContent.ajaxCallInFlight&&DynamicArtContent.retryNum<SDM.pf.dc.retry){DynamicArtContent.retryNum++;
var delay=DynamicArtContent.retryNum*SDM.pf.dc.retryDelay*SDM.pf.dc.retryFactor;setTimeout(DynamicArtContent.retrieve,delay)}},processResponse:function(){try{if(SDM.pf.dc.respObj.DynamicComponentsResp==undefined||SDM.pf.dc.respObj.DynamicComponentsResp==null)DynamicArtContent.retryRetrieve();else{DBG.out(0,SDM.pf.dc.respObj);DynamicArtContent.dynamicComponents=SDM.pf.dc.respObj.DynamicComponentsResp;DynamicArtContent.populateDynamicComponents()}}catch(e){DynamicArtContent.retryRetrieve()}},populateDynamicComponents:function(fragId){if(DynamicArtContent.dynamicComponents==
null||DynamicArtContent.dynamicComponents==undefined)return;var scope="#centerInner";if(typeof fragId!="undefined")scope="#"+fragId;if($(scope+" #excerptPlaceholder")[0])DynamicArtContent.buildPdfExcerptHtml(scope);if($(scope+" #ppvPlaceHolder")[0])if(DynamicArtContent.dynamicComponents.NewRemoteAccess!=undefined&&DynamicArtContent.dynamicComponents.NewRemoteAccess=="Yes")DynamicArtContent.buildAccessLinksNew(scope);else if(!SDM.pm.entitled||SDM.pf.forceAbst)DynamicArtContent.buildAccessLinks(scope);
if($(scope+" #refersToAndreferredToBy")[0])DynamicArtContent.populateRefersToAndReferredToBy();if($(scope+" #embeddedPDF")[0]){var isChrome=DynamicArtContent.isChrome();var isFF=DynamicArtContent.isFF();var isIE=DynamicArtContent.isIE();var isSafari=DynamicArtContent.isSafari();if((isChrome||(isFF||(isIE||isSafari)))&&(typeof DynamicArtContent.dynamicComponents.EmbeddedPDFLink!=="undefined"&&(DynamicArtContent.dynamicComponents.EmbeddedPDFLink!==null&&!(DynamicArtContent.dynamicComponents.CorpReqAvail!=
undefined&&(SDM.pageType!="article_full"&&!SDM.pf.ignoreForceAbst)))))DynamicArtContent.buildEmbeddedLightWeightPDFLink(false)}if($(scope+" .publicationCover")[0])DynamicArtContent.populateRefModFields();if($(scope+" span.mathmlsrc")[0]&&DynamicArtContent.dynamicComponents.mathjaxAvail!=undefined)if(SDU.isIE()){if(DynamicArtContent.dynamicComponents.mathjaxAvailIE!=undefined)DynamicArtContent.addMathJaxButtons(scope)}else DynamicArtContent.addMathJaxButtons(scope);if(typeof DynamicArtContent.dynamicComponents.prodQual!=
"undefined"&&DynamicArtContent.dynamicComponents.prodQual!="science"){DynamicArtContent.setProductQualifier($("#centerPane .head .title a"),DynamicArtContent.dynamicComponents.prodQual);DynamicArtContent.setProductQualifier($("#centerPane .head .articlePress a.cLink"),DynamicArtContent.dynamicComponents.prodQual);DynamicArtContent.setProductQualifier($("#centerPane .publicationHead p.series a"),DynamicArtContent.dynamicComponents.prodQual);DynamicArtContent.setProductQualifier($("#centerPane .publicationHead .volIssue a"),
DynamicArtContent.dynamicComponents.prodQual);DynamicArtContent.setProductQualifier($("#centerPane .publicationCover a"),DynamicArtContent.dynamicComponents.prodQual)}if(typeof SDM!="undefined"&&(typeof SDM.pageType!="undefined"&&!DynamicArtContent.ddInProgress))if(!SDM.pm.entitled)if(DynamicArtContent.dynamicComponents.NewRemoteAccess!=undefined&&DynamicArtContent.dynamicComponents.NewRemoteAccess=="Yes")DynamicArtContent.buildDeepDyveNew();else DynamicArtContent.buildDeepDyve();DynamicArtContent.buildDOI(scope);
DynamicArtContent.buildRightsLink(scope)},setProductQualifier:function($e,s){if($e.length&&typeof $e.attr("href")!="undefined"){var hrefStr=$e.attr("href").replace("/science/","/"+s+"/");$e.attr("href",hrefStr)}},populateRefModFields:function(){if(DynamicArtContent.dynamicComponents.moduleAvail!=undefined&&DynamicArtContent.dynamicComponents.moduleAvail=="Y"){if(DynamicArtContent.dynamicComponents.publicationLogo!=undefined&&DynamicArtContent.dynamicComponents.publicationLogo!="")$(".toprightlogo").attr("src",
DynamicArtContent.dynamicComponents.publicationLogo);if(DynamicArtContent.dynamicComponents.publisherLogo!=undefined&&DynamicArtContent.dynamicComponents.publisherLogo!="")$("#pubLogo").attr("src",DynamicArtContent.dynamicComponents.publisherLogo);$("#mrwModuleSrcTitle").removeClass("hidden");var date1=new Date($("#hiddenDate1").text()),date2=new Date($("#hiddenDate2").text());if(date1.getTime()<date2.getTime())$(".mostRecentDt").css("display","none");else $(".mostRecentDt").remove()}},addMathJaxButtons:function(scope){$(scope+
" div.formula span.mathContainer").after('<div class="mathjax"><a href="javascript:void(0);" role="button" class="mathButton mathjax" title="Turn MathJax on" aria-hidden="true">Turn<span class="mathjax ">&nbsp;</span><span class="offscreen">MathJax </span>on</a></div>');if(!$("div.formula .firstFormula")[0]&&window.MathJax===undefined)$("div.formula a.mathButton").first().removeAttr("aria-hidden").removeClass("mathButton").addClass("firstFormula").parent().attr({"aria-label":"MathJAX Management",
"role":"region"}).wrap("<div class='btContainer' style='height:25px;'></div>");if(Fragment.isAvail()&&mathRenderer.opt.renderOn){$(mathRenderer.opt.button).html('Turn<span class="mathjax">&nbsp;</span><span class="offscreen">MathJax </span>off');$(mathRenderer.opt.button).attr("title","Turn MathJax off")}},buildPdfExcerptHtml:function(scope){if(!SDM.pf.pdfAvail||(!DynamicArtContent.dynamicComponents.excerptUrl||DynamicArtContent.dynamicComponents.excerptUrl==""))return;var excerptHTML='<a name="PDFExcerpt"></a><a class="excerptLink" href="';
excerptHTML+=DynamicArtContent.dynamicComponents.excerptUrl;excerptHTML+='">Open this preview in PDF</a>';$(scope).find("#excerptPlaceholder").html(excerptHTML);$(scope).find("#excerptPlaceholder").show();$(scope).find(".pdfExcerptImg").wrap('<a class="excerptLink1" href="'+DynamicArtContent.dynamicComponents.excerptUrl+'" target="_blank"/>');$(".excerptLink,.excerptLink1").unbind("click").bind("click",function(e){var nw=window.open($(".excerptLink").attr("href"),"_blank","height="+$(window).height()*
0.9+",width="+$(window).width()*0.9+",resizeable=yes,left=50,top=50");e.preventDefault();e.stopPropagation()});if(!$(".pdfExcerptHover")[0])$(".excerptLink1").append('<div class="pdfExcerptHover"><div class="hoverContainer"><span class="hoverIcon">&nbsp;</span><span class="hoverText">Click to open first page preview</span></div></div>')},buildAccessLinks:function(scope){var outwardHTML="",outLinkHTML=["","","","","",""];var oLinks=DynamicArtContent.dynamicComponents.OutwardLinks;if(oLinks!=undefined&&
oLinks.length>0){for(i=0;i<oLinks.length;i++)if(oLinks[i].EntitlementToFullText==1||(oLinks[i].EntitlementToFullText==2&&SDM.pm.entitled||oLinks[i].EntitlementToFullText==3&&!SDM.pm.entitled))if(oLinks[i].LinkCat=="Link resolvers")outLinkHTML[0]+=DynamicArtContent.buildOutwardLinks(oLinks[i]);else if(oLinks[i].LinkCat=="Alternative platforms")outLinkHTML[1]+=DynamicArtContent.buildOutwardLinks(oLinks[i]);else if(oLinks[i].LinkCat=="Elsevier redirects")outLinkHTML[2]+=DynamicArtContent.buildOutwardLinks(oLinks[i]);
else if(oLinks[i].LinkCat=="Data repositories")outLinkHTML[3]+=DynamicArtContent.buildOutwardLinks(oLinks[i]);else if(oLinks[i].LinkCat=="CitedByScopus")outLinkHTML[4]+=DynamicArtContent.buildOutwardLinks(oLinks[i]);else if(oLinks[i].LinkCat=="PermissionAndReprint")outLinkHTML[5]+=DynamicArtContent.buildOutwardLinks(oLinks[i]);outwardHTML+=outLinkHTML[0]+outLinkHTML[1]+outLinkHTML[2];if(DynamicArtContent.dynamicComponents.chorusArticleLink!=undefined){var chorusLink="";chorusLink='<li class="chorusLink"><a class=" chorusLink" href="'+
DynamicArtContent.dynamicComponents.chorusArticleLink+'"  target="_blank"';chorusLink+=" title='"+"View Open Manuscript"+"'>";chorusLink+="View Open Manuscript</a></li>";outwardHTML+=chorusLink}}var accessHTML='<div class="accessTitle">Choose an option to locate/access this article:</div>';accessHTML+='<div class="accessContent clearfix">',col1=false,col2=false,col3=false;if(DynamicArtContent.dynamicComponents.AnonLinkAvail!=undefined){accessHTML+='<div class="acol1">';accessHTML+='<div style="margin-bottom:5px;">Check if you have access through your login credentials or your institution</div>';
accessHTML+='<a title="Click to see if you have full text access" class="corpReq cLink blueButton" queryStr="?_fmt=full" href="';accessHTML+=SDM.ep.urlPrefix+"/article/pii/"+SDM.pm.pii;accessHTML+='">Check access</a>';if(DynamicArtContent.dynamicComponents.RemoteLinkURL!=undefined){accessHTML+='<a title="Apply for remote access" href="';accessHTML+=DynamicArtContent.dynamicComponents.RemoteLinkURL;accessHTML+='"><br>Apply for remote access</a>'}accessHTML+="</div>";col1=true}if(DynamicArtContent.dynamicComponents.CorpReqAvail!=
undefined&&(SDM.pageType!="article_full"&&!SDM.ignoreForceAbst)){accessHTML+='<div class="acol1">';if(DynamicArtContent.dynamicComponents.EmbeddedPDFLink!=undefined)accessHTML+='<a title="Click to see if you have full text access" class="corpReq cLink lightGreenBtn S_C_fullText" onclick="DynamicArtContent.buildEmbeddedLightWeightPDFLink(true);return true;"';else{accessHTML+='<a title="Click to see if you have full text access" class="corpReq cLink lightGreenBtn S_C_fullText" queryStr="?_fmt=full" href="';
accessHTML+=SDM.ep.urlPrefix+"/article/pii/"+SDM.pm.pii}accessHTML+='">View full text</a>';if(DynamicArtContent.dynamicComponents.RemoteLinkURL!=undefined){accessHTML+='<a title="Apply for remote access" href="';accessHTML+=DynamicArtContent.dynamicComponents.RemoteLinkURL;accessHTML+='"><br>Apply for remote access</a>'}accessHTML+="</div>";col1=true}if(DynamicArtContent.dynamicComponents.CorpReqAvail==undefined&&DynamicArtContent.dynamicComponents.AnonLinkAvail==undefined)if(DynamicArtContent.dynamicComponents.RemoteLinkURL!=
undefined){accessHTML+='<div class="acol1">';accessHTML+='<a title="Apply for remote access" href="';accessHTML+=DynamicArtContent.dynamicComponents.RemoteLinkURL;accessHTML+='"><br>Apply for remote access</a>';accessHTML+="</div>";col1=true}if(DynamicArtContent.dynamicComponents.PPVLinks!=undefined){if(col1)accessHTML+='<div class="vdivider"></div>';accessHTML+='<div class="acol2">';if(DynamicArtContent.dynamicComponents.PPVLinks.PPVButton!=undefined)accessHTML+=decodeURIComponent(DynamicArtContent.dynamicComponents.PPVLinks.PPVButton);
if(DynamicArtContent.dynamicComponents.PPVLinks.PPVPromoUrl!=undefined){accessHTML+='<div class="divBlk"><div align="right" class="offerBtn" data-offerSummary="';accessHTML+=DynamicArtContent.dynamicComponents.PPVLinks.PPVPromoUrl;accessHTML+='"><img src="/sd/Offer_button_03.png"/></div></div>'}if(DynamicArtContent.dynamicComponents.PPVLinks.PPVMsg!=undefined)accessHTML+='<div class="ppvmsg">'+decodeURIComponent(DynamicArtContent.dynamicComponents.PPVLinks.PPVMsg)+"</div>";accessHTML+="</div>";col2=
true}if(oLinks!=undefined&&oLinks.length>0)if((DynamicArtContent.dynamicComponents.CorpReqAvail==undefined||DynamicArtContent.dynamicComponents.CorpReqAvail=="N")&&outwardHTML!=""){if(col1||col2)accessHTML+='<div class="vdivider"></div>';accessHTML+='<div class="acol3"><ul>'+outwardHTML+"</ul></div>";col3=true}accessHTML+="</div>";if(col1||(col2||col3)){$(scope+" #ppvPlaceHolder").html(accessHTML).removeClass("hidden");$(scope+" #ppvPlaceHolder").after("<script>prs.rt('scr_ppv')\x3c/script>");if(col1&&
(!col2&&!col3)||(!col1&&(col2&&!col3)||!col1&&(!col2&&col3)))$(".acol1, .acol2, .acol3",scope+" #ppvPlaceHolder").css("width","auto");if(col1&&(col2&&!col3))$(".acol2",scope+" #ppvPlaceHolder").css("width","57%");if(col1&&(!col2&&col3)||!col1&&(col2&&col3))$(".acol3",scope+" #ppvPlaceHolder").css("width","57%")}if(outLinkHTML[3]!=""){outLinkHTML[3]+='<li class="divider">&nbsp;</li>';$("#dataRepHolder").html(outLinkHTML[3]).show()}if(outLinkHTML[4]!=""){$("h2.citedByLink").html(outLinkHTML[4]).show();
$("h2.citedByLink").closest(".entry").show()}else $("h2.citedByLink").closest(".entry").hide();if(outLinkHTML[5]!="")if($(".rightsLink").length){$(".rightsLink").html(outLinkHTML[5]);$(".extLinks").addClass("nonEmpty");$(".rightsLink").addClass("linkRender")}else SDM.dac.rightsLink=outLinkHTML[5];else{$(".innerPaddingFixedBox .permissions").hide();$(".moreInformation .permissions").hide()}},buildAccessLinksNew:function(scope){var outwardHTML="",outwardText1="",outLinkHTML=["","","","","",""];var oLinks=
DynamicArtContent.dynamicComponents.OutwardLinks;if(oLinks!=undefined&&oLinks.length>0){for(i=0;i<oLinks.length;i++)if(oLinks[i].EntitlementToFullText==1||(oLinks[i].EntitlementToFullText==2&&SDM.pm.entitled||oLinks[i].EntitlementToFullText==3&&!SDM.pm.entitled))if(oLinks[i].LinkCat=="Link resolvers")outLinkHTML[0]+=DynamicArtContent.buildOutwardLinks(oLinks[i]);else if(oLinks[i].LinkCat=="Alternative platforms")outLinkHTML[1]+=DynamicArtContent.buildOutwardLinks(oLinks[i]);else if(oLinks[i].LinkCat==
"Elsevier redirects")if(oLinks[i].LinkName=="Get Full Text Elsewhere")outwardText1+=DynamicArtContent.buildOutwardLinks(oLinks[i]);else outLinkHTML[2]+=DynamicArtContent.buildOutwardLinks(oLinks[i]);else if(oLinks[i].LinkCat=="Data repositories")outLinkHTML[3]+=DynamicArtContent.buildOutwardLinks(oLinks[i]);else if(oLinks[i].LinkCat=="CitedByScopus")outLinkHTML[4]+=DynamicArtContent.buildOutwardLinks(oLinks[i]);else if(oLinks[i].LinkCat=="PermissionAndReprint")outLinkHTML[5]+=DynamicArtContent.buildOutwardLinks(oLinks[i]);
outwardHTML+=outLinkHTML[0]+outLinkHTML[1]+outLinkHTML[2]}var accessHTML="";if(DynamicArtContent.dynamicComponents.HomeAccAccntName!=undefined){accessHTML+='<div class="homeAccMessage">';accessHTML+='<div class="homeAccTitle">Are you connected with ';accessHTML+=DynamicArtContent.dynamicComponents.HomeAccAccntName;accessHTML+="? Enjoy full text access anytime, anywhere.</div>";if(DynamicArtContent.dynamicComponents.ShibInstIdpURL!=undefined){accessHTML+="<div>Get remote access by signing in through your institution.</div>";
accessHTML+='<a href="';accessHTML+=DynamicArtContent.dynamicComponents.ShibInstIdpURL;accessHTML+='" class="homeAccBtn">Sign in via your institution</a>';accessHTML+="<hr/></div>"}else if(DynamicArtContent.dynamicComponents.CustomHomeAccMsg!=undefined){accessHTML+="<div>";accessHTML+=DynamicArtContent.dynamicComponents.CustomHomeAccMsg;accessHTML+="</div><hr/></div>"}else if(DynamicArtContent.dynamicComponents.selfmEmailDomain!=undefined){accessHTML+="<div>Get remote access by entering your ";accessHTML+=
DynamicArtContent.dynamicComponents.HomeAccAccntName;accessHTML+=" email address.</div>";accessHTML+='<a href="';accessHTML+=DynamicArtContent.dynamicComponents.ActivateAccessURL;accessHTML+='" class="homeAccBtn">Submit your email address</a>';accessHTML+="<hr/></div>"}}else if(DynamicArtContent.dynamicComponents.AlreadyClicked!=undefined)accessHTML="";accessHTML+='<div class="accessContent clearfix">',row1=false,row2=false;if(DynamicArtContent.dynamicComponents.PPVLinks!=undefined){accessHTML+='<div class="arow1">';
accessHTML+='<ul> <li class="purchaseLink">';if(DynamicArtContent.dynamicComponents.PPVLinks.PPVButton!=undefined)accessHTML+=decodeURIComponent(DynamicArtContent.dynamicComponents.PPVLinks.PPVButton);accessHTML+=outwardText1;accessHTML+="</li></ul></div>";row1=true}var innerMsg="";if(oLinks!=undefined&&oLinks.length>0)if((DynamicArtContent.dynamicComponents.CorpReqAvail==undefined||DynamicArtContent.dynamicComponents.CorpReqAvail=="N")&&outwardHTML!=""){innerMsg=outwardHTML;row2=true}if(DynamicArtContent.dynamicComponents.PPVLinks.PPVMsg!=
undefined){innerMsg+='<li class = "outLinks">'+decodeURIComponent(DynamicArtContent.dynamicComponents.PPVLinks.PPVMsg)+"</li>";row2=true}if(row2)accessHTML+='<div class="arow2"><ul>'+innerMsg+"</ul></div>";accessHTML+="</div>";if(row1||row2){$(scope+" #ppvPlaceHolder").html(accessHTML).removeClass("hidden");$(scope+" #ppvPlaceHolder").after("<script>prs.rt('scr_ppv')\x3c/script>")}if(outLinkHTML[3]!=""){outLinkHTML[3]+='<li class="divider">&nbsp;</li>';$("#dataRepHolder").html(outLinkHTML[3]).show()}if(outLinkHTML[4]!=
""){$("h2.citedByLink").html(outLinkHTML[4]).show();$("h2.citedByLink").closest(".entry").show()}else $("h2.citedByLink").closest(".entry").hide();if(outLinkHTML[5]!="")if($(".rightsLink").length){$(".rightsLink").html(outLinkHTML[5]);$(".extLinks").addClass("nonEmpty");$(".rightsLink").addClass("linkRender")}else SDM.dac.rightsLink=outLinkHTML[5];else{$(".innerPaddingFixedBox .permissions").hide();$(".moreInformation .permissions").hide()}},buildOutwardLinks:function(obj){var accessHTML="";if(obj.LinkCat==
"PermissionAndReprint")accessHTML="";else if(obj.LinkName=="View Record in Scopus")accessHTML='<li class="SC_Record">';else accessHTML='<li class="outLinks">';if(obj.LinkURL!=undefined&&obj.LinkURL!=""){accessHTML+='<a class=" cExLink S_C_outLinks" href="'+obj.LinkURL+'"  data-url="'+obj.DataURL+'"  target="_blank"';if(obj.LinkName!=undefined&&obj.LinkName!="")accessHTML+=" title='"+obj.LinkName+"'>"}if(obj.Iconformat=="Y"){if(obj.LinkImage!=undefined&&obj.LinkImage!="")if(DynamicArtContent.dynamicComponents.NewRemoteAccess!=
undefined&&DynamicArtContent.dynamicComponents.NewRemoteAccess=="Yes")accessHTML+='<span class="outImgNew"><img onload="DynamicArtContent.checkOLImage(this)" src="'+obj.LinkImage+'" border="0"/></span>';else accessHTML+='<span class="outImg"><img onload="DynamicArtContent.checkOLImage(this)" src="'+obj.LinkImage+'" border="0"/></span>';if(obj.LinkName!=undefined&&obj.LinkName!="")accessHTML+='<span class="outText">'+obj.LinkName+"</span>"}else if(obj.LinkImage!=undefined&&obj.LinkImage!="")if(DynamicArtContent.dynamicComponents.NewRemoteAccess!=
undefined&&DynamicArtContent.dynamicComponents.NewRemoteAccess=="Yes")if(obj.LinkName=="Get Full Text Elsewhere")accessHTML+="Other article locations";else accessHTML+='<img onload="DynamicArtContent.checkOLImage(this)" class="outImgNew" src="'+obj.LinkImage+'" border="0"/>';else accessHTML+='<img onload="DynamicArtContent.checkOLImage(this)" class="outImg" src="'+obj.LinkImage+'" border="0"/>';else if(obj.LinkName!=undefined&&obj.LinkName!=""){accessHTML+='<span class="outText">'+obj.LinkName;if(obj.LinkCat==
"CitedByScopus"&&obj.Count!=undefined)accessHTML+=" ("+obj.Count+")";accessHTML+="</span>"}if(obj.LinkURL!=undefined&&obj.LinkURL!="")accessHTML+="</a>";if(obj.LinkCat!="PermissionAndReprint")accessHTML+="</li>";return accessHTML},checkOLImage:function(obj){if(obj.width==1&&obj.height==1)if($(obj).siblings(".outText").text()!="")$(obj).hide();else{$(obj).closest(".outLinks").hide();if($(obj).closest("ol,ul").not("ul.outwardLinks").find("li.outLinks:visible").length<=0)$(obj).closest("ol,ul").hide();
else $(obj).closest("ol,ul").show()}},populateRefersToAndReferredToBy:function(){var request=new Object;var reqObj=new Object;reqObj.eid=SDM.pm.eid;var refersToArray=[];$.each($(".refersTo"),function(){var refersTo=new Object;refersTo.pii=$(this).text();refersTo.role=$(this).attr("data-role");refersToArray.push(refersTo)});if($(refersToArray).length)reqObj.refersToDetails=refersToArray;request.RequestData=reqObj;var requestData=JSON.stringify(request);$.post(SDM.ep.ref2ref2by,{data:requestData},function(res){if(!res.length)return;
var relLinks;try{relLinks=$.parseJSON(res)}catch(e){return}if(relLinks!=null&&relLinks.RefersTo!=undefined){$("#refersTo").html(decodeURIComponent(relLinks.RefersTo));$("#refersTo").show()}if(relLinks!=null&&relLinks.ReferredToBy!=undefined){$("#referredToBy").html(decodeURIComponent(relLinks.ReferredToBy));$("#referredToBy").show()}DynamicArtContent.relLinksAdded=true;if(typeof ArticlePage!="undefined")ArticlePage.viewHandler()})},buildDeepDyve:function(){var ddWait=0;var ddNumWait=20;if(Fragment.isAvail()&&
(!$(".unentitledMSG").length&&(!$("#deepdyve").length&&ddWait<ddNumWait))){ddWait++;setTimeout(DynamicArtContent.buildDeepDyve,500);DBG.out(0,"buildDeepDyve::waiting");return}else{ddWait=ddNumWait;if($("#dd_img").length)return}var i=SDM.pm.issnisbn;var d=unescape(SDM.pm.doi);if(i==null||d==null)return;var dd="http://www.deepdyve.com/rental-link";dd+="?docId="+d;dd+="&journal="+i;dd+="&fieldName=journal_doi";dd+="&affiliateId=elsevier&format=jsonp&callback=?";DynamicArtContent.ddInProgress=true;$.getJSON(dd,
function(data){if(data.status==="ok"){$("#dd_href").attr("href",data.url);$("#dd_href").append('<img id="dd_img" src="/scidirimg/DeepDyve_SD.png"/>');$("#deepdyve").show()}DynamicArtContent.ddInProgress=false})},buildDeepDyveNew:function(){var ddWait=0;var ddNumWait=20;if(Fragment.isAvail()&&(!$(".unentitledMSG").length&&(!$("#deepdyve").length&&ddWait<ddNumWait))){ddWait++;setTimeout(DynamicArtContent.buildDeepDyve,500);DBG.out(0,"buildDeepDyve::waiting");return}else{ddWait=ddNumWait;if($("#dd_img").length)return}var i=
SDM.pm.issnisbn;var d=unescape(SDM.pm.doi);if(i==null||d==null)return;var dd="http://www.deepdyve.com/rental-link";dd+="?docId="+d;dd+="&journal="+i;dd+="&fieldName=journal_doi";dd+="&affiliateId=elsevier&format=jsonp&callback=?";DynamicArtContent.ddInProgress=true;$.getJSON(dd,function(data){if(data.status==="ok"){$("#dd_href").attr("href",data.url);$("#dd_href").append('<span class="outImgNew"><img id="dd_img" src="/scidirimg/deepdyve.gif"/></span>');$("#dd_href").append('<span class="outText">Rent at Deepdyve</span>');
$("#deepdyve").show()}DynamicArtContent.ddInProgress=false})},buildDOI:function(scope){if($(scope+" .doiLink").length&&(SDM.pm.doi!=undefined&&SDM.pm.doi!="")){var doiHtml="";doiHtml+='<dd class="doi">';doiHtml+='<a id="ddDoi" class="S_C_ddDoi" href="http://dx.doi.org/'+SDM.pm.doi+'" target="doilink" onclick="var doiWin; doiWin=window.open('+"'http://dx.doi.org/"+SDM.pm.doi+"','doilink','scrollbars=yes,resizable=yes,directories=yes,toolbar=yes,menubar=yes,status=yes'); doiWin.focus()"+'">doi:'+SDM.pm.doi+
"</a>";doiHtml+="</dd>";$(scope+" .doiLink").html(doiHtml);$(".extLinks").addClass("nonEmpty")}},buildEmbeddedLightWeightPDFLink:function(hidePPV){var scope="#centerInner";var embeddedPDFHTML="<div>";embeddedPDFHTML+='<object type="application/pdf" width="615" height="780" data="';embeddedPDFHTML+=DynamicArtContent.dynamicComponents.EmbeddedPDFLink;embeddedPDFHTML+='" onerror="recordEmbedFailure();return false;"</object></div>';$(scope+" #embeddedPDF").html(embeddedPDFHTML);$(scope+" #embeddedPDF").css("display",
"block");if(hidePPV)$(scope+" #ppvPlaceHolder").css("display","none")},isChrome:function(){var isOpera=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0;var isChrome=!!window.chrome;var vendorName=navigator.vendor;if(isChrome!==null&&(isChrome!==undefined&&(vendorName==="Google Inc."&&isOpera==false)))return true;else return false},isIE:function(){var browserOk=/(Trident\/|Edge\/)/i.test(navigator.userAgent);var olderThanEleven=!!document.all;if(!olderThanEleven&&browserOk)return true;else return false},
isFF:function(){var userAgent=/firefox/i.test(navigator.userAgent);var installTrigger=typeof InstallTrigger!=="undefined";if(userAgent||installTrigger)return true;else return false},isSafari:function(){var isApple=false;if(navigator.userAgent.indexOf("MSIE")==-1&&navigator.vendor.toLowerCase().indexOf("apple")>-1)isApple=true;if(isApple&&Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0)return true;else return false},buildRightsLink:function(scope){if($(scope+" .rightsLink").length)if($(scope+
" .rightsLink").hasClass("linkRender"))return;else{var outHTML="";var outLinks=DynamicArtContent.dynamicComponents.OutwardLinks;if(outLinks!=undefined&&outLinks.length>0)for(i=0;i<outLinks.length;i++)if(outLinks[i].LinkCat=="PermissionAndReprint")outHTML=DynamicArtContent.buildOutwardLinks(outLinks[i]);if(outHTML!="")if($(scope+" .rightsLink").length){$(scope+" .rightsLink").html(outHTML);$(scope+" .extLinks").addClass("nonEmpty")}else SDM.dac.rightsLink=outHTML;else{$(scope+" .innerPaddingFixedBox .permissions").hide();
$(scope+" .moreInformation .permissions").hide()}}}};var Fragment={maps:undefined,crossRefMap:undefined,fragmentMap:undefined,authMap:undefined,refMap:undefined,mapAuthors:[],mapReferences:[],mapFigures:[],mapTables:[],mapFootnotes:[],mapEcomponents:[],mapUnknowns:[],mapsComplete:false,scrollFlag:false,prevST:0,gentle:true,waitDone:false,hashWaitDone:false,addLabel:true,winHeightAdjustFactor:1,reqRecord:[],init:function(){if(!Fragment.isAvail()){if(SDM.pm.ecomponent_avail==true)getEcomponents();$("#footer-area").show();if(typeof ArticlePage!="undefined")ArticlePage.viewHandler();
Fragment.processHash();return}Fragment.reqRecord["frag_0"]=1;Fragment.reqRecord["frag_1"]=1;var mapsCounter=0;var mc=0;var mrd=SDM.pf.frag.mapRetryDelay;if(typeof SDM.pf.frag.mapsStr=="undefined"){var mapCheck=function(){clearInterval(mapIntrvl);if(Fragment.maps||mapsCounter>SDM.pf.frag.mapRetry);else{Fragment.get("maps",undefined);mapsCounter++;mrd=mrd*SDM.pf.frag.mapRetryFactor;mapIntrvl=setInterval(mapCheck,mrd)}};var mapIntrvl=setInterval(mapCheck,0)}else Fragment.setMaps(SDM.pf.frag.mapsStr);
if($("#frag_1").length){$("#frag_1").show();Fragment.foldCheck()}$(window).scroll(Fragment.scroll)},addFrag:function(fI,fC,cfg,allFrags){var fID=Fragment.fL[fI].match(/frag_[0-9]+/);if(typeof fID=="undefined"||fID==null)return;fID=fID[0];if(!$("#"+fID).length){var fragIdNum=fID.substr(fID.indexOf("_")+1)*1;Fragment.getPrevFrag(fragIdNum).after(Fragment.fL[fI]);$("#"+fID).hide();if(typeof allFrags!="undefined"&&allFrags==true){$("#"+fID).children("ul.authorGroup").not(".subChapAuth").addClass("smh").css("display",
"none");$("#"+fID).children("ul.affiliation").addClass("smh").css("display","none");$("#"+fID).find("ul.affiliation").not(".inlCollab ul.affiliation").find("li").addClass("smh5plus").css("display","none");$("#"+fID).find("li.smh5").show();$("#"+fID).find("li.smh5").parents().show()}if(Fragment.isMalformation())$.get(SDM.ep.urlPrefix+"/frag/"+SDM.pm.pii+"/"+SDM.pf.frag.fat+"/"+"mfi/mfiall",function(){});var singleFrag=false;Fragment.processFrag($("#"+fID),singleFrag)}else if(typeof allFrags!="undefined"&&
allFrags==true){var fragIdNum=fID.substr(fID.indexOf("_")+1)*1;if(fragIdNum>1){$("#"+fID).children("ul.authorGroup").not(".subChapAuth").addClass("smh").css("display","none");$("#"+fID).children("ul.affiliation").addClass("smh").css("display","none");$("#"+fID).find("li.smh5").show();$("#"+fID).find("li.smh5").parents().show()}$("#"+fID).find("ul.affiliation").not(".inlCollab ul.affiliation").find("li").addClass("smh5plus").css("display","none")}++fI;if(fI<fC)setTimeout(function(){Fragment.addFrag(fI,
fC,cfg,allFrags)},100);else{if(typeof cfg!="undefined"&&typeof cfg.successCb=="function")cfg.successCb(cfg.successCbArg);refResolveEnabled=true}},bail:function(t,r,i){if(r!=undefined)if(SDM.pf.frag.fat!=undefined)$.get(SDM.ep.urlPrefix+"/frag/"+SDM.pm.pii+"/"+SDM.pf.frag.fat+"/"+"mfi/"+r,function(){});else $.get(SDM.ep.urlPrefix+"/frag/"+SDM.pm.pii+"/"+"status"+"/"+"mfi/"+r,function(){});var tt=0;if(t!=undefined)tt=t;var ii="";if(i!=undefined)ii="#"+i;Fragment.bail=function(t,r,i){return};setTimeout(function(){window.location.href=
window.location.href+"?np=y"+ii},tt)},fixFrag1:function(){$("#centerInner").prepend($("#frag_1"));$("#centerInner").prepend($("#centerInner .headTemplate"));$("#frag_1").show();Fragment.foldCheck()},foldCheckJumper:function(fragStr){var aCount=Fragment.mapAuthors.length;var rslt=1;if(typeof console!="undefined"&&typeof console.time!="undefined")console.time("authorLoop");for(var a=0;a<aCount;a++){var fragIdStr=Fragment.getIntraRefFragId(Fragment.mapAuthors[a]);var fragId=fragIdStr.split("_")[1]*1;
if(fragId>rslt)rslt=fragId}if(typeof SDM=="object"&&(SDM.debugFlag!="undefined"&&SDM.debugFlag>0))if(typeof console!="undefined"&&typeof console.timeEnd!="undefined")console.timeEnd("authorLoop");Fragment.foldCheckJumper=function(){return rslt};return rslt},foldCheck:function(fragStr){DBG.out(1,"foldCheck("+fragStr+")");if(typeof fragStr=="undefined")fragStr="frag_1";Fragment.checkForReferences(fragStr);if($(window).height()*SDM.pf.frag.foldFactor>$("#centerInner")[0].scrollHeight*1&&$(".page_fragment").last().attr("data-last")!=
"true"){var idInt=fragStr.substr(fragStr.indexOf("_")+1)*1;if(Fragment.mapsComplete){var idInt2=Fragment.foldCheckJumper()-1;if(idInt2==0);else if(idInt2<=idInt);else idInt=idInt2;DBG.out(1,"foldCheck::mapsComplete skipping to "+idInt)}DBG.out(1,"calling get for "+(idInt+1));while($("#frag_"+(idInt+1)).length)idInt=idInt+1;Fragment.get("frag_"+(idInt+1),undefined,{successCb:Fragment.foldCheck,successCbArg:"frag_"+(idInt+1),showLoadedFrag:MoreInformation.hideFrag})}else{Fragment.processHash();MoreInformation.init();
if(SDM.pf.reqAllFrags){var attempts=0;var mapCheckTwo=function(){if(Fragment.mapsComplete)if(typeof Fragment.maps.totElems!="undefined"&&Fragment.maps.totElems<SDM.pf.maxElemsAllFrags){DBG.out(1,"making frag/all call");Fragment.getAllFrags()}else{DBG.out(1,"Article has more than "+SDM.pf.maxElemsAllFrags+" elements. Not making frag/all call");SDM.pf.reqAllFrags=false;if(SDM.pf.ref.resFirstFragRefs)Fragment.loadRefFrag()}else if(attempts<1){attempts++;setTimeout(function(){mapCheckTwo()},500)}};mapCheckTwo()}else if(SDM.pf.ref.resFirstFragRefs){var attempts=
0;var mapCheckThree=function(){if(Fragment.mapsComplete)Fragment.loadRefFrag();else if(attempts<1){attempts++;setTimeout(function(){mapCheckThree()},500)}};mapCheckThree()}}},isFooterEnabled:function(){if(typeof SDM.pf.frag.fat=="undefined"||Fragment.fragmentMap&&Fragment.reqRecord[_.last(Fragment.fragmentMap)])return true;return false},isMalformation:function(){return $("#centerInner").children().not("noscript, .page_fragment, .page_fragment_ind, #sdSystemMsg").length>0},get:function(fragID,z,opts){var cfg=
{successCb:undefined,successCbArg:undefined,failureCb:undefined,failureCbArg:undefined,showLoadedFrag:function($f){return true}};if(opts)$.extend(true,cfg,opts);if($("#"+fragID).length){if(cfg.showLoadedFrag($("#"+fragID)))$("#"+fragID).show();else $("#"+fragID).hide();return}DBG.out(1,"Fragment.get("+fragID+")");DBG.out(1,opts);var fragIDVal=fragID.substr(fragID.indexOf("_")+1);if(fragIDVal=="NaN")return;if(!Fragment.isAvail()){Fragment.bail(300,"getna");return}if(fragID=="all"){if(Fragment.all!=
undefined)return}else if(fragID=="maps");else{if(Fragment.fragmentMap&&typeof _.indexOf(Fragment.fragmentMap,fragID)=="undefined"){DBG.out(1,"Invalid fragment get request based on fragmentMap");return}else if($(".page_fragment").last().attr("data-last")=="true"&&$(".page_fragment").last().attr("data-fid")*1<=fragID.split("_")[1]*1){DBG.out(1,"Invalid fragment get request based on data-last");return}if(typeof Fragment.reqRecord[fragID]=="undefined")Fragment.reqRecord[fragID]=1;else if(Fragment.gentle&&
Fragment.reqRecord[fragID]<SDM.pf.frag.retry)Fragment.reqRecord[fragID]=Fragment.reqRecord[fragID]+1;else return}if(z!=undefined)SD_UTIL.sendUserKeyEvent("pagination","article",z,SDM.pm.contentFamily);$.ajax({type:"GET",url:SDM.ep.urlPrefix+"/frag/"+SDM.pm.pii+"/"+SDM.pf.frag.fat+"/"+fragID,aFragID:fragID,aCfg:cfg,aZ:z,success:function(a,b,c){Fragment.getSuccess(a,this.aFragID,this.aCfg,this.aZ);ArticlePage.adjustRightPane()},error:function(a,b,c){Fragment.getError(this.aFragID,this.aCfg,this.aZ)}})},
getError:function(fragID,cfg,z){if(fragID=="maps")Fragment.reqRecord[fragID]=Fragment.reqRecord[fragID]+1;else if(fragID=="all"){if(typeof cfg!="undefined"&&typeof cfg.failureCb=="function")cfg.failureCb(cfg.failureCbArg);return}else if(Fragment.gentle&&Fragment.reqRecord[fragID]<SDM.pf.frag.retry){DBG.out(1,"got error on "+fragID+" retrying");setTimeout(function(){Fragment.get(fragID,z,cfg)},SDM.pf.frag.retryDelay)}else{DBG.out(1,"got error on "+fragID+" redirecting");if(typeof cfg!="undefined"&&
typeof cfg.failureCb=="function")cfg.failureCb(cfg.failureCbArg);else Fragment.bail(300,"geterr")}},loadTarget:function(idStr,opt){var allSet=false;if($("#"+idStr).length){allSet=true;var parentFrag=$(Fragment.getFragById(idStr));var fIdStr="";fIdStr=parentFrag.attr("id");var fId=fIdStr.split("_")[1];var allSet=true;for(var s=fId-opt.preBuffer;s<fId+1;s++)if(!$("#frag_"+s).length)allSet=false}if(allSet)opt.f();else{var fIdStr=Fragment.getIntraRefFragId(idStr);if(!fIdStr)return;var fId=fIdStr.split("_")[1];
var start=fId-opt.preBuffer;if(start<2)start=2;var len=opt.preBuffer+opt.postBuffer+1;if(start+len>Fragment.fragmentMap.length)len=Fragment.fragmentMap.length-start+1;Fragment.getBatch({s:start,l:len,f:opt.f})}},getBatch:function(opt){var start=opt.s;var len=opt.l;var func=opt.f;$.ajax({type:"GET",url:SDM.ep.urlPrefix+"/frag/"+SDM.pm.pii+"/"+SDM.pf.frag.fat+"/"+"batch"+"/"+start+"/"+len,success:function(str,b,c){str.length>30?sI=-30:sI=str.length*-1;var endStr=str.slice(sI);if(endStr.match(/ERROR::/)){DBG.out(1,
"Fragment::fragLoad:: Unable to retrieve batch");return}var parts=str.split("!!!FRAG!!!");var partCount=parts.length-1;DBG.out(1,"Fragment::fragLoad:: received "+partCount+" fragments");for(var i=0;i<partCount;i++){DBG.out(1,"Fragment::fragLoad::working on "+(start+i));var fragIdNum=start+i;if(!$("#frag_"+fragIdNum).length){var prevFrag=Fragment.getPrevFrag(fragIdNum);DBG.out(1,"Inserting after "+prevFrag.attr("id"));prevFrag.after(parts[i]);$("#frag_"+fragIdNum).show();Fragment.processFrag($("#frag_"+
fragIdNum),true)}else DBG.out(1,"ignoring frag_"+fragIdNum)}if(typeof func=="function")func()},error:function(a,b,c){}})},getFragById:function(id){return $("#"+id).parents(".page_fragment")},getIntraRefFragId:function(id){var entry=_.find(Fragment.crossRefMap,function(obj){return obj.id==id});if(entry)return entry.fid;else{DBG.out(1,"Fragment.getIntraRefFragId::"+id+" not found in map");return null}},getNextByType:function(crntId,cStr){var t="u";if(cStr=="authorName")return Fragment.mapAuthors[Fragment.getNextIndex(Fragment.mapAuthors,
crntId)];else if(cStr=="references")return Fragment.mapReferences[Fragment.getNextIndex(Fragment.mapReferences,crntId)];else if(cStr=="figure")return Fragment.mapFigures[Fragment.getNextIndex(Fragment.mapFigures,crntId)];else if(cStr=="table")return Fragment.mapTables[Fragment.getNextIndex(Fragment.mapTables,crntId)];else if(cStr=="ecomponent")return Fragment.mapEcomponents[Fragment.getNextIndex(Fragment.mapEcomponents,crntId)];else if(cStr=="tblFootnote"||cStr=="footnote")return Fragment.mapFootnotes[Fragment.getNextIndex(Fragment.mapFootnotes,
crntId)];else return Fragment.mapUnknowns[Fragment.getNextIndex(Fragment.mapUnknowns,crntId)]},getNextIndex:function(a,id){var i=_.indexOf(a,_.find(a,function(str){return str==id}));if(i<a.length-1)return i+1;else return-1},getPrevFrag:function(fragIdInt){if(fragIdInt==1)return $("#centerInner .head");var locInt=1;$("#centerInner .page_fragment").each(function(){var idStr=$(this).attr("id");var idInt=idStr.substr(idStr.indexOf("_")+1)*1;if(idInt<=fragIdInt&&locInt<=idInt)locInt=idInt});return $("#"+
"frag_"+locInt)},getPrevIndex:function(a,id){var i=_.indexOf(a,_.find(a,function(str){return str==id}));if(i==0)return-1;else return i-1},getPrevByType:function(crntId,cStr){var t="u";if(cStr=="authorName")return Fragment.mapAuthors[Fragment.getPrevIndex(Fragment.mapAuthors,crntId)];else if(cStr=="references")return Fragment.mapReferences[Fragment.getPrevIndex(Fragment.mapReferences,crntId)];else if(cStr=="figure")return Fragment.mapFigures[Fragment.getPrevIndex(Fragment.mapFigures,crntId)];else if(cStr==
"table")return Fragment.mapTables[Fragment.getPrevIndex(Fragment.mapTables,crntId)];else if(cStr=="ecomponent")return Fragment.mapEcomponents[Fragment.getPrevIndex(Fragment.mapEcomponents,crntId)];else if(cStr=="tblFootnote"||cStr=="footnote")return Fragment.mapFootnotes[Fragment.getPrevIndex(Fragment.mapFootnotes,crntId)];else return Fragment.mapUnknowns[Fragment.getPrevIndex(Fragment.mapUnknowns,crntId)]},getSuccess:function(fragStr,fragID,cfg,z){var cookieStr=Cookie.get("FAT");if(cookieStr&&cookieStr.length){DBG.out(1,
cookieStr);SDM.pf.frag.fatOld=SDM.pf.frag.fat;SDM.pf.frag.fat=cookieStr}if(fragID=="maps"){Fragment.setMaps(fragStr);return}if(fragID=="all"){Fragment.all=fragStr;Fragment.processAllRsp(cfg);if(typeof cfg!="undefined"&&typeof cfg.successCb=="function")cfg.successCb(cfg.successCbArg);return}if($("#"+fragID).length)return;var fragIdNum=fragID.substr(fragID.indexOf("_")+1)*1;var prevFrag=Fragment.getPrevFrag(fragIdNum);prevFrag.after(fragStr);if(cfg.showLoadedFrag($("#"+fragID)))$("#frag_"+fragIdNum).show();
else $("#frag_"+fragIdNum).hide();if(Fragment.isMalformation())Fragment.bail(300,"mfi");var singleFrag=true;Fragment.processFrag($("#frag_"+fragIdNum),singleFrag);Fragment.checkForReferences(fragID);if(typeof cfg!="undefined"&&typeof cfg.successCb=="function")cfg.successCb(cfg.successCbArg);if(fragIdNum==1){DynamicArtContent.fragReady=true;DynamicArtContent.processResponse()}},isAllLoaded:function(){if(typeof Fragment.fragmentMap=="undefined")return false;var rslt=true;_.each(Fragment.fragmentMap,
function(id){if(!$("#"+id).length)rslt=false});return rslt},isAvail:function(){return typeof SDM.pf.frag=="object"},isAllValid:function(){if(!Fragment.all)return false;Fragment.all.length>30?sI=-30:sI=Fragment.all.length*-1;var endStr=Fragment.all.slice(sI);if(endStr.match(/ERROR::/))return false;return true},processAllRsp:function(cfg){if(!Fragment.isAllValid()){DBG.out(0,"processAllRsp:: Unable to retrieve all");return}Fragment.fL=Fragment.all.split("!!!FRAG!!!");Fragment.all=Fragment.all.replace(/!!!FRAG!!!/g,
"");var fC=Fragment.fL.length-1;refResolveEnabled=false;var allFrags=true;Fragment.addFrag(0,fC,cfg,allFrags)},processFrag:function($frag,singleFrag){var fragID=$frag.attr("id");var fragIdNum=$frag.attr("data-id")*1;DynamicArtContent.populateDynamicComponents(fragID);if($frag.attr("data-last")){DBG.out(1,fragID+" is the last fragment");Fragment.reqRecord["frag_"+(fragIdNum+1)]=1}ArticlePage.addDynamics(fragID);$frag.on("click",".intra_ref,.authorVitaeLink,.figureLink,.authorName, .viewWS",{z:"centerPane"},
rightSidePane.findTargetElement);$frag.on("click",".btnHolder",function(e){ArticlePage.toggleOptions(e,this)});ArticlePage.lazyLoadFragInit(fragID,singleFrag);$("#"+fragID+" div.downloadCsv").bind("click",TableDownload.processRequest);$("#"+fragID+" a.ppt").bind("click",FigureDownload.processRequest);EComponent.init(fragID);if(!SDM.pf.reqAllFrags)resolveReferences(fragID);ExtObjLink.init($("#"+fragID));if(typeof sgf!="undefined"&&typeof sgf.continueFrameworkActivities!="undefined")sgf.continueFrameworkActivities(fragID);
if($("#"+fragID).hasClass("auth_frag")&&$("#showMoreButtons .moreLink").is(":visible")){$("#"+fragID).children("ul.authorGroup").not(".subChapAuth").addClass("smh").css("display","inline");$("#"+fragID).find("ul.affiliation.authAffil").addClass("smh");$("#"+fragID).hide()}if(!$("#"+fragID).hasClass("auth_frag")&&Fragment.addLabel)if($(".lightWeight").length){var obj=$(".lightWeight").parent().html();obj=obj.replace('class="icon_pdf toolbar lightWeight"','class="icon_pdf toolbar lightWeight additional"');
obj=obj.replace('id="pdfLink"','id="addPdfLink"');obj=obj.replace("_zone=toolbar","_zone=workspace");if($(".svAbstract").length)if($("#embeddedPDF").length){$("#embeddedPDF").after(obj);PDFIcon.init();Fragment.addLabel=false}else if($(".svKeywords").length){$(".keyword:last").after(obj);PDFIcon.init();Fragment.addLabel=false}else{$(".svAbstract:last").after(obj);PDFIcon.init();Fragment.addLabel=false}else if($("#excerptPlaceholder").length){$("#excerptPlaceholder").after(obj);PDFIcon.init();Fragment.addLabel=
false}else if($("#embeddedPDF").length){$("#embeddedPDF").after(obj);PDFIcon.init();Fragment.addLabel=false}else if($(".extLinks").length){$(".extLinks").after(obj);PDFIcon.init();Fragment.addLabel=false}}if($frag.attr("data-last")){if(SDM.pm.ecomponent_avail==true)getEcomponents();$("#footer-area").show()}ArticlePage.viewHandler()},processHash:function(){DBG.out(1,"Fragment.processHash()");var hash=window.location.hash;if(hash=="")hash="#"+SDM.secId;if(hash!="undefined"&&hash!=""){if(Fragment.isAvail()&&
!Fragment.fragmentMap)if(Fragment.hashWaitDone==false){Fragment.hashWaitDone=true;setTimeout(function(){Fragment.processHash()},SDM.pf.frag.hashWait)}else return;hash=hash.substr(1);if(hash=="MMCvFirst"){if($("dl.ecomponent").length){hash=$("dl.ecomponent").first().attr("id");if(typeof hash=="undefined"){$("dl.ecomponent").first().attr("id","ecmptJumpId");hash="ecmptJumpId"}}else hash=Fragment.mapEcomponents[0];if(typeof hash=="undefined"||hash==null)return}if(Fragment.isAvail()){var $fragSet=$("#centerInner .page_fragment").filter(function(i){return MoreInformation.hideFrag($(this))});
$fragSet.show()}if($("#"+hash)[0]){Fragment.scrollFlag=false;CollapsibleTextbox.openTboxForTarget(hash);$("html,body").moveTo(hash,{cbFunc:function(){Fragment.scrollFlag=true}})}else if(Fragment.isAvail()){var targetFrag=Fragment.getIntraRefFragId(hash);if(targetFrag){Fragment.get("frag_"+(targetFrag.split("_")[1]*1-1),undefined);Fragment.get(targetFrag,undefined,{successCb:function(hid){Fragment.scrollFlag=false;CollapsibleTextbox.openTboxForTarget(hid);setTimeout(function(){$("html,body").moveTo(hid,
{cbFunc:function(){Fragment.scrollFlag=true}})},500)},successCbArg:hash});Fragment.get("frag_"+(targetFrag.split("_")[1]*1+1),undefined)}}}},scroll:function(){if(Fragment.scrollFlag){var isDown=$(window).scrollTop()>Fragment.prevST;Fragment.prevST=$(window).scrollTop();var h=$(window).height();h=Math.floor(h*Fragment.winHeightAdjustFactor);var st=$(window).scrollTop();var sh=$(window)[0].scrollHeight;var needList=Fragment.processScroll(st,st+h,isDown,{filterFunc:function(i){if(MoreInformation.closed==
true){if(!MoreInformation.hideFrag($(this)))return false;return true}else{if(!MoreInformation.hideFrag($(this)))return true;return true}}})}},setMaps:function(str){if(Fragment.mapsComplete)return;try{Fragment.maps=$.parseJSON(str)}catch(e){return}Fragment.crossRefMap=Fragment.maps.crossRefs;Fragment.fragmentMap=Fragment.maps.list;Fragment.authMap=Fragment.maps.authMap;Fragment.refMap=Fragment.maps.refMap;Fragment.setCrossRefMap();Fragment.gentle=false;Fragment.mapsComplete=true},setCrossRefMap:function(){var idList=
Fragment.crossRefMap;var idListLen=idList.length;var fid;for(var i=0;i<idListLen;i++)if(idList[i].t=="a")Fragment.mapAuthors.push(idList[i].id);else if(idList[i].t=="r"){Fragment.mapReferences.push(idList[i].id);if(SDM.pf.ref.resFirstFragRefs)if(idList[i].REF=="Y")fid=idList[i].fid}else if(idList[i].t=="f")Fragment.mapFigures.push(idList[i].id);else if(idList[i].t=="t")Fragment.mapTables.push(idList[i].id);else if(idList[i].t=="e")Fragment.mapEcomponents.push(idList[i].id);else if(idList[i].t=="n")Fragment.mapFootnotes.push(idList[i].id);
else Fragment.mapUnknowns.push(idList[i].id);Fragment.mapAuthors=_.uniq(Fragment.mapAuthors)},processScroll:function(visTop,visBot,isDown,cfg){DBG.out(1,"processScroll("+visTop+","+visBot+")");var fList=[];var $fragSet=$("#centerInner .page_fragment").filter(cfg.filterFunc);$fragSet.each(function(){DBG.out(5,"processScroll::loop::about to show "+$(this).attr("id"));$(this).show();var fragTop=Math.floor($(this).position().top);var fragBot=Math.ceil($(this).height())+fragTop;if(fragBot>=visTop&&fragBot<=
visBot||(fragTop>=visTop&&fragTop<=visBot||fragTop<=visTop&&fragBot>=visBot)){fList.push($(this).attr("data-fid")*1);DBG.out(2,$(this).attr("id")+"::"+fragTop+"::"+fragBot)}});fList=_.sortBy(fList,function(i){return i});if(fList.length==0)return;if(isDown){DBG.out(3,"before::"+fList);fList=Fragment.gapFindDown(fList);DBG.out(3,"after::"+fList);if($("#frag_"+fList[fList.length-1]).attr("data-last"))Fragment.checkAllReferences(fList);else{var nfs="frag_"+(fList[fList.length-1]+1);DBG.out(1,"Going down... looking for "+
nfs);if(!$("#"+nfs).length)Fragment.get(nfs,"centerPane",{showLoadedFrag:MoreInformation.hideFrag});else{if(MoreInformation.hideFrag($(nfs)))$(nfs).show();Fragment.checkAllReferences(fList)}}}else{DBG.out(3,"before::"+fList);fList=Fragment.gapFindUp(fList);DBG.out(3,"after::"+fList);if(fList[0]!=1){var nfs="frag_"+(fList[0]-1);DBG.out(1,"Going up... looking for "+nfs);if(!$("#"+nfs).length)Fragment.get(nfs,"centerPane",{successCb:function(){if(MoreInformation.hideFrag($(nfs))){var nfsH=$("#"+nfs).height();
var nst=$(window).scrollTop()+nfsH+10;DBG.out(5,"processScroll::1::original scrollTop "+$(window).scrollTop());DBG.out(5,"processScroll::1::new      scrollTop "+nst);$(window).scrollTop(nst)}},showLoadedFrag:MoreInformation.hideFrag});else{var isVis=$("#"+nfs).is(":visible");if(MoreInformation.hideFrag($(nfs))){$(nfs).show();if(!isVis&&$("#"+nfs).is(":visible")){var nfsH=$("#"+nfs).height();var nst=$(window).scrollTop()+nfsH+10;DBG.out(5,"processScroll::2::original scrollTop "+$(window).scrollTop());
DBG.out(5,"processScroll::2::new      scrollTop "+nst);$(window).scrollTop(nst)}}}}}DBG.out(2,"processScroll is done")},gapFindDown:function(a){var r=[];var l=a.length;var shift=0;for(var i=0;i<l;i++)if(a[i]!=-1)if(i<l-1){r[i+shift]=a[i];if(a[i]+1==a[i+1]);else{DBG.out(4,"gapFindDown::found a gap::"+a[i+1]);a[i+1]=-1;need=a[i]+1;shift++;return r}}else r[i+shift]=a[i];return r},gapFindUp:function(a){var r=[];var l=a.length;var shift=0;for(var i=l-1;i>=0;i--)if(a[i]!=-1)if(i!=0){r[i-shift]=a[i];if(a[i]-
1==a[i-1]);else{DBG.out(4,"gapFindUp::found a gap::"+a[i-1]);a[i-1]=-1;need=a[i]-1;shift++;while(typeof r[0]=="undefined")r.shift();return r}}else r[i-shift]=a[i];while(typeof r[0]=="undefined")r.shift();return r},isFragmentMapLoaded:function(){if(typeof Fragment.fragmentMap=="undefined")return false;else return true},isFragmentAllLoaded:function(){if(typeof Fragment.all!="undefined"&&Fragment.all.length)return true;else return false},handleAipClicks:function(ee){var selID=$(ee.target).closest("a").attr("href").split("#");
selID=selID[1];ee.preventDefault();if(!Fragment.isAvail()){$("html,body").moveTo(selID,{focus:false});return}Fragment.scrollFlag=false;if(Fragment.isAvail()){var $fragSet=$("#centerInner .page_fragment").filter(function(i){return MoreInformation.hideFrag($(this))});$fragSet.show()}if(Fragment.isFragmentMapLoaded())if(!$("#frag_"+Fragment.fragmentMap.length)[0])Fragment.get("frag_"+Fragment.fragmentMap.length,null,{successCb:function(){$("html,body").moveTo(selID,{focus:false,cbFunc:function(){Fragment.scrollFlag=
true}})},failureCb:function(){Fragment.scrollFlag=true}});else $("html,body").moveTo(selID,{focus:false,cbFunc:function(){Fragment.scrollFlag=true}});else if(Fragment.waitDone==false){Fragment.waitDone=true;setTimeout(function(){Fragment.handleAipClicks(ee)},SDM.pf.frag.hashWait)}else Fragment.scrollFlag=true},getAllFrags:function(){if(SDM.pf.reqAllFrags)Fragment.get("all",null,{successCb:Fragment.checkAllFrags})},checkAllFrags:function(){var tryCnt=0;var tryMax=10;var delay=1E3;var allCheck=function(){clearInterval(allFragIntrvl);
if(SDM.pf.reqAllFrags)if(Fragment.isFragmentAllLoaded()&&Fragment.isAllLoaded()){$(".page_fragment").show();SDPA.allFrags();if(SDM.pf.ref.resFirstFragRefs){var fragId;var refList=Fragment.refMap;if(refList.length>0){fragId=refList[0].fid;Fragment.checkForReferences(fragId)}}}else if(tryCnt<tryMax){tryCnt++;delay=delay*1.1;allFragIntrvl=setInterval(allCheck,delay)}else DBG.out(0,"Fragment.checkAllFrags - Max attempts made.")};var allFragIntrvl=setInterval(allCheck,0)},checkAllReferences:function(fList){if(SDM.pf.reqAllFrags&&
typeof fList!=undefined)for(var i=fList.length-1;i>=0;i--){var testFrag="frag_"+fList[i];Fragment.checkForReferences(testFrag)}},checkForReferences:function(fragId){if((SDM.pf.reqAllFrags||SDM.pf.ref.resFirstFragRefs)&&$("#"+fragId).length)if($("#"+fragId).find(".reference")[0])resolveReferences("centerPane")},loadRefFrag:function(){var fragId;var refList=Fragment.refMap;if(refList.length>0){fragId=refList[0].fid;Fragment.get(fragId,undefined,{successCb:Fragment.checkForReferences,successCbArg:fragId})}}};var SearchWithin={init:function(bkOutlineSelStr,selStr,idConvert,funcNoResult){var val=SearchWithin.loadSearch();if(val.cid==SDM.pm.cid&&val.str){var swObj=SearchWithin.loadResult();if(swObj)if(swObj&&swObj.cid==SDM.pm.cid)if(swObj.status!=0)SearchWithin.clear();else SearchWithin.processResult(swObj,bkOutlineSelStr,selStr,idConvert);else SearchWithin.reqResult(bkOutlineSelStr,selStr,idConvert,funcNoResult);else SearchWithin.reqResult(bkOutlineSelStr,selStr,idConvert,funcNoResult)}},loadSearch:function(){var flag=
true;var searchStr="";var cidStr="";var cookieStr=Cookie.get("SEARCHWITHIN");if(cookieStr&&cookieStr.length>1){flag=cookieStr.split("SW()")[0];searchStr=cookieStr.split("SW()")[1];cidStr=cookieStr.split("SW()")[2]}else return{f:"",str:"",cid:""};return{f:flag,str:searchStr,cid:cidStr}},saveSearch:function(f,sStr){Cookie.set("SEARCHWITHIN",f+"SW()"+sStr+"SW()"+SDM.pm.cid)},reqResult:function(bkOutlineSelStr,selStr,idConvert,funcNoResult){$.get(SDM.ep.urlPrefix+"/searchwithin",function(res){var result;
try{result=$.parseJSON(res)}catch(e){DBG.out(1,"SearchWithin failed");return}if(result.status==1||typeof result.hitTerms=="undefined")funcNoResult();else if(result.status==0){SearchWithin.processResult(result,bkOutlineSelStr,selStr,idConvert);$("#outline").scrollTop($("#outline a.swh:first").position().top)}})},processResult:function(result,bkOutlineSelStr,selStr,idConvert){var len=result.piis.length;for(var i=0;i<len;i++)if(SDM.pm.pii==result.piis[i])SearchWithin.hlCenterPane(result.hitTerms.toString().replace(/,/g,
" "),selStr,idConvert);SearchWithin.hlOutline(result.piis,bkOutlineSelStr);SearchWithin.saveResult(result)},saveResult:function(rslt){if(SDU.cookieAvail()&&(SDU.sessionStorageAvail()&&typeof JSON!="undefined"))sessionStorage.setItem("bk.sw",JSON.stringify(rslt))},loadResult:function(){if(SDU.cookieAvail()&&SDU.sessionStorageAvail()){var sw=sessionStorage.getItem("bk.sw");if(sw){var swObj=$.parseJSON(sw);if(swObj.cid==SDM.pm.cid)return swObj;else{SearchWithin.clearResult();return null}}else{SearchWithin.clearResult();
return null}}},clearResult:function(){if(SDU.cookieAvail()&&SDU.sessionStorageAvail())sessionStorage.removeItem("bk.sw")},clear:function(keepMsg){$(".swh").removeClass("swh");$(".searchword").removeClass("searchword");var site=document.location.pathname.split("/article/pii/")[0];Cookie.remove("SEARCHWITHIN");if(typeof keepMsg=="undefined"&&typeof ArticlePage!="undefined")ArticlePage.searchWithinErrorMsgClear()},hlOutline:function(piis,selStr){var len=piis.length;for(var i=0;i<len;i++)$(selStr).each(function(){if($(this).attr("data-pii")==
piis[i]){DBG.out(1,"Highlighting Book TOC item "+$(this).text());if($(this).attr("data-pii")!=SDM.pm.pii)$(this).find("div a").addClass("swh");EbookTOC.getPath2Item(piis[i]).each(function(){$(this).children("a").addClass("swh")})}})},hlCenterPane:function(hitTerms,selStr,idConvert){searchStr=hitTerms;searchhi.process($("#centerPane")[0],searchStr);var objs=$(".searchword").each(function(){$(this).attr("data-posy",$(this).position().top)});$(selStr).each(function(){$(this).attr("data-posy",$(this).position().top);
objs.push(this)});objs=_.sortBy(objs,function(val){return $(val).attr("data-posy")*1});objs=_.filter(objs,function(val){return $(val).parents(".textboxBody").length==0});objs=objs.reverse();var len=objs.length;for(i=0;i<len;i++){var $c=$(objs[i]);if($c.hasClass("searchword")){var ii=i;while($(objs[ii]).length&&$(objs[ii]).hasClass("searchword"))ii++;$("#"+idConvert($(objs[ii]).attr("id"))).addClass("swh");var foundType="h4";if($(objs[ii]).is("h4"))foundType="h4";if($(objs[ii]).is("h3"))foundType=
"h3";if($(objs[ii]).is("h2")){foundType="h2";done=true}var done=false;while(!done&&$(objs[ii]).length){if(foundType=="h4"){if($(objs[ii]).is("h4"));if($(objs[ii]).is("h3"))$("#"+idConvert($(objs[ii]).attr("id"))).addClass("swh");if($(objs[ii]).is("h2")){done=true;$("#"+idConvert($(objs[ii]).attr("id"))).addClass("swh")}}else if(foundType=="h3"){if($(objs[ii]).is("h4"));if($(objs[ii]).is("h3"));if($(objs[ii]).is("h2")){$("#"+idConvert($(objs[ii]).attr("id"))).addClass("swh");done=true}}if($(objs[ii]).is("h2"))done=
true;ii++}}}}};var SVApi={addMenuItem:function(boxId,ecompId,imageUrl,altText,fnName){GadgetUtil.displayGadgetCallBack=fnName;var ecompObj="";var boxObj=$("#"+boxId);if($(boxObj).find("dd.ecomponent").length>1)ecompObj=$("#"+ecompId).next("dd.menuButtonLinks").find("ul.menuButton");else ecompObj=$("#"+boxId).find("ul.menuButton");if(ecompObj[0]){var htmlStr='<li><a class="closeMMC" href="javascript:void(0)" onclick=\'GadgetUtil.toggleGadgetView(this,"'+boxId+'","'+ecompId+"\");'>";if(imageUrl!="")htmlStr+='<img src="'+
imageUrl+'" alt="'+altText+'"></img>';else htmlStr+=altText;htmlStr+="</a></li>";$(ecompObj).append(htmlStr)}},getCopy:function(){var j=jQuery(".svBigBox");if(j.length>0){var c=j.clone();c.find(".containerApplOver, script, style, link").remove();return c.html()}return null},allContentAvail:function(cb,arg1,arg2){cb(arg1,arg2,Fragment.isAllLoaded())},getCurrentArticleContent:function(cb,arg1,arg2){cb(arg1,arg2,SVApi.getCopy())},getArticleContent:function(cb,arg1,arg2){if(typeof Fragment=="object"&&
Fragment.isAvail())if(Fragment.isAllLoaded()){DBG.out(1,"SVApi.getArticleContent Fragment.isAllLoaded therefore getCopy()");cb(arg1,arg2,SVApi.getCopy())}else if(Fragment.all!=undefined&&Fragment.all.length){DBG.out(1,"SVApi.getArticleContent Fragment.all!=undefined therefore return Fragment.all");cb(arg1,arg2,Fragment.all)}else{DBG.out(1,"SVApi.getArticleContent nothing in flight thefore Fragment('all')");Fragment.get("all",null,{successCb:function(){if(!Fragment.isAllValid())cb(arg1,arg2,null);
else cb(arg1,arg2,Fragment.all)},failureCb:function(){cb(arg1,arg2,null)}})}else cb(arg1,arg2,SVApi.getCopy())},getTransactionContext:function(){return{"pageType":"article","platform":"SD","prDevice":SDM.ep.prDevice,"sds":SDM.si.sds,"tid":SDM.tid}},isAuthorshipClaimedByUser:function(cb,arg1,arg2){$.get(SDM.ep.urlPrefix+"/authAccessGadgetsInfo/"+SDM.si.webUserId+"/"+SDM.pm.pii,function(response){cb(arg1,arg2,response)})},getEuid:function(){return SDM.si.euidCookieObject}};var getEuid=SVApi.getEuid;var Outline={onHover:false,pendCloseTimer:null,init:function(){$("#leftPane").hover(function(){Outline.hoverOverOn()},function(){Outline.hoverOverOff()});$("#leftPane").on("click","#leftButton",function(e){Outline.sidebarClick(e)});$("body").on("click","#outlineContainer .closeBt",function(e){Outline.toggleOutlinePopup(true)})},buildOutlineJsonSide:function(cfg,outlineObj){var $iOutline=$("#itemOutline");var parentItem="";var $figureOutline=$("#fig .figures");if(outlineObj!=null&&(outlineObj.TOC!=
undefined&&outlineObj.TOC.length>1)){$("#olGraphCbBox").prepend('<div class="olHead"><h2 id="toc_title">Article outline</h2>'+'<label><input id="outlineGraphicsCheckBox" type="checkBox">Show full outline</label></div>');$(outlineObj.TOC).each(function(i,h2Sec){if(h2Sec.sT!=undefined&&h2Sec.sT.length>0){var secTitle=h2Sec.sT;secTitle=secTitle.replace(/&#39;/g,"'");if(SDM.pageType=="article_full")$iOutline.append(Outline.addItemSection(h2Sec.sID,secTitle,"h2"));else if(SDM.pageType=="article_abs")$iOutline.append(Outline.addItemOutline(h2Sec.sID,
secTitle,"h2"));parentItem=h2Sec.sID}if(h2Sec.faID!=undefined&&h2Sec.faID.length>0)$(h2Sec.faID).each(function(i,floatanc){if(floatanc.fT=="fig"){var imageURL=SDM.ep.thumbimgUrlPrefix+outlineObj.EID+"-"+floatanc.fI;if(floatanc.fI.length>0)$figureOutline.append(Outline.addItemFig(floatanc.fID,floatanc.fL,imageURL,"h2",floatanc.fIh,parentItem,floatanc.fIa))}else if(floatanc.fT=="tbl")$figureOutline.append(Outline.addItemTbl(floatanc.fID,floatanc.fL,"h2",parentItem,floatanc.fIa));else if(floatanc.fT==
"ecomp")$figureOutline.append(Outline.addItemMMC(floatanc.fID,floatanc.fL,floatanc.floatEXT,"h2",parentItem,floatanc.fO,floatanc.fIa))});if(h2Sec.cT!=undefined&&h2Sec.cT.length>0){var secLevel="h3";$("#olGraphCbBox label").show();if(!(h2Sec.sT!=undefined&&h2Sec.sT.length>0)&&i<2){secLevel="h2";$("#olGraphCbBox label").hide()}$(h2Sec.cT).each(function(i,h3Sec){if(h3Sec.sT.length>0){var secTitle=h3Sec.sT;secTitle=secTitle.replace(/&#39;/g,"'");if(SDM.pageType=="article_full")$iOutline.append(Outline.addItemSection(h3Sec.sID,
secTitle,secLevel));else if(SDM.pageType=="article_abs")$iOutline.append(Outline.addItemOutline(h3Sec.sID,secTitle,secLevel));parentItem=h3Sec.sID}else $("#olGraphCbBox label").hide();if(h3Sec.faID!=undefined&&h3Sec.faID.length>0)$(h3Sec.faID).each(function(i,floatanc){if(floatanc.fT=="fig"){var imageURL=SDM.ep.thumbimgUrlPrefix+outlineObj.EID+"-"+floatanc.fI;if(floatanc.fI.length>0)$figureOutline.append(Outline.addItemFig(floatanc.fID,floatanc.fL,imageURL,"h3",floatanc.fIh,parentItem,floatanc.fIa))}else if(floatanc.fT==
"tbl")$figureOutline.append(Outline.addItemTbl(floatanc.fID,floatanc.fL,"h3",parentItem,floatanc.fIa));else if(floatanc.fT=="ecomp")$figureOutline.append(Outline.addItemMMC(floatanc.fID,floatanc.fL,floatanc.floatEXT,"h3",parentItem,floatanc.fO,floatanc.fIa))});if(h3Sec.cT!=undefined&&h3Sec.cT.length>0){secLevel="h4";$("#olGraphCbBox label").show();if(!(h2Sec.sT!=undefined&&h2Sec.sT.length>0)&&i<2){secLevel="h3";if(!(h3Sec.sT!=undefined&&h3Sec.sT.length>0)&&i<2){secLevel="h2";$("#olGraphCbBox label").hide()}}$(h3Sec.cT).each(function(i,
h4Sec){if(h4Sec.sT.length>0){var secTitle=h4Sec.sT;secTitle=secTitle.replace(/&#39;/g,"'");if(SDM.pageType=="article_full")$iOutline.append(Outline.addItemSection(h4Sec.sID,secTitle,secLevel));else if(SDM.pageType=="article_abs")$iOutline.append(Outline.addItemOutline(h4Sec.sID,secTitle,secLevel));parentItem=h4Sec.sID}else $("#olGraphCbBox label").hide();if(h4Sec.faID!=undefined&&h4Sec.faID.length>0)$(h4Sec.faID).each(function(i,floatanc){if(floatanc.fT=="fig"){var imageURL=SDM.ep.thumbimgUrlPrefix+
outlineObj.EID+"-"+floatanc.fI;$figureOutline.append(Outline.addItemFig(floatanc.fID,floatanc.fL,imageURL,"h4",floatanc.fIh,parentItem,floatanc.fIa))}else if(floatanc.fT=="tbl")$figureOutline.append(Outline.addItemTbl(floatanc.fID,floatanc.fL,"h4",parentItem,floatanc.fIa));else if(floatanc.fT=="ecomp")$figureOutline.append(Outline.addItemMMC(floatanc.fID,floatanc.fL,floatanc.floatEXT,"h4",parentItem,floatanc.fO,floatanc.fIa))})})}})}});if($("#itemOutline").text()==""){$("#outline .outlineMsg").html("This document does not have an outline.").show();
if(SDM.pm.contentType!="BK"&&!SDM.pf.mrwmod.isModArticle)$("#outline").css("top",0);if(mrwLeftPane.currentTab=="S"&&SDM.pf.mrwmod.isModArticle)$("#outline .outlineMsg").hide();$(".olHead").remove()}else $("#leftPane .outlineMsg").remove()}else{if(SDM.pm.contentType!="BK"&&!SDM.pf.mrwmod.isModArticle)$("#outline").css("top",0);$("#outline .outlineMsg").html("This document does not have an outline.").show();if(mrwLeftPane.currentTab=="S"&&SDM.pf.mrwmod.isModArticle)$("#outline .outlineMsg").hide()}if($figureOutline.children().size()==
0)$("#fig").remove();else if($iOutline.children().size()==0){$("#fig > hr").eq(0).hide();$("#olGraphCbBox").hide()}Outline.postBuild(cfg)},buildOutlineClientSide:function(cfg){var level="";var parentItem="";var $iOutline=$("#itemOutline");var $figureOutline=$("#fig .figures");if($(cfg.selector).length>0){if(!$("div.olHead").length)$("#olGraphCbBox").prepend('<div class="olHead"><h2 id="toc_title">Article outline</h2>'+'<label><input id="outlineGraphicsCheckBox" type="checkBox">Show full outline</label></div>');
$(cfg.selector).each(function(){if($(this).parents(".textboxBody").length>0);else{if($(this).attr("id")==undefined){$(this).attr("id","bs_"+Math.floor(Math.random()*1E5));DBG.out(1,"fixing id::"+$(this).attr("id")+"::"+$(this).text())}DBG.out(4,"adding::"+$(this).text());if($(this).is("h2")||($(this).is("h3")||$(this).is("h4"))){if($(this).is("h3")||$(this).is("h4"))$("#olGraphCbBox label").show();level=$(this)[0].tagName;level=level.toLowerCase();var label=$(this).html();var hasMml=$(this).find("#itemOutline .mathmlsrc");
if(hasMml)$("#itemOutline .mathmlsrc").attr("onclick","");if(label==undefined)label="";if(SDM.pageType=="article_full"){if($iOutline.find("#ol_"+$(this).attr("id")).length==0)$iOutline.append(Outline.addItemSection($(this).attr("id"),label,level))}else if(SDM.pageType=="article_abs")$iOutline.append(Outline.addItemOutline($(this).attr("id"),label,level));parentItem=$(this).attr("id")}else if($(this).hasClass("table")==true){var label=$(this).attr("data-label");if(label==undefined)label="";$figureOutline.append(Outline.addItemTbl($(this).attr("id"),
label,level,parentItem))}else if($(this).hasClass("figure")==true){var label=$(this).find(".label").html();if(label==undefined)label="";var image=SDM.ep.thumbimgUrlPrefix+$(this).find("dt img").attr("data-thumbEID");var thumbHeight=$(this).find("dt img").attr("data-thumbheight");if(!$(this).children("div").attr("id"))$figureOutline.append(Outline.addItemFig($(this).attr("id"),label,image,level,thumbHeight,parentItem,floatanc.fIa))}else if($(this).hasClass("ecomponent")==true){var label=$(this).attr("data-label");
if(label==undefined)label="";var ext=$(this).find("dd:first").attr("data-ext");$figureOutline.append(Outline.addItemMMC($(this).attr("id"),label,ext,level,parentItem))}else;}});if($("#itemOutline").text()!="")$("#leftPane .outlineMsg").remove()}else{if(SDM.pm.contentType!="BK"&&!SDM.pf.mrwmod.isModArticle)$("#outline").css("top",0);$("#outline .outlineMsg").html("This document does not have an outline.").show();if(mrwLeftPane.currentTab=="S"&&SDM.pf.mrwmod.isModArticle)$("#outline .outlineMsg").hide()}if($figureOutline.children().size()==
0)$("#fig").remove();else if($iOutline.children().size()==0){$("#fig > hr").eq(0).hide();$("#olGraphCbBox").hide()}Outline.postBuild(cfg)},buildOutlineUnavailable:function(cfg){if(SDM.pm.contentType!="BK"&&!SDM.pf.mrwmod.isModArticle)$("#outline").css("top",0);$("#outline .outlineMsg").html("The outline for this document is currently unavailable.");if(mrwLeftPane.currentTab!="S")$("#outline .outlineMsg").show()},postBuild:function(cfg){$("#itemOutline").after("<script>prs.rt('scr_toc')\x3c/script>");
var oObj=Outline.oObj;var leftAdState=Cookie.get("ad_left");if(!leftAdState){oObj.append('<div id="articleLeftAd" class="adBlock"></div>');Outline.showLeftAd()}if(cfg.searchWithin&&!$("#searchWithin")[0]){oObj.parent().prepend('<div id="searchWithin" class="textEntry" role="Search" aria-label="Book">'+'<div><form name="searchWithinForm" action="javascript:checkSearchWithin();ArticlePage.searchWithinSubmit();">'+'<input type="text" value="Search this book" title="Search this book" size="24" maxlength="450"></input></form>'+
'<button class="clearWithin" title="Clear book search"><div class="clearXHide"></div></button>'+'<button class="submit" title="Search this book"></button></div>'+"</div>");$("#searchWithin button.clearWithin").click(function(){$("#searchWithin input[type=text]").prop("value","Search this book");$(this).children().addClass("clearXHide").removeClass("clearXShow");SearchWithin.clear()});$("#leftPane button.submit").click(function(){ArticlePage.searchWithinSubmit()});$("#searchWithin input[type=text]").focusin(function(){if($(this).prop("value")==
"Search this book")$(this).prop("value","")});$("#searchWithin input[type=text]").focusout(function(){if($(this).prop("value")==""){$(this).prop("value","Search this book");$(this).parent().siblings(".clearWithin").children().addClass("clearXHide").removeClass("clearXShow")}else $(this).parent().siblings(".clearWithin").children().removeClass("clearXHide").addClass("clearXShow")})}if(SDM.pm.contentType=="BK")EbookTOC.init();if(SDM.pf.mrwmod.isModArticle&&(SDM.pf.mrwmod.ldrAvail&&!$("#lpTabs")[0])){$(".outlineMsg").hide();
mrwLeftPane.init();ExpandAll.init()}if(cfg.focusEffect==true)$("#itemOutline").syncTo(cfg);$("#outline > ul").show();if(SDM.pf.mrwmod.isModArticle&&SDM.pf.mrwmod.ldrAvail)$("#itemOutline").hide();$("#outlineGraphicsCheckBox").change(function(){Outline.toggleGraphics();$(window).scrollTop($(window).scrollTop()+1);if($("#outlineGraphicsCheckBox").prop("checked")==true)SD_UTIL.sendUserKeyEvent("enableOutlineGraphics","article","leftPane",SDM.pm.contentFamily);else SD_UTIL.sendUserKeyEvent("disableOutlineGraphics",
"article","leftPane",SDM.pm.contentFamily);$(window).scrollTop($(window).scrollTop()-1)});oObj.scroll();oObj.children().not("#srcOutline").outerWidth(pgLayout.lcWidth-$.scrollBarWidth());Outline.setScroll()},setScroll:function(){$(Outline.oObj).on("mousewheel DOMMouseScroll",function(e){var scrollTo=null;if(e.type=="mousewheel")scrollTo=e.originalEvent.wheelDelta*-1;else if(e.type=="DOMMouseScroll")scrollTo=40*e.originalEvent.detail;if(scrollTo)if(!($(this).height()>=$(this)[0].scrollHeight)){e.preventDefault();
$(this).scrollTop(scrollTo+$(this).scrollTop())}})},itemAction:function(){SD_UTIL.sendUserKeyEvent("displayTOCSection","article","leftPane",'" + SDM.pm.contentFamily + "')},addItemMMC:function(hashId,lbl,ext,hStr,parentElm,open,alttext){var ecn="olIconMMCDef";if(ext=="pdf")extCls="olIconMMCPdf";else if(ext=="avi")ecn="olIconMMCMov";else if(ext=="csv")ecn="olIconMMCCsv";else if(ext=="eps")ecn="olIconMMCEps";else if(ext=="flv")ecn="olIconMMCFlv";else if(ext=="gif")ecn="olIconMMCImg";else if(ext=="jpg")ecn=
"olIconMMCJpg";else if(ext=="kmz")ecn="olIconMMCDef";else if(ext=="mml")ecn="olIconMMCDef";else if(ext=="xls")ecn="olIconMMCExcel";else if(ext=="ppt")ecn="olIconMMCPpt";else if(ext=="doc")ecn="olIconMMCWord";else if(ext=="mp3")ecn="olIconMMCAud";else if(ext=="mpg")ecn="olIconMMCMov";else if(ext=="mp4")ecn="olIconMMCMpg4";else if(ext=="txt")ecn="olIconMMCTxt";else if(ext=="png")ecn="olIconMMCPng";else if(ext=="mov")ecn="olIconMMCMov";else if(ext=="rtf")ecn="olIconMMCRtf";else if(ext=="svg")ecn="olIconMMCSvg";
else if(ext=="tar")ecn="olIconMMCDef";else if(ext=="tif")ecn="olIconMMCDef";else if(ext=="zip")ecn="olIconMMCZip";else ecn="olIconMMCDef";var html;if(alttext==undefined)alttext="";if(SDM.pageType=="article_full"||open=="Y"&&!SDM.pf.forceAbst){if(open=="Y")lbl="Open Data: "+lbl;html="<li><div id='ol_"+hashId+"' class='tocLink io item mmc' data-parent='"+parentElm+"'>"+'<a class="tocLink olIcon S_C_tocLink'+ecn+"\" title='"+alttext+"' alt='"+alttext+"' href='#"+hashId+"' onClick=\"SD_UTIL.sendUserKeyEvent('displayTOCSection', 'article', 'leftPane', '"+
SDM.pm.contentFamily+'\'); "> <div class="olIcon '+ecn+'"></div>'+lbl+"</a></div></li>"}else if(SDM.pageType=="article_abs"){if(open=="Y")lbl="Open Data: "+lbl;html="<li><div id='ol_"+hashId+"' class='io item mmc' data-parent='"+parentElm+"'>"+'<a class="tocLink olIcon S_C_tocLink'+ecn+"  cLink\"  title='"+alttext+"' alt='"+alttext+"' queryStr='"+SDM.pf.toc.urlTOCLinkQueryStr+"' href='"+SDM.pf.toc.urlTOCLink+"'> <div class=\"olIcon "+ecn+'"></div>'+lbl+"</a></div></li>"}return html},addItemTbl:function(hashId,
lbl,hStr,parentElm,alttext){var html;if(alttext==undefined)alttext="";if(SDM.pageType=="article_full")html="<li><div id='ol_"+hashId+"' class='io item tbl' data-parent='"+parentElm+"'>"+'<a class="tocLink olIcon olIconTbl S_C_tocLinkTbl" title=\''+alttext+"' alt='"+alttext+"' href='#"+hashId+"' onClick=\"SD_UTIL.sendUserKeyEvent('displayTOCSection', 'article', 'leftPane', '"+SDM.pm.contentFamily+'\'); "><div class="olIcon olIconTbl"></div>'+lbl+"</a></div></li>";else if(SDM.pageType=="article_abs")html=
"<li><div id='ol_"+hashId+"' class='io item tbl' data-parent='"+parentElm+"'>"+'<a class="olIcon olIconTbl cLink S_C_tocLinkTbl" title=\''+alttext+"' alt='"+alttext+"'  queryStr='"+SDM.pf.toc.urlTOCLinkQueryStr+"' href='"+SDM.pf.toc.urlTOCLink+'\'><div class="olIcon olIconTbl"></div>'+lbl+"</a></div></li>";return html},addItemFig:function(hashId,lbl,img,hStr,thumbHeight,parentElm,alttext){var html;if(alttext==undefined)alttext="";if(SDM.pageType=="article_full"){html="<li><div id='ol_"+hashId+"' class='io item fig' data-parent='"+
parentElm+"'>"+"<a class='tocLink S_C_tocLinkFig' href='#"+hashId+"' onClick=\"SD_UTIL.sendUserKeyEvent('displayTOCSection','article','leftPane', '"+SDM.pm.contentFamily+"');\">";html+='<img src="/sd/grey_pxl.gif"  class="smlImgLazyJSB greyImg" title=\''+alttext+"' alt='"+alttext+"' data-smlsrc='"+img+"' data-thumbheight='"+thumbHeight+"'/></a></div></li>"}else if(SDM.pageType=="article_abs")html="<li><div id='ol_"+hashId+"' class='io item fig' data-parent='"+parentElm+"'>"+'<a class="olIcon olIconFig  cLink S_C_tocLinkFig"  queryStr=\''+
SDM.pf.toc.urlTOCLinkQueryStr+"' href='"+SDM.pf.toc.urlTOCLink+"'>"+'<img src="/sd/grey_pxl.gif"  class="smlImgLazyJSB greyImg" title=\''+alttext+"' alt='"+alttext+"' data-smlsrc='"+img+"' data-thumbheight='"+thumbHeight+"'/>"+"</a></div></li>";return html},addItemSection:function(hashId,lbl,hStr){var html="<li class='li_"+hStr+"'><div id='ol_"+hashId+"' class='io item "+hStr+"sec'>"+"<a class='tocLink S_C_tocLinkSec'href='#"+hashId+"' onClick=\"SD_UTIL.sendUserKeyEvent('displayTOCSection', 'article', 'leftPane', '"+
SDM.pm.contentFamily+"');\">"+lbl+"<br>"+"</a></div></li>";return html},addItemOutline:function(hashId,lbl,hStr){var html="<li class='li_"+hStr+"'><div id='ol_"+hashId+"' class='io item "+hStr+"sec'>"+"<a class='cLink S_C_tocLinkOutline' queryStr='"+SDM.pf.toc.urlTOCLinkQueryStr+"&_hashID="+hashId+"' href='"+SDM.pf.toc.urlTOCLink+"'>"+lbl+"<br>"+"</a></div></li>";return html},sidebarClick:function(e){exportPopupClose(e);e.preventDefault();e.stopPropagation();Outline.toggleOutlinePopup();SD_UTIL.sendUserKeyEvent("openLeftPane",
"article","leftPane",SDM.pm.contentFamily);return false},toggleOutlinePopup:function(e){if($("#outlineContainer").is(":visible")){$("#outlineContainer").removeClass("on").css({"top":0});$("#leftButton .outline-toggle").attr("title","Open to view article outline");$("#leftButton .outline-toggle").attr("alt","Open to view article outline");$("#leftButton .outline-toggle").attr("aria-expanded","false")}else if(!e){$("#outlineContainer").addClass("on");$("#leftButton .outline-toggle").attr("title","Close the article outline");
$("#leftButton .outline-toggle").attr("alt","Close the article outline");$("#leftButton .outline-toggle").attr("aria-expanded","true");if($("#searchWithin").is(":visible"))$("#outline.book").css("top",20+$("#searchWithin").outerHeight())}},collapseSmallLeft:function(){},expandSmallLeft:function(){},toggleGraphics:function(force){if(typeof force!=undefined)if(force=="hide")SDM.pf.toc.outlineGraphics=false;else if(force=="show")SDM.pf.toc.outlineGraphics=true;else;var $toc=$("#itemOutline","#outline");
if($("#outlineGraphicsCheckBox")[0])$toc.attr("aria-expanded",SDM.pf.toc.outlineGraphics).toggleClass("thumbnails",$("#outlineGraphicsCheckBox")[0].checked);$("#outlineGraphicsCheckBox").attr("aria-expanded",SDM.pf.toc.outlineGraphics)},hoverOverOn:function(){this.onHover=true;var ol=$("#outline");ol.doTheScrollJitter();ol.css("overflow-y","auto")},hoverOverOff:function(){this.onHover=false;var ol=$("#outline");ol.doTheScrollJitter();var st=ol.scrollTop();ol.css("overflow-y","hidden");if(!$("#srcOutline").is(":visible")&&
!SDM.pf.mrwmod.isModArticle)ol.css("overflow-x","hidden");ol.scrollTop(st)},moveToSection:function(e){var selID=$(e.target).closest("a").attr("href").split("#");selID=selID[1];$("html,body").moveTo(selID);Outline.toggleOutlinePopup(true);e.preventDefault();e.stopPropagation()},findTargetFragment:function(e){var selID=e;if(typeof e!="string"){var selID=$(e.target).closest("a").attr("href").split("#");selID=selID[1]}var id=selID;id=id.replace(/[\.]/g,"\\.");id=id.replace(/[\:]/g,"\\:");var obj=$("#"+
id);var targetFrag=Fragment.getIntraRefFragId(selID);var targetFragNum=0;if(targetFrag)targetFragNum=targetFrag.substr(targetFrag.indexOf("_")+1)*1;if(!$(obj)[0]){if(Fragment.crossRefMap)Fragment.loadTarget(selID,{preBuffer:2,postBuffer:2,f:function(){Outline.findTargetFragment(e)}})}else{var testObj=$("#frag_"+(targetFragNum-1));if($(obj)[0]&&(!$(testObj)[0]&&Fragment.crossRefMap))Fragment.loadTarget(selID,{preBuffer:2,postBuffer:2,f:function(){}});testObj=$("#frag_"+(targetFragNum+1));if(!$(testObj)[0])Fragment.get("frag_"+
(targetFragNum+1),e.data.z);var $fragSet=$("#centerInner .page_fragment").filter(function(i){return MoreInformation.hideFrag($(this))});$fragSet.show();Fragment.scrollFlag=false;if(!$("#"+selID).closest(".auth_frag").is(":visible")&&$("#showMoreButtons .moreLink").is(":visible"))MoreInformation.showMoreInfo();$("html, body").moveTo(selID,{cbFunc:function(){if(SDM.pf.reqAllFrags)Fragment.scrollFlag=true;else setTimeout(function(){Fragment.scrollFlag=true},1E3)}})}if(typeof e!="string"){exportPopupClose(e);
e.preventDefault();e.stopPropagation()}Outline.toggleOutlinePopup(true)},getJson:function(){var url=SDM.ep.urlPrefix+"/toc/"+SDM.pm.pii;if(Fragment.isAvail())url+="/"+SDM.pf.frag.fat;$.get(url,function(jsonStr,b,c){if(c.status=="200")SDM.tocJson=String(jsonStr);else;},"text").error(function(){DBG.out(1,"Returned Error")})},showLeftAd:function(){if(SDM.adPreventOutline==true)return;if(SDM.pf.ads.leftUrl)$("#articleLeftAd").append('<iframe scrolling="no" frameborder="0" border="0" cellspacing="0" src="'+
SDM.pf.ads.leftUrl+'"></iframe>')}};var EbookTOC={eBookTOCTimeout:1E3,currentLink:null,tocObj:null,init:function(){var eBookTOCURL=$("div.publicationHead div.title a").attr("href").replace("book","bktoc");if(SDU.cookieAvail()&&SDU.sessionStorageAvail()){var tocStr=sessionStorage.getItem("bk.toc");if(tocStr){EbookTOC.tocObj=$.parseJSON(tocStr);if(EbookTOC.tocObj.eBookCID==SDM.pm.cid)DBG.out(1,"Found bk.toc using...");else{EbookTOC.tocObj=null;sessionStorage.removeItem("bk.toc");DBG.out(1,"Found different bk.toc removing...")}}}if(EbookTOC.tocObj==
null)$.getJSON(eBookTOCURL,function(res){if(res)if(SDU.cookieAvail()&&(SDU.sessionStorageAvail()&&typeof JSON!="undefined")){sessionStorage.setItem("bk.toc",JSON.stringify(res));DBG.out(1,"Storing bk.toc")}if(!$("#lpTabs")[0])EbookTOC.load(res)});else if(!$("#lpTabs")[0])EbookTOC.load(EbookTOC.tocObj);$("#leftPane #srcOutline li div.so a").addEllipsis()},load:function(res){var $bookToc=EbookTOC.buildToc(res);$("#outlineContainer").prepend('<ul id="lpTabs">'+'<li class="leftTab tab" tabindex="0">Book contents</li>'+
'<li class="rightTab tab" tabindex="0">Chapter contents</li>'+"</ul>");$("#lpTabs .leftTab").click(function(){if($("#srcOutline").css("display")!="none")return;EbookTOC.showSourceTab(this);SD_UTIL.sendUserKeyEvent("sourceTabSelected","article","leftPane",SDM.pm.contentFamily)});$("#lpTabs .rightTab").click(function(){if($("#srcOutline").css("display")=="none")return;EbookTOC.showItemTab(this);SD_UTIL.sendUserKeyEvent("itemTabSelected","article","leftPane",SDM.pm.contentFamily)});$("#outline").prepend($bookToc);
$("#outline, #leftPane, #outlineContainer").addClass("book");EbookTOC.showPath2Item(SDM.pm.pii);$(".activeChapter >a").attr("href","");if(SDM.pf.toc.outlineTab=="I")EbookTOC.showItemTab($("#lpTabs .rightTab")[0]);else{EbookTOC.showSourceTab($("#lpTabs .leftTab")[0]);$("#outline").scrollToTopic({selTopic:"div.activeChapter"})}$(".leftPaneToggle").unbind("click").bind("click",function(e){exportPopupClose(e);e.preventDefault();e.stopPropagation();EbookTOC.nodeClick($(this)[0])})},showSourceTab:function(e){$(e).parent().children(".tab").removeClass("activeTab");
$(e).addClass("activeTab");$(".outlineMsg").hide();$("#srcOutline").show();$("#itemOutline").css("background","");$("#searchWithin").show();$("#olGraphCbBox,#fig").hide();Outline.toggleGraphics("hide");$("#outline").css("top",27+$("#searchWithin").outerHeight());if($("#outline").scrollTop()<=0)$("#outline").scrollToTopic({selTopic:"div.activeChapter"})},showItemTab:function(e){$(e).parent().children(".tab").removeClass("activeTab");$(e).addClass("activeTab");$("#searchWithin .errorMsg").remove();
$(".outlineMsg").show();$("#srcOutline").hide();$("#searchWithin").hide();$("#olGraphCbBox,#fig").show();if($("#outlineGraphicsCheckBox").prop("checked")==true)Outline.toggleGraphics("show");$("#outline").scrollTop(0);$("#outline").css("top","27px")},buildToc:function(res){$("body").append('<ul id="srcOutline"></ul>');for(var i in res.eBookTOC)$("#srcOutline").append(EbookTOC.buildTocNode(res.eBookTOC[i],1));return $("#srcOutline")},buildTocNode:function(nr,lvl){var classStr="so item "+nr.NodeType;
var spClass="arrowSide";if(nr.NodeList)classStr+=" parent ";if(nr.PII==SDM.pm.pii){classStr+=" activeChapter ";spClass="arrowDown"}if(lvl>3)lvl=3;var $node;if(nr.PII){$node=$('<li data-pii="'+nr.PII+'" class="srcli lvl'+lvl+'"></li>');if(nr.PII==SDM.pm.pii)$node.append('<div class="'+classStr+'"><div class="'+"srcPartStatic"+'"></div><span title="'+nr.Title+'">'+nr.Title+"</span></div>");else $node.append('<div class="'+classStr+'"><div class="'+"srcPartStatic"+'"></div><a class="cLink" querystr="?&zone=leftPane&_origin=article&originContentFamily=nonserial" href="'+
SDM.ep.urlPrefix+"/article/pii/"+nr.PII+'" title="'+nr.Title+'">'+nr.Title+"</a></div>")}else if(nr.NodeList&&nr.NodeList.length){$node=$('<li data-pii="" class="srcli lvl'+lvl+'"></li>');$node.append('<div class="'+classStr+'"><div class="arrowSide leftPaneToggle">&nbsp;</div><a class = "leftPaneToggle" href="" '+'" title="'+nr.Title+'">'+nr.Title+"</a></div>");var $ul=$("<ul></ul>");for(var i in nr.NodeList)$ul.append(EbookTOC.buildTocNode(nr.NodeList[i],lvl+1));$node.append($ul);$ul.hide()}return $node},
nodeClick:function(e){if($(e).parent().parent().children("ul").css("display")=="none"){$(e).parent().parent().children("ul").show();$(e).parent().children("div").addClass("arrowDown").removeClass("arrowSide")}else{$(e).parent().parent().children("ul").hide();$(e).parent().children("div").removeClass("arrowDown").addClass("arrowSide")}},showPath2Item:function(pii){$("#srcOutline li").each(function(){if($(this).attr("data-pii")==pii){$(this).children("div").removeClass("so").addClass("socip");$(this).parentsUntil("#srcOutline").filter("li").each(function(){$(this).removeClass("srcli");
EbookTOC.nodeClick($(this).children("div").children("a")[0]);$(this).children("div").removeClass("so").addClass("socip")})}})},getPath2Item:function(pii){var rslt;$("#srcOutline li").each(function(){if($(this).attr("data-pii")==pii)rslt=$(this).parentsUntil("#srcOutline").children("div")});return rslt}};var pdfCite={suggestedArtDisplayed:false,pdfWin:"",openPDF:function(url,event){var newWidth=$(window).width()*0.9;var newHeight=$(window).height()*0.9;if(SDU.isIE()){pdfWin=window.open("","_blank","width="+newWidth+",height="+newHeight+",location=yes,scrollbars=yes,resizable=no,directories=no,toolbar=yes,menubar=yes,status=yes,left=50,top=50");pdfWin.location.href(url)}else pdfWin=window.open(url,"_blank","width="+newWidth+",height="+newHeight+",location=yes,scrollbars=yes,resizable=no,directories=no,toolbar=yes,menubar=yes,status=yes,left=50,top=50");
pdfWin.focus();pdfCite.popupTabwrap()},closePopup:function(){doc.getById("displayPdfKing").style.display="block";doc.getById("pdfKingMessage").style.display="none";doc.getById("suggestedPdfList").style.display="none";doc.getById("pdfModalWindow").style.display="none";$("#pdfLink").focus()},popupTabwrap:function(){var obj=$("#pdfModalWindowMsgBox");obj.find("a:last").keydown(function(e){if(e.keyCode==9&&!e.shiftKey){e.preventDefault();$(obj).find("a:first").focus()}});obj.find("a:first").keydown(function(e){if(e.keyCode==
9&&e.shiftKey){e.preventDefault();$(obj).find("a:last").focus()}});obj.find(".close").focus()},setOptOutFlag:function(url){try{$.post(url)}catch(e){}pdfCite.closePopup()},alignSuggestedArticleBox:function(){var x=0,y=1;var msgBox=$("#pdfModalWindowMsgBox");var winWidth=$(window).width();var winHeight=$(window).height();var top=(winHeight-msgBox.outerHeight())/2;var left=(winWidth-msgBox.outerWidth())/2;msgBox.css("top",top+"px");msgBox.css("left",left+"px");if(!SDU.isIE())$(window).unbind("focus").bind("focus",
function(){$("#modalBoxDisplay").focus();$("#modalBoxDisplay .close a").focus();$(window).unbind("focus")})},showDetails:function(pii,absUrl){var toHide="trunc_"+pii;var toShow="citation_"+pii;var absId="abs_"+pii;$("li.pdfAbs").hide();$("li.citationDetails").hide();$("li.wrapperLi").show();doc.getById(toHide).style.display="none";doc.getById(toShow).style.display="block";var obj=doc.getById(absId);if(obj.length<1)return;if(obj.innerHTML=="")var ajaxReq=$.get(absUrl,function(response){if(response){obj.style.display=
"block";obj.innerHTML=response;pdfCite.alignSuggestedArticleBox()}});else{obj.style.display="block";pdfCite.alignSuggestedArticleBox()}},hideElementsByClassName:function(className,tag){var all=getElementsByClassName(document,tag,className);for(var k=0;k<all.length;k++)all[k].style.display="none"},showElementsByClassName:function(className,tag,startIndex){var all=getElementsByClassName(document,tag,className);var idx=0;if(startIndex!=null)idx=1;for(var k=idx;k<all.length;k++)all[k].style.display="inline"},
suggestedArt:function(url){var ajaxReq=$.get(url,function(response){response=$.trim(response);if(response&&response.length>0){pdfCite.buildSuggestedArticleList(response,"relatedArtList");$("#pdfkingTab").addClass("active");$("#pdfkingTab").show();$("#pdfciteContent").hide();$("#pdfciteTab").removeClass("active");$("#suggestedPdfList").css("display","block");$("#pdfkingContent").show();$("#pdfModalWindow").css("display","block");if(!SDU.isIE()){$("#modalBoxDisplay").focus();$("#modalBoxDisplay .newCloseBtn a").focus()}pdfCite.alignSuggestedArticleBox();
$('#pdfkingContent input[type="checkbox"]').prop("checked",true);$("#SuggestedArtList input.pdf_selectAll").prop("checked",true);$("#SuggestedArtList input.pdf_selectAll").css("opacity","1");$('#SuggestedArtList input[name="art"]').off("click").on("click",function(e){checkBoxLength=$("input[name=art].checkBox:checked:visible").length;if(checkBoxLength==0){$("#SuggestedArtList input.pdf_selectAll").prop("checked",false);$("#SuggestedArtList input.pdf_selectAll").css("opacity","1");$("#SuggestedArtList input.iconBg").prop("value",
"Download All PDFs")}else{$("#SuggestedArtList input.pdf_selectAll").prop("checked",true);if(checkBoxLength<3)$("#SuggestedArtList input.pdf_selectAll").css("opacity","0.5");else $("#SuggestedArtList input.pdf_selectAll").css("opacity","1");if(checkBoxLength==1)$("#SuggestedArtList input.iconBg").prop("value","Download 1 PDF");else $("#SuggestedArtList input.iconBg").prop("value","Download "+checkBoxLength+" PDFs")}})}})},citingArt:function(url){var helpURL=SDM.helpUrlDomain+"/sdhelp_CSH.htm#citing_art_lrn_more.htm";
if(pdfCite.citedArtDisplayed)return;var ajaxReq=$.get(url,function(response){pdfCite.citedArtDisplayed=true;response=$.trim(response);if(response&&response.length>0){pdfCite.buildSuggestedArticleList(response,"citingArtList");$("#pdfciteTab").show();if(!pdfCite.suggestedArtDisplayed){$("#suggestedPdfList").css("display","block");$("#pdfModalWindow").css("display","block");$("#pdfciteContent").show();$("#pdfciteTab").addClass("active");pdfCite.alignSuggestedArticleBox()}}else{$("#citingArtList").html("<div class='msgBox4'><div class='infoIcon_yellow2'>&nbsp;</div>There are no articles that cite the article you downloaded.&nbsp;<a class = 'learn-more' href = '#' onclick='openNS(\""+
helpURL+"\");'>Learn more <div class='learn-more-img'>&nbsp;</div></a></div> ");$("#pdfciteTab").show()}}).error(function(){$("#citingArtList").html("<div class='msgBox4'><div class='infoIcon_yellow2'>&nbsp;</div>There are no articles that cite the article you downloaded.&nbsp;<a class = 'learn-more' href = '#' onclick='openNS(\""+helpURL+"\");'>Learn more <div class='learn-more-img'>&nbsp;</div></a></div>")})},toggleSuggestedTabs:function(showTab,hideTab,elem){if(showTab=="#pdfcite"&&pdfCite.citedArtURL!=
null)pdfCite.citingArt(pdfCite.citedArtURL);$(elem).parent().addClass("active");$(showTab+"Content").css("display","block");$(hideTab+"Content").css("display","none");$(hideTab+"Tab").removeClass("active")},buildSuggestedArticleList:function(jsonStr,jsonObj){var helpURL=SDM.helpUrlDomain+"/sdhelp_CSH.htm#citing_art_lrn_more.htm";var obj=jQuery.parseJSON(jsonStr);var enableEntitlement=$("#"+jsonObj).attr("data-entitled");if(jsonObj=="citingArtList")if(obj.ERR_TYPE=="0")$("#citingArtList").html("<div class='msgBox4'><div class='infoIcon_yellow2'>&nbsp;</div>There are no articles that cite the article you downloaded.&nbsp;<a class = 'learn-more' href = '#' onclick='openNS(\""+
helpURL+"\");'>Learn more <div class='learn-more-img'>&nbsp;</div></a></div>");else if(obj.ERR_TYPE=="3")$("#citingArtList").html("<div class='msgBox1'><div class='msgBox3'>The citing articles could not be retrieved at this time.</div><div class='msgBox2'>Click the link below to view the citing articles in Scopus.</div></div>");var artList="";var htmlStr="";var msgHtml="";var jsonQStr="";var qStr="";var articleTitleId="";var articleCount=0;if(obj!=null){if(jsonObj=="relatedArtList"&&obj.citation.length)pdfCite.suggestedArtDisplayed=
false;$.each(obj.citation,function(i,item){if(item.ARTTITLELABEL&&item.ARTTITLELABEL!="")item.ARTTITLE=item.ARTTITLELABEL+" - "+item.ARTTITLE;var noPDF=obj.NO_PDF_LINK&&obj.NO_PDF_LINK=="Y"?"Y":"N";var showMoreUrl=SDM.ep.urlPrefix+"/more/"+item.PII+"/"+obj.TYPE;artList+='<ol class="artList">';artList+='<li class="selection"><input class="checkBox" type="checkbox" name="art" value="'+item.SDEID+'" aria-labelledby="title_'+item.PII+'"></li>';artList+='<li class="';if(item.OASTATUS=="1"||item.OPENARCHIVESTATUS==
"1")artList+="artTitleOA";else if(enableEntitlement=="Y"&&(obj.ERR_TYPE!="2"&&noPDF!="Y"))artList+="artTitle";else artList+="artTitleNonSub";if(jsonObj=="citingArtList"){jsonQStr=obj.QUERYSTRING;qStr=jsonQStr.replace("_fmt=high","_fmt="+obj.FORMAT_TAG);articleTitleId="pdfciteArtTitle"+i}else{qStr=obj.QUERYSTRING;articleTitleId="pdfkingArtTitle"+i}artList+='"><a id ="title_'+item.PII+'" class="cLink" target="_blank" querystr="'+qStr+'" href="'+item.ARTURL+'" >'+item.ARTTITLE+"</a></li>"+'<li class="artDetails">';
if(item.OPENARCHIVESTATUS=="1"){artList+='<span class="accessType">Open Archive';if(item.LBL&&item.LBL!="undefined")artList+=', </span><span class="artlabel">'+item.LBL+"</span></li>"}else if(item.OASTATUS&&item.OASTATUS!="0"){artList+='<span class="accessType">Open Access';if(item.LBL&&item.LBL!="undefined")artList+=', </span><span class="artlabel">'+item.LBL+"</span></li>"}else if(item.LBL&&item.LBL!="undefined")artList+='<span class="artlabel">'+item.LBL+"</span></li>";artList+='<li class="source">';
artList+=getCombinedSrcTitle(item);if(item.VOLISS)artList+=", "+item.VOLISS;if(item.PUBDT)artList+=", "+item.PUBDT;if(item.ARTNUM)artList+=", "+item.ARTNUM;else if(item.PG)artList+=", "+item.PG;if(item.CURRENTASOF)artList+=", "+item.CURRENTASOF;if(item.AUTHORS)artList+='</li><li class="authors">'+item.AUTHORS+"</li>";if(enableEntitlement=="Y"&&(obj.ERR_TYPE!="2"&&noPDF!="Y")){var pdfURL=item.PDFURL;artList+='<li class="pdfListItem">'+"<a ";if(item.PDF_NOFOLLOW=="true")artList+='rel="nofollow" ';artList+=
'class="cLink" aria-describedby="title_'+item.PII+'" title="Download PDF" href="'+pdfURL+'"';if(item.PDFURL)artList+=' queryStr="'+obj.QUERYSTRING+'"';artList+=' target="_blank"><span class="pdf">&nbsp;</span>Download PDF</a></li>'}artList+='<ol><li class="abs"></li></ol></li></ol>';articleCount++});var downloadPdfCount="Download All PDFs";if(articleCount>0)downloadPdfCount="Download "+articleCount+" PDFs";$("#SuggestedArtList input.iconBg").prop("value",downloadPdfCount);if(jsonObj=="citingArtList"){artList+=
'<a target="_blank" class = "view-more" href="'+obj.VIEW_MORE_URL+'" >View ';if(obj.ERR_TYPE=="2"||obj.ERR_TYPE=="3")artList+="details of all citing articles in Scopus.</a>";else{artList+="more citing articles";artList+="</a>"}if(obj.ERR_TYPE=="0")msgHtml="<div class='msgBox4'><div class='infoIcon_yellow2'>&nbsp;</div>There are no articles that cite the article you downloaded.&nbsp;<a class = 'learn-more' href = '#' onclick='openNS(\""+helpURL+"\");'>Learn more <div class='learn-more-img'>&nbsp;</div></a></div> ";
else if(obj.ERR_TYPE=="3")msgHtml="<div class='msgBox1'><div class='msgBox3'>The citing articles could not be retrieved at this time.</div><div class='msgBox2'>Click the link below to view the citing articles in Scopus.</div></div>";else msgHtml="<div class = 'related-articles-msg'><span>These articles cite the article you downloaded.</span><a class = 'learn-more' href = '#' onclick='openNS(\""+helpURL+"\");'>Learn more <div class='learn-more-img'>&nbsp;</div></a></div>";$("#citingArticlesMsg").html(msgHtml)}htmlStr=
artList;$("#"+jsonObj).html(htmlStr);if(SDU.cookieAvail())$("li.pdfDownloader").css("display","inline-block")}$(".toggleMoreInfo").bind("click",pdfCite.toggleShowAbs);$(document).keyup(function(e){if(e.keyCode==27)pdfCite.closePopup()});if(jsonObj=="relatedArtList")pdfCite.suggestedArtDisplayed=true},toggleShowAbs:function(e){var obj=$(e.currentTarget);var parentObj=$(obj).parents("ol");var abs=$(parentObj).find("li.abs");var moreInfo=$(parentObj).find("span.moreInfo");$("#relatedArtList span.moreInfo, #citingArtList span.moreInfo").each(function(){if($(this).hasClass("hidden"))$(this).css("display",
"none");else $(this).css("display","inline-block")});moreInfo.css("display","inline-block");$(obj).parents("span.moreInfo").css("display","none");var showMoreUrl=$(obj).attr("data-url");if(showMoreUrl){$("ol li.abs").hide();$.get(showMoreUrl,function(response){if(response&&response.length>1){var jsonResp=JSON.parse(response);$(abs).html("<h2>Abstract</h2>"+decodeURIComponent(jsonResp.ABSTRACT));$(abs).show()}else{$(abs).html("No abstract is available for this article.");$(abs).show()}})}else $(abs).hide();
return false},getScrollXY:function(){var x=0,y=1;var pos=new Array(2);var scrOfX=0,scrOfY=0;if(typeof window.pageYOffset=="number"){scrOfY=window.pageYOffset;scrOfX=window.pageXOffset}else if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){scrOfY=document.body.scrollTop;scrOfX=document.body.scrollLeft}else if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){scrOfY=document.documentElement.scrollTop;scrOfX=document.documentElement.scrollLeft}pos[x]=
scrOfX;pos[y]=scrOfY;return pos}};$("#pdfKingcloseBtn").click(function(e){pdfCite.closePopup();e.preventDefault()});var rightSidePane={citedType:false,sendRightPaneKeyEvents:function(a,o,z){$.get(SDM.ep.userActionURL+"/"+o+"/"+z+"/"+a)},initAccordion:function(){rightSidePane.getRelatedCitingPanel();var rightAdState=Cookie.get("ad_right");if(!rightAdState)rightSidePane.showRightAd($("#rightInner .innerPadding"));if(SDM.pf.aetEnabled==true){var metricsURL=SDM.ep.urlPrefix+"/metrics/"+SDM.pm.hubEid+"/"+SDM.pm.cid+"/"+SDM.pm.pii;$.get(metricsURL,function(response){if(response.length>1);})}},sendUserKeyEvents:function(a,
o,z,ocf,p){$.get(SDM.ep.userActionURL+"/"+o+"/"+z+"/"+ocf+"/"+a+"/"+p)},getRelatedCitingPanel:function(obj){rightSidePane.sendUserKeyEvents("displayRightPanePanel","article","rightPane",SDM.pm.contentFamily,"citeRelatedArt");if(pgLayout.relatedCitingPanelDisplayed)return;if(SDM.pm.isSpecialIssue&&SDM.pm.hubEid){var specIssURL=SDM.ep.urlPrefix+"/spliss/rslts/"+SDM.pm.hubEid+"/"+SDM.pm.pii;var getArticleList=function(res){if(res!=""&&res.HITCOUNT>0){if($("#SD_BIB")[0])$("#rightInner .innerPadding #SD_BIB").after('<div id="special_articles" class="entry separator related closed"><h2><a href="#articles" class="toggle" aria-controls="relArtList" aria-expanded="false"><span class="iconArrow">&nbsp;</span>This article belongs to a special issue</a></h2><ol id="specIssueList"></ol></div>');
else $("#rightInner .innerPadding").prepend('<div id="special_articles" class="entry separator related closed"><h2><a href="#articles" class="toggle" aria-controls="relArtList" aria-expanded="false"><span class="iconArrow">&nbsp;</span>This article belongs to a special issue</a></h2><ol id="specIssueList"></ol></div>');$("#special_articles").addClass("rendered firstBlk").removeClass("closed");rightSidePane.buildArticleList(res,"specIssueList",true);$("#special_articles").after("<script>prs.rt('scr_special_art')\x3c/script>")}else $("#recommend_related_articles").addClass("firstBlk")};
$.getJSON(specIssURL,getArticleList).fail(function(){$("#recommend_related_articles").addClass("firstBlk");$(".related:visible .toggle:first").trigger("click").closest(".entry").addClass("firstBlk")})}$("#rightPane").off("click.related").on("click.related",".related .toggle",function(e){var expanded="true"==$(this).attr("aria-expanded")?"false":"true";var artContainer=$(e.currentTarget).closest(".entry").toggleClass("closed","true"!=expanded);var artType=artContainer.attr("id");$(this).attr("aria-expanded",
expanded);if(expanded=="true"&&!artContainer.hasClass("rendered")){if(artType=="ref_mod_articles"&&SDM.pf.mrwmod.isModArticle){var refCounter=0;var trd=SDM.pf.toc.retryDelay;var refCheck=function(){$("#mrwTopicTitle").parent().hide();clearInterval(refIntrvl);var conceptID,activeNode;if($(".taxonomy .activeNode")[0]){conceptID=$($(".taxonomy .activeNode")[0]).attr("href");activeNode=$($(".taxonomy .activeNode")[0])}else{conceptID=$($(".taxonomy .selected")[0]).attr("href");activeNode=$($(".taxonomy .selected")[0])}if(typeof conceptID!=
"undefined"||refCounter>10)if(typeof conceptID!="undefined"){conceptID=conceptID.substring(conceptID.indexOf("Concept-"),conceptID.indexOf("?"));$("#mrwTopicTitle a.toggle").html('Reference articles on "'+$(activeNode).text().replace(/^\s+|\s+$/g,"")+'"');var mrwRefArtURL=SDM.ep.urlPrefix+"/mlkt/isbn/"+SDM.pm.mod_ISBN+"/topic/"+conceptID+"/pii/"+SDM.pm.pii;var getArticleList=function(res){if(res.TYPE!=undefined&&(res.TYPE!=""&&res.citation.length>0)){rightSidePane.buildArticleList(res,"mrwRefArtList");
$("#mrwTopicTitle").parent().show()}else{$("#mrwTopicTitle").parent().hide();$(".related:visible .toggle:first").trigger("click").closest(".entry").addClass("firstBlk")}};$.getJSON(mrwRefArtURL,getArticleList);artContainer.addClass("rendered")}else{$("#mrwTopicTitle").parent().hide();$(".related:visible .toggle:first").trigger("click").closest(".entry").addClass("firstBlk")}else{refCounter++;refIntrvl=setInterval(refCheck,trd*SDM.pf.toc.retryFactor)}};var refIntrvl=setInterval(refCheck,trd)}if(artType==
"recommend_related_articles"&&SDM.pf.mlktAvail){var relatedArtURL=SDM.ep.urlPrefix+"/mlkt/rslts/"+SDM.pm.pii+"/Art";var getArticleList=function(res){if(res!=""&&res.HITCOUNT>0)rightSidePane.buildArticleList(res,"relArtList");else $("#relArtList .note").show()};$.getJSON(relatedArtURL,getArticleList).fail(function(){$("#relArtList .note").show()});artContainer.addClass("rendered");$("#recommend_related_articles").after("<script>prs.rt('scr_rec_art')\x3c/script>")}if(artType=="related_book_content"&&
SDM.pf.relatedBkAvail){var relatedBkURL=SDM.ep.urlPrefix+"/mlkt/rslts/"+SDM.pm.pii+"/BK";var getArticleList=function(res){if(res!=""&&res.HITCOUNT>0)rightSidePane.buildBookList(res,"relBkList");else $("#relBkList .note").show()};$.getJSON(relatedBkURL,getArticleList).fail(function(){$("#relBkList .note").show()});artContainer.addClass("rendered");$("#related_book_content").after("<script>prs.rt('scr_rel_con')\x3c/script>")}if(artType=="cited_by_articles"&&SDM.pf.citedByScAvail){rightSidePane.citedType=
true;var citedByURL=SDM.ep.urlPrefix+"/citedby/rslts/"+SDM.pm.pii;var getArticleList=function(res){if(res!=""&&res.HITCOUNT>0)rightSidePane.buildArticleList(res,"citedByList");else $("#citedByList .note").show()};$.getJSON(citedByURL,getArticleList).fail(function(){$("#citedByList .note").show()});artContainer.addClass("rendered");$("#cited_by_articles").after("<script>prs.rt('scr_cite_art')\x3c/script>")}}$("#rightOuter").css("height","");if(typeof ArticlePage!="undefined")ArticlePage.viewHandler();
e.stopPropagation();e.preventDefault()});if(!SDM.pm.isSpecialIssue)$(".related:visible .toggle:first").trigger("click").closest(".entry").addClass("firstBlk");pgLayout.relatedCitingPanelDisplayed=true},toggleMoreInfo:function(e){e.preventDefault();var obj=$(e.target);var showMoreUrl=$(obj).attr("data-url");var moreInfo=$(obj).closest("ol.articles").find("li.showMore");var entitlement=moreInfo.find("div#entitlement");var links=moreInfo.find("ul.links");if(entitlement.hasClass("checkEntitlement"))links.hide();
if(moreInfo.hasClass("hidden")){moreInfo.removeClass("hidden");if($(obj).hasClass("relatedPlus")){$(obj).addClass("relatedMinus").removeClass("relatedPlus");if($(obj).next().attr("data-fullText")!=undefined){$(obj).next().attr("data-truncatedText",$(obj).next().html());$(obj).next().html($(this).next().attr("data-fullText")).css("height","auto")}$(obj).closest("ol").find("li.srcTitle.truncated").hide()}else obj.text("less")}else{moreInfo.addClass("hidden");if($(e.target).hasClass("relatedMinus")){$(this).addClass("relatedPlus").removeClass("relatedMinus");
if($(this).next().attr("data-truncatedText")!=undefined)$(this).next().css("height","48px").html($(this).next().attr("data-truncatedText"));$(this).closest("ol").find("li.srcTitle.truncated").show()}else obj.text("more")}var abs=moreInfo.find("div.abs");if(showMoreUrl&&(abs.html()==""||entitlement.hasClass("checkEntitlement")))$.get(showMoreUrl,function(response){entitlement.removeClass("checkEntitlement");if(response.length>1){var json=$.parseJSON(response);if(json.ABSTRACT){var absStr='<h4>Abstract</h4><div class="absText">';
absStr+=decodeURIComponent(json.ABSTRACT);absStr+="</div>";abs.html(absStr);abs.show()}else if(abs.hasClass("relatedAbs"))abs.removeClass("relatedAbs");var pdfString=json.PDFSTRING;if(pdfString){if(pdfString!="PDF")moreInfo.find("a.pdfRightPaneLink").text(pdfString).attr("title","Purchase PDF");links.show()}else $(".relatedAbs").css("margin-top","0")}});if(typeof sqClick=="function"&&obj.parents("#relArtList").length)sqClick(obj,"mlktShowMore","122");$("#rightOuter").css("height","");ArticlePage.viewHandler();
return false},buildArticleList:function(res,targetId,isSpecialIssue){var artList="";var cacheType=res.TYPE;if(cacheType=="5")$("#rightPane span#hitcount").html(res.HITCOUNT);if(res){if(cacheType=="8")if(parseInt(res.ARTICLE_COUNT)>0&&$(res.citation).length>0){artList+='<h3 class="scopusInfo"><div><span class="bold">More documents by </span>';artList+='<a target="_blank" class="redirectUrl" href="'+unescape(res.AUTH_PROFILE_URL)+'" data-url="'+res.AUTH_PRO_DATA_URL+'">'+res.AUTHOR_NAME+'</a></div><div class="scopus">Provided by Scopus</div></h3>'}else return;
if(cacheType=="9"){var count=$(".titleEditors").length;var specIssueTitle=$(".specIssueTitle").text();var specIssueUrl=$(".publicationHead p.volIssue").find("a").attr("href");artList+='<li class="specIssTitle"><a class="cLink" queryStr="?&zone=rightPane&panel=biblioInfo" href="'+specIssueUrl+'">'+specIssueTitle+"</a>";for(var i=0;i<count;i++){var titleEditors=$(".titleEditors:eq("+i+")").text();artList+='<li class="editor">'+titleEditors+"</li>"}artList+="<li><h3>Other articles from this special issue</h3></li>"}if($(res.citation).length<
1){$("#"+targetId).closest(".entry").find(".note").show();return}$.each(res.citation,function(i,item){var key=item.PII?item.PII:item.SCEID;var showMoreUrl=SDM.ep.urlPrefix+"/more/"+key+"/"+cacheType;if(item.ARTTITLELABEL&&item.ARTTITLE)if(targetId!="mrwRefArtList"&&item.ARTTITLELABEL!="")item.ARTTITLE=item.ARTTITLELABEL+" - "+item.ARTTITLE;if(item.ISBNNORM)showMoreUrl+="/isbn/"+item.ISBNNORM;if(item.ISSNNORM)showMoreUrl+="/issn/"+item.ISSNNORM;var divContainer=$("<div>");divContainer.html(item.ARTTITLE);
var artTitle=divContainer.text();if(item.DATAURL!=undefined&&item.DATAURL.indexOf("_method=outwardLink")!=-1)artList+='<li><ol class="articles"><li class="artTitle"><a class="redirectUrl" target="_blank" title="'+artTitle+'" href="'+unescape(item.ARTURL)+'" data-url="'+item.DATAURL+'"';else artList+='<li><ol class="articles"><li class="artTitle"><a title="'+artTitle+'" href="'+item.ARTURL+'"';if(res.QUERYSTRING)if(cacheType=="5"&&item.PII=="")artList+=' class="redirectUrl" ';else artList+=' class="cLink S_C_artTitle" queryStr="'+
res.QUERYSTRING+'"';artList+=">"+item.ARTTITLE+"</a></li>";if(isSpecialIssue==true){artList+='<li class="authors">';artList+=item.AUTHORS?item.AUTHORS:'<span class="noAuthor"></span>'}else{artList+='<li class="srcTitle">'+item.PUBYR;if(item.PUBYR)artList+=", ";artList+=getCombinedSrcTitle(item)}artList+='<div class="moreInfo"><a data-url="'+showMoreUrl+'" class="toggleMoreInfo">more</a></div></li>';artList+='<li class="showMore hidden">'+'<div class="moreInfoContent">'+'<ol class="details">';if(item.AUTHORS)artList+=
"<li>"+item.AUTHORS+"</li>";artList+='<li class="title">'+item.ARTTITLE+"</li>";artList+='<li class="fullSrcTitle">';artList+=getCombinedSrcTitle(item);if(item.VOLISS)artList+=", "+item.VOLISS;else{if(item.VOL){if(item.VOL.indexOf("-")!=-1)artList+=", Volumes ";else artList+=", Volume ";artList+=item.VOL}if(item.ISS){if(item.ISS.indexOf("-")!=-1)artList+=", Issues ";else artList+=", Issue ";artList+=item.ISS}}if(item.PUBDT)artList+=", "+item.PUBDT;if(item.ARTNUM)artList+=", "+item.ARTNUM;else if(item.PG)artList+=
", "+item.PG;if(item.CURRENTASOF)artList+=", "+item.CURRENTASOF;artList+="</li>";if(item.LBL)artList+='<li class="docSubType">'+item.LBL+"</li>";artList+='<div class="abs"></div>';if(item.PDFURL){artList+='<ul class="links"><li class="clearfix pdf"><div class="icon_pdf"><a ';if(item.PDF_NOFOLLOW=="true")artList+='rel="nofollow" ';artList+='title="Download PDF"  target="_blank" class="cLink pdfRightPaneLink" href="';artList+=item.PDFURL+'"';if(item.PDFURL)artList+=' queryStr="'+res.QUERYSTRING+'"';
artList+="> PDF";if(item.PDFSIZE){artList+=" (";artList+=item.PDFSIZE;artList+=")"}artList+='</a><div id="entitlement" class="checkEntitlement" style="display:none"></div></div></li></ul>'}if(cacheType=="5"&&item.VIEW_RECORD_URL)artList+='<ul><li><a class="redirectUrl" target="_blank" href="'+unescape(item.VIEW_RECORD_URL)+'"  data-url="'+item.VIEW_RECORD_DATA_URL+'">View details in Scopus</a></li><ul>';if(item.PDFURL||item.VIEW_RECORD_URL)artList+="</ul>";artList+="</ol></div></li></ol></li>"});
var moreUrl="";if(cacheType=="9")moreUrl=$(".publicationHead p.volIssue").find("a").attr("href");else moreUrl=res.VIEW_MORE_URL;if(cacheType!="8")if(cacheType=="2"){if(moreUrl!=""&&parseInt(res.HITCOUNT)>=parseInt(res.MAX_ARTICLES_TO_DISPLAY)){artList+='<li><a href="'+unescape(moreUrl)+'" class="viewMoreArticles cLink"';if(cacheType=="5")artList+=' target="_blank"';if(cacheType=="9")artList+=' class="cLink" queryStr="?&zone=rightPane&panel=biblioInfo"';artList+=">View more articles &raquo;</a></li>"}}else{if(moreUrl!=
""&&parseInt(res.HITCOUNT)>parseInt(res.MAX_ARTICLES_TO_DISPLAY)){artList+='<li><a href="'+unescape(moreUrl)+'" class="viewMoreArticles cLink';if(cacheType=="5")artList+=' redirectUrl" target="_blank" data-url="'+res.VIEW_MORE_DATA_URL;if(cacheType=="9")artList+='" class="cLink" queryStr="?&zone=rightPane&panel=biblioInfo';artList+='">View more articles &raquo;</a></li>'}}else{if(parseInt(res.ARTICLE_COUNT)>3)artList+='<li class="scopusMoreLink"><a target="_blank" class="redirectUrl" href="'+unescape(res.AUTH_ARTICLE_COUNT_URL)+
'" data-url="'+res.AUTH_ART_CT_DATA_URL+'">View more documents authored by '+res.AUTHOR_NAME+"</a></li>";if(parseInt(res.CITEDBY_COUNT)>0)artList+='<li class="scopusMoreLink"><a target="_blank" class="redirectUrl" href="'+unescape(res.AUTH_CITEDBY_COUNT_URL)+'"  data-url="'+res.AUTH_CITE_DATA_URL+'">View more documents that cite '+res.AUTHOR_NAME+"</a></li>"}rightSidePane.citedType=false;$("#"+targetId).html(artList);$("#"+targetId).parent().show();$(".pdfRightPaneLink").click(function(e){var obj=
e.target;createStateCookie($(obj).attr("queryStr"),e);var nw=window.open($(obj).attr("href"),"newPdfRightPane","height="+$(window).height()*0.9+",width="+$(window).width()*0.9);e.preventDefault()});$(".toggleMoreInfo").unbind("click",rightSidePane.toggleMoreInfo).bind("click",rightSidePane.toggleMoreInfo);$("#rightPane li.srcTitle, #rightPane li.authors, #rightPane .artTitle a").addEllipsis();if(typeof ArticlePage!="undefined")ArticlePage.viewHandler()}},buildBookList:function(res,targetId){var artList=
"";var cacheType=res.TYPE;if(res){if($(res.citation).length<1){$("#"+targetId).closest(".entry").find(".note").show();return}$.each(res.citation,function(i,item){var key=item.PII;var showMoreUrl=SDM.ep.urlPrefix+"/more/"+key+"/"+cacheType;if(item.ISBNNORM)showMoreUrl+="/isbn/"+item.ISBNNORM;if(item.ISSNNORM)showMoreUrl+="/issn/"+item.ISSNNORM;var divContainer=$("<div>");divContainer.html(item.ARTTITLE);var artTitle=divContainer.text();artList+='<li><ol class="articles">';var articleTitle='<a class="cLink S_C_artTitle multiline" title="'+
artTitle+'" href="'+item.ARTURL+'"';if(res.QUERYSTRING)articleTitle+=' queryStr="'+res.QUERYSTRING+'"';articleTitle+=">"+item.ARTTITLE+"</a>";artList+='<li class="artTitle"><a class="relatedPlus toggleMoreInfo" href="#" tabindex="0" data-url="'+showMoreUrl+'" ></a>'+articleTitle+"</li>";artList+='<li class="srcTitle truncated">';var citationInfo="";citationInfo+='<div class="metaData"><div><p class="multiline">'+item.PUBYR;if(item.PUBYR)citationInfo+=", ";citationInfo+=getCombinedSrcTitle(item);if(item.VOLISS)citationInfo+=
", "+item.VOLISS;else{if(item.VOL){citationInfo+=", ";if(item.VOL.indexOf("-")!=-1)citationInfo+="Volumes ";else citationInfo+="Volume ";citationInfo+=item.VOL}if(item.ISS){if(item.ISS.indexOf("-")!=-1)citationInfo+=", Issues ";else citationInfo+=", Issue ";citationInfo+=item.ISS}}if(item.PG)citationInfo+=", "+item.PG;if(item.CURRENTASOF)citationInfo+=", "+item.CURRENTASOF;citationInfo+="</p></div></div>";artList+=citationInfo;artList+="</li>";artList+='<li class="showMore hidden">';artList+='<div class="moreInfoContent">'+
'<ol class="details">';artList+='<li class="srcTitle">';artList+=citationInfo;artList+="</li>";if(item.LBL)artList+='<li class="docSubType">'+item.LBL+"</li>";artList+='<li class="auth">'+item.AUTHORS+"</li>";if(item.PDFURL){artList+='<li><ul class="links"><li class="clearfix pdf"><div class="icon_pdf relatedPdf"><a ';if(item.PDF_NOFOLLOW=="true")artList+='rel="nofollow" ';artList+='title="Download PDF" target="_blank" class="cLink pdfRightPaneLink" href="';artList+=item.PDFURL+'"';if(item.PDFURL)artList+=
' queryStr="'+res.QUERYSTRING+'"';artList+="> PDF";if(item.PDFSIZE){artList+=" (";artList+=item.PDFSIZE;artList+=")"}artList+='</a><div id="entitlement" class="checkEntitlement" style="display:none"></div></div></li></ul><div class="abs relatedAbs"></div></li>'}if(item.PDFURL)artList+="</ul>";artList+="</ol></div></li></ol></li>"});var moreUrl="";moreUrl=res.VIEW_MORE_URL;if(moreUrl!=""&&parseInt(res.HITCOUNT)>parseInt(res.MAX_ARTICLES_TO_DISPLAY)){artList+='<li><a href="'+moreUrl+'" class="viewMoreArticles cLink"';
artList+=" >View more book content &raquo;</a></li>"}$("#"+targetId).html(artList);$("#"+targetId).parent().show();$(".pdfRightPaneLink").click(function(e){var obj=e.target;createStateCookie($(obj).attr("queryStr"),e);var nw=window.open($(obj).attr("href"),"newPdfRightPane","height="+$(window).height()*0.9+",width="+$(window).width()*0.9);e.preventDefault()});$(".toggleMoreInfo").unbind("click",rightSidePane.toggleMoreInfo).bind("click",rightSidePane.toggleMoreInfo);$("#relBkList li.srcTitle.truncated p.multiline").addEllipsis();
$("#rightPane #relBkList .artTitle a.cLink").addEllipsis();$(window).resize(function(){$("#relBkList li.srcTitle.truncated p.multiline").css("height","32px").addEllipsis();$("#rightPane #relBkList .artTitle a.cLink").css("height","48px").addEllipsis()});if(typeof ArticlePage!="undefined")ArticlePage.viewHandler()}},sendCrossRefKeyEvents:function(a,o,z,ocf){$.get(SDM.ep.userActionURL+"/"+o+"/"+z+"/"+ocf+"/"+a)},findTargetElement:function(e){var selID="";var selIdUnescaped="";var wsObj="";var isAuthorReq=
false;var className=$(e.target).closest("a").attr("class");if(className=="figureLink"){wsObj=$(e.target).closest("dl");selID=$(wsObj).attr("id");selIdUnescaped=selID;selID=selID.replace(/[\.]/g,"\\.").replace(/[\:]/g,"\\:")}else if(className.indexOf("authorName")!=-1||(className.indexOf("auth_aff")!=-1||className.indexOf("auth_corr")!=-1)){wsObj=$(e.target).closest("a");if(className.indexOf("authorName")!=-1)selID=$(wsObj).attr("id");else{selID=$(wsObj).attr("href").split("#");selID=selID[1]}selIdUnescaped=
selID;selID=selID.replace(/[\.]/g,"\\.").replace(/[\:]/g,"\\:");isAuthorReq=true}else{selID=$(e.target).closest("a").attr("href").split("#");selID=selID[1];selIdUnescaped=selID;selID=selID.replace(/[\.]/g,"\\.").replace(/[\:]/g,"\\:");wsObj=$("#"+selID);if(className.indexOf("intra_ref")!=-1)rightSidePane.sendCrossRefKeyEvents("displayCrossRefLink","article","centerPane",SDM.pm.contentFamily)}if(Fragment.isAvail())if(isAuthorReq){var affObj=$(wsObj).closest("li").find("a.auth_aff");var corrObj=$(wsObj).closest("li").find("a.auth_corr");
var vitaeObj=$(wsObj).closest("li").find("a.authorVitaeLink");if($(affObj)[0]&&!$($(affObj).attr("href"))[0]){var selID=$(affObj).attr("href").split("#");selID=selID=selID[1];if(Fragment.crossRefMap)Fragment.loadTarget(selID,{preBuffer:2,postBuffer:2,f:function(){rightSidePane.findTargetElement(e)}})}else if($(corrObj)[0]&&!$($(corrObj).attr("href"))[0]){var selID=$(corrObj).attr("href").split("#");selID=selID=selID[1];if(Fragment.crossRefMap)Fragment.loadTarget(selID,{preBuffer:2,postBuffer:2,f:function(){rightSidePane.findTargetElement(e)}})}else if($(vitaeObj)[0]&&
!$($(vitaeObj).attr("href"))[0]){var selID=$(vitaeObj).attr("href").split("#");selID=selID=selID[1];if(Fragment.crossRefMap)Fragment.loadTarget(selID,{preBuffer:2,postBuffer:2,f:function(){rightSidePane.findTargetElement(e)}})}else rightSidePane.setWorkSpace(e,selID)}else if(!$(wsObj)[0])if(Fragment.crossRefMap){DBG.out(1,"Fragment not loaded yet.");Fragment.loadTarget(selIdUnescaped,{preBuffer:2,postBuffer:2,f:function(){rightSidePane.findTargetElement(e)}})}else DBG.out(1,"Maps unavailable so this is a noop");
else rightSidePane.setWorkSpace(e,selID);else rightSidePane.setWorkSpace(e,selID);ArticlePage.closeOptions(e);exportPopupClose(e);e.preventDefault();e.stopPropagation()},setWorkSpace:function(evt,selID){var wsObj=$("#"+selID);if(!$(wsObj)[0])return;var data="";if($(wsObj)[0].tagName=="DIV"&&($(wsObj).hasClass("figure")&&$(wsObj).hasClass("table")))wsObj=$(wsObj).closest("div").next("p").next("div").find("dl");var wsObjClass;if(rightSidePane.hasCrossRefClass(wsObj))wsObjClass=$(wsObj).attr("class");
else wsObjClass=$(wsObj).parent().attr("class");if(typeof wsObjClass=="undefined"){$("html,body").moveTo(selID);return}var classArr=wsObjClass.split(" ");if(classArr.length>1)wsObjClass=classArr[0];wsObjClass=wsObjClass.replace("svArticle","").replace(" ","");var baseElement="dl."+wsObjClass;switch(wsObjClass){case "figure":var exeWS=function(wsObj,wsObjClass){return rightSidePane.populateFigures(wsObj,wsObjClass)};break;case "table":var exeWS=function(wsObj,wsObjClass){return rightSidePane.populateTables(wsObj,
wsObjClass)};break;case "references":baseElement="ol."+wsObjClass+">li";var exeWS=function(wsObj,wsObjClass){return rightSidePane.populateReferences(wsObj,wsObjClass)};break;case "ecomponent":var baseElement="dd."+wsObjClass;if($(wsObj).is("dl"))wsObj=$(wsObj).find("dd.ecomponent");var exeWS=function(wsObj,wsObjClass){return rightSidePane.populateEcomponents(wsObj,wsObjClass)};break;case "footnote":case "tblFootnote":var exeWS=function(wsObj,wsObjClass){return rightSidePane.populateFootnote(wsObj,
wsObjClass)};break;case "authorName":case "affiliation":case "vitae":case "correspondence":baseElement="."+wsObjClass;if(wsObjClass!="authorName"){wsObjClass="authorName";baseElement="."+wsObjClass;wsObj=$(evt.target).closest("li").find(baseElement);if(wsObj.length==0)wsObj=$(evt.target).closest("li").find(".collabText")}if(wsObjClass=="vitae")wsObj=$("#b"+$(evt.target).attr("id")).closest("li").find(baseElement);var exeWS=function(wsObj,wsObjClass){return rightSidePane.populateAuthorInfo(wsObj,wsObjClass)};
break;default:ArticlePage.doHighlighting(evt);return}data+=rightSidePane.buildPreviousNextLinks(baseElement,wsObj,wsObjClass);data+=exeWS(wsObj,wsObjClass);if(wsObjClass!="authorName"){if(wsObjClass=="references"||wsObjClass=="footnote")selID="b"+selID;if(wsObjClass=="tblFootnote")selID="ancb"+selID;data+='<ul class="links">';if(wsObjClass=="ecomponent")selID=$(wsObj).parent("dl").attr("id");data+='<li><a href="#'+selID+'" class="js_article viewInArt"><span class="icon viewInArticle_'+SD_UTIL.getProdColor()+
'"></span>View in article</a></li>';if(wsObjClass=="figure"){var downLink=$(wsObj).closest("dl").find(".menuButton li").eq(0).clone();if(downLink[0]){downLink.prepend('<span class="icon viewFullsize"></span>');downLink.find("a").text("View full-size image");data+=downLink.outerHTML()}}if(wsObjClass=="ecomponent"){var obj="";obj=$(wsObj).siblings("dd.menuButtonLinks");if($(obj).length>1)obj=$(wsObj).next("dd.menuButtonLinks");data+='<li><a href="'+$(obj).find("a.MMCvLINK").attr("href")+'" class="js_article"><span class="icon download_'+
SD_UTIL.getProdColor()+'"></span>'+$(obj).find("a.MMCvLINK").text()+"</a></li>"}data+="</ul>"}data+='<div id="workSpaceView"></div>';$(".js_workspace_content").find(".scrollArea").html(data);if($(".js_workspace_content").find("img.imgLazyJSB")[0])$.each($(".js_workspace_content img.imgLazyJSB"),function(){var imgEid=$(this).attr("data-inlimgeid");if(imgEid!="undefined"&&imgEid!="")$(this).attr("src",SDM.ep.imgUrlPrefix+$(this).attr("data-inlimgeid"))});if(wsObjClass=="references")rightSidePane.populateReferenceLinks(wsObj);
if(wsObjClass=="authorName"&&(SDM.pm.contentType=="JL"||SDM.pm.contentType=="BS"))if($(wsObj).attr("data-tb")!="TRUE"&&($(wsObj).attr("data-ln")!=undefined&&($(wsObj).attr("data-fn")!=undefined&&$(wsObj).attr("data-pos")!=undefined))){var requestObj=new Object;var author=new Object;author.pos=parseInt($(wsObj).attr("data-pos"));author.fn=$(wsObj).attr("data-fn");author.ln=$(wsObj).attr("data-ln");requestObj.AuthorDetails=author;var requestData=JSON.stringify(requestObj);var authUrl=SDM.ep.urlPrefix+
"/ScopusAuthorCountsURL/"+SDM.pm.pii;var getArticleList=function(res){var json=$.parseJSON(res);rightSidePane.buildArticleList(json,"scopusArticleList",true)};$.post(authUrl,{data:requestData},getArticleList)}$(".buttonNavBox  a").unbind("click",rightSidePane.findTargetElement).bind("click",{z:"rightPane"},rightSidePane.findTargetElement);if(mathRenderer.opt.renderOn)mathRenderer.handleRerender($("#rightPane"));rightSidePane.showWorkspace(evt);rightSidePane.resetWorkspace();mathRenderer.activateButtons()},
showWorkspace:function(obj){if($("#articleToolbar").hasClass("fixedPane"))var wsTop=$("#articleToolbar").outerHeight();else var wsTop=$("#articleToolbar").outerHeight()+$("#header-area").height();$(".js_workspace_content").css("top",wsTop).show();$(".js_workspace_content .closeBt").focus();$(".js_workspace_content").off("click").on("click",".closeBt",function(e){e.preventDefault();if(typeof obj!="undefined"&&typeof obj.currentTarget!="undefined")$(obj.currentTarget).focus();$(".js_workspace_content").hide()});
$(".js_workspace_content").off("keydown","a:last").on("keydown","a:last",function(e){if(e.which==9&&!e.shiftKey){e.preventDefault();$(this).closest(".js_workspace_content").find(":tabbable").eq(0).focus()}});$(".js_workspace_content").off("keydown","a:first").on("keydown","a:first",function(e){if(e.shiftKey&&e.which==9){e.preventDefault();$(this).closest(".js_workspace_content").find(":tabbable").eq(-1).focus()}})},resetWorkspace:function(){$(".js_workspace_content:visible").each(function(){var rightPos=
$(window).width()-$("#page-area").width()+$(window).scrollLeft();if($(window).width()>$("#page-area").width())rightPos=rightPos/2;$(this).css({"right":rightPos-1})})},hasCrossRefClass:function(wsObj){var hasClass=false;if(typeof $(wsObj).attr("class")!="undefined"){var wsObjClass=$(wsObj).attr("class");var classArr=wsObjClass.split(" ");for(var i=0;i<classArr.length;i++){var testClass=classArr[i];testClass=testClass.replace("svArticle","").replace(" ","");switch(testClass){case "figure":case "table":case "references":case "ecomponent":case "footnote":case "tblFootnote":case "authorName":case "affiliation":case "vitae":case "correspondence":hasClass=
true;break;default:break}if(hasClass)break}}return hasClass},buildPreviousNextLinks:function(baseElement,wsObj,wsObjClass){if(Fragment.isAvail())return rightSidePane.buildPreviousNextLinksFragment(baseElement,wsObj,wsObjClass);var data="";var indexVal=$(baseElement).index($(wsObj)[0]);var next=$(baseElement).eq(indexVal+1);if(indexVal-1>=0)var prev=$(baseElement).eq(indexVal-1);if(next&&$(next).find("dl."+wsObjClass).length>0)next=$(next).find("dl."+wsObjClass+":first");if(prev&&$(prev).find("dl."+
wsObjClass).length>0)if(indexVal-2>=0)prev=$(baseElement).eq(indexVal-2);else prev=undefined;if(wsObjClass=="references")wsObjClass="reference";if(wsObjClass=="authorName")wsObjClass="author";if(wsObjClass=="tblFootnote")wsObjClass="footnote";if($(next)[0]||$(prev)[0]){data+='<div aria-label="Go to previous and next in sidebar" role="navigation" class="buttonNavBox">';if($(prev).attr("id"))data+='  <a href="#'+$(prev).attr("id")+'" class="previous S_C_prev">&laquo; previous '+wsObjClass+"</a>";if($(next).attr("id"))data+=
'  <a href="#'+$(next).attr("id")+'" class="next S_C_next">next '+wsObjClass+" &raquo;</a>";data+="</div>"}return data},buildPreviousNextLinksFragment:function(baseElement,wsObj,wsObjClass){var data="";var indexVal=$(baseElement).index($(wsObj)[0]);var next=Fragment.getNextByType($(wsObj).attr("id"),wsObjClass);var prev=Fragment.getPrevByType($(wsObj).attr("id"),wsObjClass);if(wsObjClass=="figure"&&(prev||next)){if(next&&!$("#"+next)[0]){var targetFrag=Fragment.getIntraRefFragId(next);Fragment.get(targetFrag,
undefined,{successCb:function(){if($("#"+next).find("dl."+wsObjClass).length>0){next=Fragment.getNextByType(next,wsObjClass);$("#rightPane .buttonNavBox .next").attr("href","#"+next)}}})}else if($("#"+next).find("dl."+wsObjClass).length>0)next=Fragment.getNextByType(next,wsObjClass);if(prev&&!$("#"+prev)[0]){var targetFrag=Fragment.getIntraRefFragId(prev);Fragment.get(targetFrag,undefined,{successCb:function(){if($("#"+prev).find("dl."+wsObjClass).length>0){prev=Fragment.getNextByType(prev,wsObjClass);
$("#rightPane .buttonNavBox .prev").attr("href","#"+prev)}}})}else if($("#"+prev).find("dl."+wsObjClass).length>0)prev=Fragment.getPrevByType(prev,wsObjClass)}DBG.out(1,"buildPreviousNextLinksFragment()::prev::"+prev+"  current::"+$(wsObj).attr("id")+"  next::"+next);if(wsObjClass=="references")wsObjClass="reference";if(wsObjClass=="authorName")wsObjClass="author";if(wsObjClass=="tblFootnote")wsObjClass="footnote";if(next||prev){data+='<div aria-label="Go to previous and next in sidebar" role="navigation" class="buttonNavBox">';
if(prev)data+='  <a href="#'+prev+'" class="previous S_C_prev">&laquo; previous '+wsObjClass+"</a>";if(next)data+='  <a href="#'+next+'" class="next S_C_next">next '+wsObjClass+" &raquo;</a>";data+="</div>"}return data},populateFigures:function(selObj,selObjClass){var data="",imgSrc="";if($(selObj).find("dl.figure").length>0);else{data+='<dl class="'+selObjClass+'">';$.each($(selObj).find("img.figure"),function(){var dataGabsImgEID=$(this).attr("data-gabsEID");var dataFullImgEID=$(this).attr("data-fullEID");
var dataThumbImgEID=$(this).attr("data-thumbEID");var dataInlImgEid=$(this).attr("data-inlimgeid");var dataInlImg=$(this).attr("data-inlimg");imgSrc=$(this).attr("src");if(imgSrc=="/sd/grey_pxl.gif")if(dataGabsImgEID!=undefined&&(dataGabsImgEID!=""&&SDM.pm.entitled))imgSrc=SDM.ep.imgUrlPrefix+dataGabsImgEID;else if(dataFullImgEID!=undefined&&dataFullImgEID!="")imgSrc=SDM.ep.imgUrlPrefix+dataFullImgEID;else if(dataThumbImgEID!=undefined&&dataThumbImgEID!="")imgSrc=SDM.ep.imgUrlPrefix+dataThumbImgEID;
else if(dataInlImgEid!=undefined&&dataInlImgEid!="")imgSrc=SDM.ep.imgUrlPrefix+dataInlImgEid;if(imgSrc!=undefined)data+='<dt><img src="'+imgSrc+'" title="'+$(this).parent().attr("title")+'" alt="'+$(this).attr("alt")+'" class="'+selObjClass+'"></dt>'});if($(selObj).find("dd p")[0])data+=" <dd>"+$(selObj).find("dd p").outerHTML()+"</dd>";data+="</dl>"}return data},populateTables:function(selObj,selObjClass){var data="";data+='<dl class="'+selObjClass+'">';var tblData=$($(selObj).outerHTML());$(tblData).find("*[id]").each(function(){$(this).removeAttr("id")});
$($(tblData).find(".menuButtonLinks")).remove();$($(tblData).find(".fullsizeTable")).remove();data+=$(tblData).html();data+="</dl>";return data},populateReferences:function(selObj,selObjClass){var data="";data+='<ol class="'+selObjClass+'">';$(selObj).find("ul.reference").each(function(){if($(this).find("li.author").html()!=null)data+='<li class="author">'+$(this).find("li.author").html()+"</li>";if($(this).find("li.title").html()!=null)data+='<li class="title">'+$(this).find("li.title").html()+"</li>";
if($(this).find("li.source").html()!=null)data+=' <li class="source">'+$(this).find("li.source").html()+"</li>";data+='<ul class="placeHolder '+$(this).attr("id")+'"></ul>'});data+='<ul class="absPlaceHolder"></ul>';data+="</ol>";return data},populateReferenceLinks:function(selObj){var url="";var placeHolderObjArr=$(selObj).find("li.refPlaceHolder");$(placeHolderObjArr).each(function(){var placeHolderObj=this;var ab=$(placeHolderObj).closest("ul").attr("id");if($(placeHolderObj).attr("data-refres")==
"Y"){rightSidePane.getAbstract(placeHolderObj,ab);if($(placeHolderObj).html()!=null){var cloneObject=$(placeHolderObj).clone();var keyEventObj=rightSidePane.addZoneAndPanelForKeyEvents(cloneObject);var data="";data+='<ul class="links">';$(cloneObject).find("div.boxLink").each(function(){var clonedObj=$(this).clone();if($(clonedObj).find(".citedBy_")[0]){var citeObj=$(clonedObj).find(".citedBy_");var workId="work_"+$(citeObj).attr("id");$(clonedObj).find(".citedBy_").attr("id",workId);if($(citeObj).attr("data-citeres")==
"Y"){var replacedText=$(citeObj).text().replace(" | ","");$(clonedObj).find(".citedBy_").html(replacedText);$(clonedObj).before("&nbsp;|&nbsp;")}else rightSidePane.getScopusCitedByCount(cloneObject,citeObj);data+='<li class="refLinks">'+$(clonedObj).outerHTML()+"</li>"}else data+='<li class="refLinks">'+$(clonedObj).outerHTML()+"</li>"});data+="</ul>";var wsObj=$(".js_workspace_content").find(".scrollArea");var obj=$(wsObj).find("ul.placeHolder."+ab);$(obj).show();$(obj).html(data);data=""}}else rightSidePane.resolveRefsForWorkSpacePanel(placeHolderObj,
ab)})},getAbstract:function(refHolder,parentID){var absUrl=$(refHolder).attr("data-absUrl");if(absUrl==undefined)return;var ajaxReq=$.get(absUrl,function(response){if(response.length>1){var wsObj=$(".js_workspace_content").find(".scrollArea");var obj=$(wsObj).find("ul.placeHolder."+parentID);$(obj).prepend("<li>"+response+"</li>")}})},addZoneAndPanelForKeyEvents:function(obj){$(obj).find("div.boxLink").each(function(){if($(this).find("a")[0]){var anchorTag=$(this).find("a");var queryStr=$(anchorTag).attr("queryStr");
if(queryStr!=undefined){queryStr+="&_zone=rightPane&panel=workspace";$(anchorTag).attr("queryStr",queryStr)}else{var url=$(anchorTag).attr("data-url");if(url!=undefined){if(url.indexOf("art_page")!=-1)url=url.replace("art_page","rightPane");else url+="&zone=rightPane";url+="&panel=workspace";$(anchorTag).attr("data-url",url)}}}});return obj},getScopusCitedByCount:function(placeHolderObj,citeObj){var citeUrl="";var scEid=$(citeObj).attr("data-sceid");var refId=$(placeHolderObj).attr("id");if(scEid!=
undefined&&refId!=undefined)citeUrl=SDM.ep.urlPrefix+"/citedByScopus/"+scEid+"/"+refId;if(citeUrl!="")var ajaxReq=$.get(citeUrl,function(response){if(response){var wsObj=$(".js_workspace_content").find(".scrollArea");if($(wsObj).find(".citedBy_")[0]){$(wsObj).find(".citedBy_").html(response);$(citeObj).closest("div.boxLink").before("&nbsp;|&nbsp;")}}})},resolveRefsForWorkSpacePanel:function(placeHolderObj,parentID){var url=url=SDM.ep.urlPrefix+"/resolveRefs/"+SDM.pm.eid+"/"+$(placeHolderObj).attr("id");
var data="";var wsObj=$(".js_workspace_content").find(".scrollArea");var obj=$(wsObj).find("ul.placeHolder");if(obj&&url)var ajaxReq=$.get(url,function(response){if(response){var absData=$(response).find("li.refAbs");if($(absData)[0])data+=$(absData).outerHTML();var keyEventObj=rightSidePane.addZoneAndPanelForKeyEvents($(response));data+='<ul class="links">';$(response).find("div.boxLink").each(function(){var clonedObj=$(this).clone();data+='<li class="refLinks">'+$(clonedObj).outerHTML()+"</li>"});
data+="<ul>";var obj=$(wsObj).find("ul.placeHolder."+parentID);$(obj).show();$(obj).html(data);data=""}})},populateEcomponents:function(selObj,selObjClass){var data="";var wsObj=$(selObj).parent("dl");var wsObjId=$(selObj).attr("id");data+='<dl class="'+selObjClass+'">';if($(wsObj)[0]&&wsObjId!="undefined")data+=" <dd>"+$(wsObj).find("#"+wsObjId).html()+"</dd>";if($(wsObj).find("dd.mmcCaption").html()!=null)data+=" <dd>"+$(wsObj).find("dd.mmcCaption").html()+"</dd>";data+="</dl>";return data},populateAffiliations:function(selObj,
selObjClass){var data="";data+='<ul class="'+selObjClass+'">'+"<li>"+$(selObj).html()+"</li>"+"</ul>";return data},populateAuthorInfo:function(selObj,selObjClass){var data="";var affData="";var vitaeData="";var authText="";data+='<h3 class="workAuthor">';$(selObj).closest("li").find(".authorDegrees,.authorName,.collabText").each(function(){data+=$.trim($(this).text())+"&nbsp;"});data+='</h3><dl class="author">';if($(selObj).closest("li").find(".authorRoles").text()!=""){var roleTxt=$(selObj).closest("li").find(".authorRoles").text();
data+='<dd><span class="icon blank"></span><p>'+roleTxt.substring(2,roleTxt.length-1)+"</p></dd>"}$(selObj).closest("li").find("a").each(function(){if($(this).attr("href").toLowerCase().indexOf("mailto")!=-1)data+='<dd><span class="icon email_'+SD_UTIL.getProdColor()+'">&nbsp;</span><p><a href="'+$(this).attr("href")+'" title="'+$(this).attr("href").replace("mailto:","")+'">'+$(this).attr("href").replace("mailto:","")+"</a></p></dd>";else if($(this).hasClass("cExLink"))data+='<dd><span class="icon email_'+
SD_UTIL.getProdColor()+'">&nbsp;</span><p class="wrap2"><a href="'+$(this).attr("href")+'">'+$(this).attr("href")+"</a></p></dd>";else{if($($(this).attr("href")).closest("ul").hasClass("affiliation")){affData=$($(this).attr("href")).clone();$($(affData).find("sup")).remove();data+='<dd><span class="icon affiliation_'+SD_UTIL.getProdColor()+'"></span><p>'+$(affData).html()+"</p></dd>"}else if(!$(data).find(".affilData")[0])data+='<dd class="affilData"><span class="icon affiliation_'+SD_UTIL.getProdColor()+
'"></span><p>'+"</p></dd>";if($($(this).attr("href")).hasClass("correspondence"))data+='<dd><span class="icon correspondence_'+SD_UTIL.getProdColor()+'"></span><p>'+$($(this).attr("href")).find("dd").html()+"</p></dd>";if($($(this).attr("href")).hasClass("footnote"))data+='<dd><span class="icon blank"></span><p>'+$($(this).attr("href")).find("dd").html()+"</p></dd>";if($(this).attr("target")=="externObjLink"){var url=$(this).attr("href").substring($(this).attr("href").indexOf("_targetURL")+11,$(this).attr("href").length);
data+='<dd><span class="icon url"></span><p>'+decodeURIComponent(decodeURIComponent(url))+"</p></dd>"}}});data+="</dl>";if($(selObj).closest("li").find(".authorVitaeLink")[0]){var vitaeObj=$($(selObj).closest("li").find(".authorVitaeLink").attr("href")).clone();var authImg="";if($(vitaeObj).find("img")[0]){$($(vitaeObj).find("img")).removeAttr("height");authImg='<div class="authImg">'+$(vitaeObj).find("img").outerHTML()+"</div>";$($(vitaeObj).find("img").parent("span")).remove()}data+="<h3>Vitae</h3>"+
authImg+$(vitaeObj).html()}data+='<div class="articleList"><ol id="scopusArticleList"></ol></div>';if(affData==""&&$(selObj).closest("ul").nextAll("ul.affiliation")[0]){var affData=$(selObj).closest("ul").nextAll("ul.affiliation").eq(0);var affOtherData="";var affNewData=$("<div>"+data+"</div>").clone();if(affData[0]&&!$(affData).find("sup")[0]){$($(affData).find("sup")).remove();affOtherData+='<span class="icon affiliation_'+SD_UTIL.getProdColor()+'"></span><p>'+$(affData).find("li").html()+"</p>";
$(affNewData).find(".affilData").html(affOtherData)}else $(affNewData).find(".affilData").remove();data=$(affNewData).html()}else{var affNewData=$("<div>"+data+"</div>").clone();$(affNewData).find(".affilData").remove();data=$(affNewData).html()}return data},populateFootnote:function(selObj,selObjClass){var data="";if(selObjClass=="footnote"){data+="<h3>Footnote "+$(selObj).find("dt").text()+"</h3>";$(selObj).find("dd").each(function(){data+="<p>"+$(this).html()+"</p>"})}else{data+="<h3>Table footnote "+
$(selObj).find("dt").text()+"</h3>";$(selObj).find("dd").each(function(){data+="<p>"+$(this).html()+"</p>"})}return data},animateBackground:function(obj){var rp=$(obj).add($(obj).children(".hidescrollbar"));$("div.accordionContent").animate({backgroundColor:pgLayout.glowOnColor},{queue:false,duration:300,complete:function(){setTimeout(function(){$("div.accordionContent").stop().animate({backgroundColor:pgLayout.glowOffColor},{queue:false,duration:100})},300)}})},showRightAd:function(obj){var iframe=
"";var rpWidth=$(obj).width();var rightAdPH=$(obj).find(".rightAdPlaceHolder");$(".rightAdPlaceHolder").html("");if(rpWidth<=300&&SDM.pf.ads.rightSmUrl)iframe='<div id="articleRightAdSm" class="adBlock"><iframe scrolling="no" frameborder="0" border="0" cellspacing="0" src="'+SDM.pf.ads.rightSmUrl+'"></iframe></div>';else if(rpWidth>300&&SDM.pf.ads.rightLgUrl)iframe='<div id="articleRightAdLg" class="adBlock"><iframe scrolling="no" frameborder="0" border="0" cellspacing="0" src="'+SDM.pf.ads.rightLgUrl+
'"></iframe></div>';if(rightAdPH[0]&&iframe!="")rightAdPH.html(iframe);else if(iframe!="")$(obj).append($('<div class="rightAdPlaceHolder">'+iframe+"</div>"));else rightAdPH.hide()}};var GadgetUtil={toolbarIds:["SD_FTA1","SD_AT1P"],displayGadgetCallBack:"",loadGadgets:function(){if(!SDM.pf.gadget)return;SDM.sciverseDecoded=false;var gsURL;var e="0";if(SDM.pm.entitled)e="1";gsURL=SDM.ep.urlPrefix+"/gs/"+SDM.pm.pii+"/"+e;$.get(gsURL,function(data){if(data)try{sciverse=decodeURIComponent(decodeURIComponent(data));SDM.sciverseDecoded=true}catch(err){SDM.sciverseDecoded=false}if(SDM.sciverseDecoded==true&&(sciverse.length>0&&sciverse.indexOf("gadgetId")!=-1))LazyLoad.js([SDM.pf.gadget.svShindigLib,
SDM.pf.gadget.svSciverseLib],function(){GadgetUtil.displayGadgetsWrapper();if(SDU.isIE7())ArticlePage.setPaneWidths()})})},loadGadgetsParallel:function(){if(!SDM.pf.gadget)return;SDM.sciverseDecoded=false;var gadgetURL=SDM.pf.gadget.sciverseUrlPfx+"/gadgetservices/rest/getGadgetsData?guid="+SDM.pf.gadget.sciverseGadgetDetailsID;$.get(gadgetURL,function(data){if(data)sciverse=data;if(sciverse.length>0&&sciverse.indexOf("gadgetId")!=-1)LazyLoad.js([SDM.pf.gadget.svShindigLib,SDM.pf.gadget.svSciverseLib],
function(){GadgetUtil.displayGadgetsWrapper();if(SDU.isIE7())ArticlePage.setPaneWidths()})},"text")},displayGadgetsWrapper:function(){if(typeof displayGadgets=="function"){sgf.subscribeForEvents(sgfEvents.INVOKE_WORKSPACE_VIEW,GadgetUtil.invokeWorkSpaceView);sgf.subscribeForEvents(sgfEvents.DISPLAY_GADGET,GadgetUtil.checkForPrivilagedGadget);displayGadgets();setTimeout(function(){$("#SD_BIB, #SD_CRA").each(function(){if($(this).children().length>0)$(this).prev(".gadSep").show()});if(typeof ArticlePage!=
"undefined")ArticlePage.viewHandler()},500)}else setTimeout("GadgetUtil.displayGadgetsWrapper()",250)},checkForPrivilagedGadget:function(gadgetArray){if(pgLayout.applicationPanelDisplayed)return;if(gadgetArray!=null)$.each(gadgetArray,function(){if(this.privFlag=="Y"&&GadgetUtil.toolbarIds.indexof(this.locationId)>-1){if(!$("#rightInner h2.ui-state-active").hasClass("applications"))ArticlePage.setPaneWidths();pgLayout.applicationPanelDisplayed=true;return false}})},toggleGadgetView:function(obj,boxId,
ecompId){if($(obj).hasClass("openMMC")){$(obj).removeClass("openMMC").addClass("closeMMC");GadgetUtil.displayGadgetCallBack(boxId,ecompId)}else if($(obj).hasClass("closeMMC")){$(obj).removeClass("closeMMC").addClass("openMMC");GadgetUtil.closeGadgetView(boxId)}$("html,body").moveTo(boxId)},closeGadgetView:function(boxId){var ecompObj=$("#"+boxId);if(ecompObj){$(ecompObj).find(".containerApplOver").remove();$(ecompObj).find(".ecomponent").children().css("display","block")}},invokeWorkSpaceView:function(){$(".js_workspace_content .scrollArea").html("");
$(".js_workspace_content .scrollArea").html('<div id="workSpaceView"></div>');$(".js_workspace_content #workSpaceView").css("display","block");rightSidePane.showWorkspace();rightSidePane.resetWorkspace()}};var EReader={init:function(){if(SDM.pf.er==undefined)return;$("#epubLink").attr("href","");$("#epubLink").click(function(){DBG.out(1,"epub clicked");EReader.get("epubLink",SDM.pf.er.epub,0);exportPopupClose();return false});$("#mobiLink").attr("href","");$("#mobiLink").click(function(){DBG.out(1,"mobi clicked");EReader.get("mobiLink",SDM.pf.er.mobi,0);exportPopupClose();return false})},get:function(id,opts,i){var cfg={url:"",name:"unknown",retry:10,retryDelay:2E3,retryFactor:1.1};if(opts)$.extend(true,
cfg,opts);if(i==0){cfg.swStart=new Date;EReader.hideLoader($("#"+id),cfg);cfg.msgTimeout=setTimeout(function(){EReader.showLoader($("#"+id),cfg);$("#leftPaneInner.fixedPane, .topBorder.fixedPane, .appContainer.fixedPane").css("top",$("#articleToolbar").outerHeight());$(".js_workspace_content").css("top",$("#header-area").height()+$("#articleToolbar").outerHeight())},cfg.msgDelay)}$.get(cfg.url).success(function(a,b,c){DBG.out(1,"The artifact is ready");$("#"+id+" .msg").remove();clearTimeout(cfg.msgTimeout);
EReader.hideLoader($("#"+id),cfg);$("#leftPaneInner.fixedPane, .topBorder.fixedPane, .appContainer.fixedPane").css("top",$("#articleToolbar").outerHeight());$(".js_workspace_content").css("top",$("#header-area").height()+$("#articleToolbar").outerHeight());if(a){var artURL=a.split("<url>")[1].split("</url>")[0];$("body").append('<iframe style="display:none;" id="ereaderif" src="'+artURL+'"></iframe>');cfg.swStop=new Date;var diff=cfg.swStop.valueOf()-cfg.swStart.valueOf();EReader.hideLoader($("#"+
id),cfg);DBG.out(1,"ereader elapsed time:"+diff)}}).error(function(a,b,c){if(a.status>=500)window.location.reload();else{DBG.out(1,"The artifact is not ready "+cfg.url);if(i<cfg.retry){var d=i*cfg.retryFactor*cfg.retryDelay;DBG.out(1,"delay "+i+":"+d);setTimeout(function(){EReader.get(id,cfg,++i)},d)}else{EReader.errorLoader($("#"+id),cfg);cfg.swStop=new Date;var diff=cfg.swStop.valueOf()-cfg.swStart.valueOf();DBG.out(1,"ereader gave up after:"+diff)}}})},showLoader:function($e,cfg){var htmlStr;if(cfg.msgType==
"rect")htmlStr='<div id="ldr'+cfg.name+'" class="erLdr"><div class="msg">Generating '+cfg.name+"...</div>"+'<div class="anim rect facebookG">'+'<img src="/sd/img/sprite_parts/SD_MOBEPUB_Pipes-Anime.gif" alt="Generating '+cfg.name+' ..."/>'+"</div></div>";$("#erToolbar").append(htmlStr);if($("li.exportPopupListitem")[0])$("#erToolbar > div").css("padding-left",$("li.exportPopupListitem").position().left-10)},errorLoader:function($e,cfg){if(cfg.msgType=="rect"){$("#ldr"+cfg.name).html("").append('<img class="err" src="/sd/alertIcon.gif"></img>');
$("#ldr"+cfg.name).append('<div class="msg err">'+cfg.name+" generation taking longer than expected. Please try later for finished document.</div>")}if($("li.exportPopupListitem")[0])$("#erToolbar > div").css("padding-left",$("li.exportPopupListitem").position().left-10);$("#leftPaneInner.fixedPane, .topBorder.fixedPane, .appContainer.fixedPane").css("top",$("#articleToolbar").outerHeight());$(".js_workspace_content").css("top",$("#header-area").height()+$("#articleToolbar").outerHeight())},fabRequest:function(){if(typeof SDM.fab.mobUrl!=
"undefined")$.get(SDM.fab.mobUrl)},hideLoader:function($e,cfg){$("#ldr"+cfg.name).remove();if(!$(".erLdr").length){$("#quickSearch").css("margin-right","").css("width","");$("div.sdSearch").css("width","")}$("#leftPaneInner.fixedPane, .topBorder.fixedPane, .appContainer.fixedPane").css("top",$("#articleToolbar").outerHeight());$(".js_workspace_content").css("top",$("#header-area").height()+$("#articleToolbar").outerHeight())},optionsOpened:function(){DBG.out(1,"optionsOpened()")},optionsClosed:function(){DBG.out(1,
"optionsClosed()")}};var LoginBox={getStyleObj:function(elem,parent){if(document.layers)if(parent)return"document."+parent+".document."+elem;else return"document."+elem+".style";else if(document.all)return"document.all."+elem+".style";else if(document.getElementById)return"document.getElementById('"+elem+"').style"},flipLogin:function(e,button){var t=eval(LoginBox.getStyleObj(e));var u=document.getElementById("loginPlus");var v=document.getElementById("userPlus");var userbox=document.getElementById("userBox");var j=document.getElementById("loginPlusScript");
if(button==null)if(t.display=="none"){t.display="block";j.className="minus";$("#username").focus();$("#loginPlusScript").attr("aria-expanded","true");$(document).on("keyup",LoginBox.handleEscKey)}else{t.display="none";j.className="plus";$("#loginPlusScript").attr("aria-expanded","false");$(document).off("keyup",LoginBox.handleEscKey)}else if(button=="userPlus")if(t.display=="none"){t.display="block";v.className="userMinus";$("#userPlus").attr("aria-expanded","true");$("#logoutPlus > span").addClass("logoutSpan");
$("#logoutPlus > span h2").addClass("logoutSpan");$(document).on("keyup",LoginBox.handleEscKey)}else{t.display="none";v.className="userPlus";$("#userPlus").attr("aria-expanded","false");$("#logoutPlus > span").removeClass("logoutSpan");$("#logoutPlus > span h2").removeClass("logoutSpan");$(document).off("keyup",LoginBox.handleEscKey)}else if(t.display=="none"){t.display="block";userbox.style.display="none";v.className="userPlus";$(document).off("keyup",LoginBox.handleEscKey)}else t.display="none";
this.truncateRecentInst();LoginBox.setTabs()},truncateRecentInst:function(){var textContainerHeight=$(".recentInst").height();$(".recentInst a").each(function(){var $ellipsisText=$(this);if($ellipsisText.outerHeight(true)>textContainerHeight)while($ellipsisText.outerHeight(true)>textContainerHeight)$ellipsisText.text(function(index,text){return text.replace(/\W*\s(\S)*$/,"...")});else $ellipsisText.parent(".recentInst").css("height","auto")})},handleEscKey:function(e){if(e.keyCode==27)if($("#loginBox,#userBox").is(":visible")){$("#loginBox,#userBox").hide();
$("#loginPlusScript").addClass("plus").removeClass("minus").attr("aria-expanded","false");$("#userPlus").addClass("userPlus").removeClass("userMinus").attr("aria-expanded","false");$("#logoutPlus > span").removeClass("logoutSpan");$("#logoutPlus > span h2").removeClass("logoutSpan")}},setTabs_deprecated:function(){$("#header").off("keydown","#loginBox :tabbable:last,#userBox :tabbable:last").on("keydown","#loginBox :tabbable:last,#userBox :tabbable:last",function(e){if(e.which==9&&!e.shiftKey){e.preventDefault();
$(this).closest("#loginBox,#userBox").find(":tabbable").eq(0).focus()}});$("#header").off("keydown","#loginBox :tabbable:first,#userBox :tabbable:first").on("keydown","#loginBox :tabbable:first,#userBox :tabbable:first",function(e){if(e.shiftKey&&e.which==9){e.preventDefault();$(this).closest("#loginBox,#userBox").find(":tabbable").eq(-1).focus()}})},setTabs:function(){var selectorFirst="",selectorLast="";if($("#loginBox")[0]){selectorFirst="#loginBox > div :first";selectorLast="#loginBox > div :last"}else if($("#userBox")[0]){selectorFirst=
"#userBox :first";selectorLast="#userBox :last"}if(selectorFirst!=""&&selectorLast!=""){$("#header").off("keydown",selectorLast).on("keydown",selectorLast,function(e){if(e.which==9&&!e.shiftKey){e.preventDefault();$(this).closest("#loginBox,#userBox").find(":tabbable").eq(0).focus()}});$("#header").off("keydown",selectorFirst).on("keydown",selectorFirst,function(e){if(e.shiftKey&&e.which==9){e.preventDefault();$(this).closest("#loginBox,#userBox").find(":tabbable").eq(-1).focus()}})}}};$.fn.ieWarning=function(){var container=this;init();function init(){var state=Cookie.get("ie_warning_state");if(state)removeMsg();else showMsg()}function showMsg(){container.show();$(".closeBt",container).on("click",disableMsg);setTimeout(disableMsg,2E4)}function hideMsg(){container.animate({top:-container.outerHeight()},removeMsg)}function disableMsg(){Cookie.set("ie_warning_state",1);hideMsg()}function removeMsg(){container.remove()}};var MobileLink={init:function(){$("#goToggleSite").delegate(".mLink","click",function(event){event.preventDefault();var t=$(this);overrideSitePref(t.attr("site"),t.attr("ckNm"),t.attr("lnkOrg"),t.attr("lnkZn"),event)})}};$(document).ready(MobileLink.init);
function overrideSitePref(sitePref,cookieName,orig,zone,evt){if(!sitePref)sitePref="";if(!cookieName)cookieName="Site";createSimpleCookie(cookieName,sitePref);var cv="";if(zone&&""!==zone)cv=cv.addTag(zone,"z");if(orig&&""!==orig)cv=cv.addTag(orig,"org");if(""!==cv){cv=cv.addTag(getDateTime(),"rdt");var cookStNm="SD_ART_LINK_STATE";if("browse"===orig)cookStNm="SD_HOME_PAGE_COOKIE";else if("home"===orig)cookStNm="SD_HOME_PAGE_COOKIE";createCookie(cookStNm,cv)}var pgRLForm=document.getElementById("pgReload");
if(pgRLForm){var wl=window.location;var myURL=wl.protocol;if(0===myURL.length)myURL="http:";if(myURL.indexOf(":")<0)myURL+=":";myURL+="//"+wl.host+wl.pathname;pgRLForm.action=myURL;if(wl.search.length>1){var prms=wl.search;if("?"===prms[0])prms=prms.substring(1);var nvArr=prms.split("&");for(var i=0;i<nvArr.length;i++){var nv=nvArr[i].split("=");if(nv.length>0&&nv[0].length>0){var ele=document.createElement("input");ele.setAttribute("type","hidden");ele.setAttribute("name",nv[0]);if(nv.length>1)ele.setAttribute("value",
nv[1]);pgRLForm.appendChild(ele)}}}pgRLForm.submit()}else window.location.reload(true)};var ExtObjLink={init:function($scope){if(!$scope.length)return;if(!SDM.dac.extObj)SDM.dac.extObj=Object();$scope.find(".interref").each(function(){ExtObjLink.buildExtLink($(this).attr("data-locatortype"),$(this).attr("data-locatorKey"),$scope,$(this))})},buildExtLink:function(locType,locKey,fragId,$interref){if(locType!=""&&typeof locType!="undefined")if(typeof SDM.dac.extObj[locType]!="undefined"){if(typeof SDM.dac.extObj[locType].eolURL!="undefined"&&SDM.dac.extObj[locType].eolURL!="")ExtObjLink.processExt(fragId,
$interref)}else{if(!SDM.dac.extObj[locType])SDM.dac.extObj[locType]=Object();if(typeof SDM.dac.extObj[locType].inProgress=="undefined"){SDM.dac.extObj[locType].inProgress="Y";ExtObjLink.executeCall(locType,locKey,fragId)}else if(SDM.dac.extObj[locType].inProgress=="N"){SDM.dac.extObj[locType].inProgress="Y";ExtObjLink.executeCall(locType,locKey,fragId)}}},processExt:function($scope,$interref){if(!$scope.length)return;if(typeof $interref!="undefined")ExtObjLink.postProcess($interref.attr("data-locatortype"),
$interref.attr("data-locatorKey"),$interref);else $scope.find(".interref").each(function(){ExtObjLink.postProcess($(this).attr("data-locatortype"),$(this).attr("data-locatorKey"),$(this))})},postProcess:function(locType,locKey,$html){if($html.find("a").attr("data-itrprs")!="Y")if(typeof SDM.dac.extObj[locType]!="undefined"&&SDM.dac.extObj[locType].eolURL!="")if(typeof SDM.dac.extObj[locType].eolURL!="undefined"&&SDM.dac.extObj[locType].eolURL!="Inactive"){var extString="";extString+=decodeURIComponent(SDM.dac.extObj[locType].eolURL);
extString+=$html.text();if(SDM.dac.extObj[locType].eolAddSuffix!="")extString+=SDM.dac.extObj[locType].eolAddSuffix;extString+="</a>";$html.html(extString);if(locType=="url")$html.find("a").attr("href",locKey);else{var targetUrl="";if(SDM.dac.extObj[locType].eolPrefix!="")targetUrl=SDM.dac.extObj[locType].eolPrefix;if(targetUrl!="")targetUrl+=locKey;else targetUrl=locKey;if(SDM.dac.extObj[locType].eolSuffix!="")targetUrl+=SDM.dac.extObj[locType].eolSuffix;$html.find("a").attr("href",targetUrl)}var targetString=
"";targetString=$html.find("a").attr("data-url");targetString+=encodeURIComponent(encodeURIComponent($html.find("a").attr("href")));$html.find("a").attr("data-url",targetString);$html.find("a").attr("data-itrprs","Y")}},executeCall:function(locType,locKey,fragId){var requestObj=new Object;requestObj.cid=SDM.pm.cid;if(SDM.pm.contentFamily=="serial")requestObj.issn=SDM.pm.issnisbn;else requestObj.isbn=SDM.pm.issnisbn;requestObj.locType=locType;requestObj.locKey=locKey;var requestData=JSON.stringify(requestObj);
$.post(SDM.ep.urlPrefix+"/extObj",{data:requestData},function(res){if(!res.length)return;var extObjLink;try{extObjLink=$.parseJSON(res);SDM.dac.extObj[locType].eolURL=extObjLink.eolURL;SDM.dac.extObj[locType].eolPrefix=extObjLink.eolPrefix;SDM.dac.extObj[locType].eolSuffix=extObjLink.eolSuffix;SDM.dac.extObj[locType].eolAddSuffix=extObjLink.eolAddSuffix;ExtObjLink.processExt(fragId);SDM.dac.extObj[locType].inProgress="N"}catch(e){return}})}};var DDM={requestjson:null,selectedNamingScheme:"",jsonData:"",urlQualifier:"",maxCnt:20,partNameMap:{},namingSchemes:null,predefinedNames:[],init:function(){if(SDU.cookieAvail())$("li.pdfDownloader").css("display","inline-block");else if(!$("li.pdfDownloader").prev("li")[0])$("div.exportDivision").closest("li").addClass("noDDM");var msgBox=$("#appDialog");msgBox.css("position","fixed");$("body").on("click","#multiPdfIcon, .multiPdfIcon",DDM.openDialog);$("body").on("click","#closeWindow, a.closeModal",
DDM.closeModalWindow);$("body").on("click","#ddm",DDM.downloadPdfs);$("body").on("click",".newNaming",DDM.goToNaming);$("body").on("click",".deleteNaming",DDM.deleteNamingScheme);$("body").on("click",".goToFiles, .saveName",DDM.goToFileList);$("body").on("change","#list2",DDM.handleSelectedBits);$("body").on("change","#list1",DDM.handleAvailableBits);$("#removeBtn,#upBtn,#downBtn,.saveName").prop("disabled",true).addClass("disable");DDM.buildPartNameMap();DDM.initPredefinedNames()},openDialog:function(e){e.preventDefault();
e.stopPropagation();if(typeof pdfCite=="undefined"){$("#appDialog,#appBackground").show();$("#contentBlk #filesTemplate").html('<img id="loader" src="/sd/img/sprite_parts/loader.gif"><div id="loaderTxt">Loading Documents</div>');$("#appDialog .footer").html("")}var form=$(e.currentTarget).closest("form")[0];if(typeof SD_URL_QUALIFIER!="undefined"){DDM.urlQualifier=window.location.pathname;if($(e.currentTarget).hasClass("module")||form.isBook!=undefined&&form.isBook.value=="book")DDM.urlQualifier=
$(form).attr("action")}else{DDM.urlQualifier=$(form).attr("action");if($("input.checkBox:checked:visible").length==0){$("#SuggestedArtList input.pdf_selectAll").prop("checked",true);$("#SuggestedArtList input.pdf_selectAll").css("opacity","0.5");$('#pdfkingContent input[type="checkbox"]').prop("checked",true)}}if(form.PDF_DDM_MAX)DDM.maxCnt=form.PDF_DDM_MAX.value;form.pdfDownload.value="download";var pdfDownloadUrl=DDM.urlQualifier+"?"+$(form).serialize();if(typeof pdfCite!="undefined"){var artCount=
$("input[name=art].checkBox:checked:visible").length;if(artCount==0)artCount=3;var displayMsg="<span>Downloading zip file containing "+artCount+" article...</span>";if(artCount>1)displayMsg="<span>Downloading zip file containing "+artCount+"  articles...</span>";$("#pdfKingMessage .pdfKingHeading .downloadMsg").html(displayMsg);$("#displayPdfKing").css("display","none");$("#pdfKingMessage").css("display","block");setTimeout(function(){pdfCite.closePopup()},5E3)}$.getJSON(pdfDownloadUrl,function(data){DDM.requestJson=
data;DDM.generateDownloadScreen(data);DDM.jsonData=data;if(typeof pdfCite!="undefined")DDM.downloadPdfs()})},generateDownloadScreen:function(jsonObj,newName){DDM.getNamingSchemes();if(jsonObj&&jsonObj.metaData){var htmlStr="";try{var docs=jsonObj.metaData;htmlStr+='<div class="namingSchems">';if(jsonObj.hitCount>DDM.maxCnt&&$("#book").val()!="book")htmlStr+='<div class="alertMesg notify"><span class="alertImg icon">&nbsp;</span><span class="alertText">First '+DDM.maxCnt+" documents will be downloaded</span></div>";
else if($("#book").val()=="book"&&$(".articleList .checkBox:checked").size()<=0){htmlStr+='<div class="alertMesg notify book">';htmlStr+='<span class="alertImg icon">&nbsp;</span>';htmlStr+='<span class="alertText">Downloading all chapters could take up to a minute or more.';htmlStr+="For a quicker download, you can select specific chapter titles on the book homepage.";htmlStr+="</span></div>"}htmlStr+='<h2 id="namingTxt">Select file naming format</h2>';htmlStr+='<div class="namingContainer"><select id="naming">';
$.each(DDM.namingSchemes,function(i,item){htmlStr+='<option value="'+item.schemeId+'">'+item.schemeId+"</option>"});htmlStr+="</select>";htmlStr+='<a class="linkButton newNaming" href="#">Create my own format</a> <span class="divider">|</span>';htmlStr+='<a class="linkButton deleteNaming" href="#">Delete</a>';htmlStr+="</div>";htmlStr+='<div id="loadAbstract">';htmlStr+='<label id="abs">Note: Abstract will be downloaded when full text is not available.</label>';htmlStr+="</div></div>";if(docs.length>
0){htmlStr+='<div id="files">';htmlStr+="<h2>Selected documents</h2>";htmlStr+='<div id="tableScroll" tabindex="-1">';htmlStr+="<table>";htmlStr+='<col><col class="spacing"><col class="formatColumn"><col class="spacing"><col class="availabilityColumn">';htmlStr+='<thead><tr><th><div>Document title</div></th><th></th><th><div class="formatColumn">Format</div></th><th></th><th><div class="availabilityColumn">Availability</div></th></tr></thead>';htmlStr+="<tbody>";$.each(docs,function(i,item){var icon=
item.entitled=="Y"?"PDF-icon.png":"HTML-icon-small.png";var entStatus=item.entitled=="Y"?"PDF Full text":"Abstract only";htmlStr+='<tr class="row">';htmlStr+='<td><span class="fileName">'+item.translatedDocTitle+"</span></td>";htmlStr+="<td></td>";htmlStr+='<td align="center"><span class="fmtIcon"><img src="/sd/img/sprite_parts/'+icon+'"/></span></td>';htmlStr+="<td></td>";htmlStr+="<td><span>"+entStatus+"</span></td>";htmlStr+="</tr>"});htmlStr+="</tbody>";htmlStr+="</table>";htmlStr+="</div></div>"}$("#appDialog #contentBlk #filesTemplate").html(htmlStr).show();
$("#appDialog #ddmNewformatHelp").hide();$("#appDialog #ddmMainHelp").show();var footerHtml="";footerHtml+='<span id="footerBtns"><button type="button" class="big" id="ddm">Download</button><span class="divider">|</span><a href="#" class="closeModal">Cancel</a></span>';$("#appDialog .footer").html(footerHtml);if(typeof newName!="undefined"&&newName==true)$("#appDialog #ddm").focus();else $("#appDialog .close").focus();DDM.popupTabwrap()}catch(e){}}},goToNaming:function(e){$("#appDialog #namingTemplate #list2").html("");
$("#appDialog #namingTemplate #customText").val("");$("#appDialog #namingTemplate #example").html("");var htmlStr="";htmlStr+="<h2>Create new format</h2>";htmlStr+='<div id="partsSelector">';htmlStr+='<div class="left"><label>Available<select id="list1" multiple></select></label></div>';htmlStr+='<div id="moveParts" class="middle"><button type="button" id="addBtn" class="big" >Add</button><button type="button" id="removeBtn" class="big" >Remove</button><button type="button" id="upBtn" class="big" >Move up</button><button type="button" id="downBtn" class="big" >Move down</button></div>';
htmlStr+='<div class="right"><label>Selected<select id="list2" multiple></select></label></div>';htmlStr+="</div>";htmlStr+='<div id="customPartSelector">';htmlStr+='<label class="customLabel" for="customText">Custom text<br/><input type="text" name="customText" id="customText" class="customText"></label>';htmlStr+='<label for="prefix"><input type="radio" class="customPos" name="customPos" id="prefix" value="0" checked="checked"><span>Prefix</span></label>';htmlStr+='<label for="suffix"><input type="radio" class="customPos" name="customPos" id="suffix" value="1"><span>Suffix</span></label>';
htmlStr+="</div>";htmlStr+='<div id="example"></div>';$("#appDialog #namingTemplate").html(htmlStr);var bits="";$.each(DDM.partNameMap,function(key,value){bits+='<option value="'+value+'">'+key+"</option>"});$("#appDialog #namingTemplate #list1").html(bits);$("#appDialog #filesTemplate, #limitNote").hide();$("#appDialog #namingTemplate").show();$("#appDialog #ddmNewformatHelp").show();$("#appDialog #ddmMainHelp").hide();$("#appDialog .footer #footerBtns").html('<button class="saveName">Save</button><span class="divider">|</span><a href="#" class="goToFiles">Cancel</a>');
$("#removeBtn,#upBtn,#downBtn,.saveName").prop("disabled",true).addClass("disable");$(document).off("click.addBtn").on("click.addBtn","#addBtn",function(){var selectedCnt=$("#list1 > option:selected").length;$("#list1 > option:selected").each(function(idx){$("#list2").append("<option value='"+$(this).val()+"'>"+$(this).text()+"</option>");if(idx==selectedCnt-1)if($(this).next("option")[0])$(this).next("option").prop("selected",true);else if($(this).prev("option")[0])$(this).prev("option").prop("selected",
true);$(this).remove()});$(".saveName:button").prop("disabled",false).removeClass("disable");DDM.updateFileNamePreview();$("#list1").trigger("change")});$(document).off("click.removeBtn").on("click.removeBtn","#removeBtn",function(){var selectedCnt=$("#list2 > option:selected").length;$("#list2 > option:selected").each(function(idx){$("#list1").append("<option value='"+$(this).val()+"'>"+$(this).text()+"</option>");if(idx==selectedCnt-1)if($(this).next("option")[0])$(this).next("option").prop("selected",
true);else if($(this).prev("option")[0])$(this).prev("option").prop("selected",true);$(this).remove()});$("#addBtn:button").prop("disabled",false).removeClass("disable");DDM.updateFileNamePreview();$("#list2").trigger("change")});$(document).off("click.upBtn").on("click.upBtn","#upBtn",function(){var selectedOption=$("#list2 > option:selected");var prevOption=$("#list2 > option:selected").prev("option");if($(prevOption).text()!=""){$("#list2 > option").prop("selected",false);$(prevOption).before($(selectedOption).clone());
$(prevOption).prev("option").prop("selected",true);$(selectedOption).remove();DDM.updateFileNamePreview();$("#list2").trigger("change")}});$(document).off("click.downBtn").on("click.downBtn","#downBtn",function(){var selectedOption=$("#list2 > option:selected");var nextOption=$("#list2 > option:selected").next("option");if($(nextOption).text()!=""){$("#list2 > option").prop("selected",false);$(nextOption).after($(selectedOption).clone());$(nextOption).next("option").prop("selected",true);$(selectedOption).remove();
DDM.updateFileNamePreview();$("#list2").trigger("change")}});$(document).off("keyup.customText").on("keyup.customText","#customText",function(){DDM.updateFileNamePreview()});$(document).off("change.customPos").on("change.customPos",".customPos",function(){DDM.updateFileNamePreview()});$("#appDialog #list1").focus();DDM.popupTabwrap();e.preventDefault()},deleteNamingScheme:function(e){if($("#naming option").length<=1){if(!$("#filesTemplate .alertMesg")[0])$("#filesTemplate .namingSchems").prepend('<div class="alertMesg notify">');
$("#filesTemplate .alertMesg").html('<span class="alertImg icon">&nbsp;</span><span class="alertText">You must have at least 1 document file naming convention in the dropdown list</span>');return}var schemeId=$("#naming option:selected").val();$("#naming option:selected").remove();$.each(DDM.namingSchemes,function(i,ns){if(ns["schemeId"]==schemeId){DDM.namingSchemes.splice(i,1);return false}});DDM.saveNamingScheme(DDM.namingSchemes);e.preventDefault()},updateFileNamePreview:function(){var nameParts=
[];$("#list2 > option").each(function(){nameParts.push($(this).val())});if(nameParts.length<=0&&$("#customText").val()==""){$("#example").html("");return}var previewText="";var firstDoc="";if(DDM.jsonData&&DDM.jsonData.metaData.length>=1){firstDoc=DDM.jsonData.metaData[0];$(nameParts).each(function(idx){if(firstDoc[this.toString()]!=undefined&&firstDoc[this.toString()]!=""){previewText+=$.trim(firstDoc[this.toString()]);if(idx<nameParts.length-1)previewText+="_"}})}if($("#customText").val()!=""){var customtext=
$("#customText").val();if($("#prefix").is(":checked"))if(previewText!="")previewText=customtext+"_"+previewText;else previewText=customtext;else if($("#suffix").is(":checked"))if(previewText!="")previewText=previewText+"_"+$.trim($("#customText").val());else previewText=customtext}previewText=previewText.replace(/([^a-z0-9_]+)/gi,"-");previewText="<strong>File name preview : </strong> <br>"+previewText;previewText+=".pdf";$("#example").html(previewText)},goToFileList:function(e){$("#appDialog #namingTemplate").hide();
var schemeId="";var newName=false;if($(e.currentTarget).hasClass("saveName")&&$("#list2 option").length>0){var partCodes=[];var prefix="";var suffix="";$("#list2 option").each(function(){partCodes.push($(this).val());if(schemeId!="")schemeId+="_";schemeId+="("+$(this).text()+")"});if($("#customText").val()!=""){var customText=$("#customText").val();customText=customText.replace(/([^a-z0-9_]+)/gi,"-");if($("#prefix").is(":checked")){prefix=customText;if(schemeId!="")schemeId=prefix+"_"+schemeId;else schemeId=
prefix}else{suffix=customText;if(schemeId!="")schemeId=schemeId+"_"+suffix;else schemeId=suffix}}DDM.namingSchemes.unshift({"partCodes":partCodes,"schemeId":schemeId,"customPrefix":prefix,"customSuffix":suffix});DDM.namingSchemes=_.uniq(DDM.namingSchemes,false,function(n){return n.schemeId});DDM.saveNamingScheme(DDM.namingSchemes);newName=true}DDM.generateDownloadScreen(DDM.requestJson,newName);if(schemeId!="")$("#naming").val(schemeId)},closeModalWindow:function(e){e.preventDefault();$("#appDialog,#appBackground,#namingTemplate,#resultTemplate").hide();
$("#appDialog #filesTemplate").show();$("#appDialog #ddmNewformatHelp").hide();$("#appDialog #ddmMainHelp").show()},downloadPdfs:function(){var ipJson=DDM.formRequestJson();$('<form action="'+SDM.pf.ddm.endpoint+'"'+' method="post">'+'<input type="hidden" name="jsonInput" value="'+encodeURIComponent(ipJson)+'" ></form>').appendTo("body").submit().remove()},formRequestJson:function(){var requestObj=new Object;if(DDM.requestJson){var docs=DDM.requestJson.metaData;var docArray=new Array;$.each(docs,
function(i,item){var doc=new Object;doc.pdfEid=item.pdfEid;doc.entitled=item.entitled=="Y";doc.pdfUrl=item.pdfUrl;doc.htmlUrl=item.htmlUrl;doc.httpReferer=item.httpReferer;var pdfName=DDM.getPdfName(item);doc.pdfName=pdfName;docArray.push(doc)})}requestObj.pdfArray=docArray;requestObj.sid=DDM.requestJson.sid;requestObj.sid_v=DDM.requestJson.sid_v;requestObj.euid=DDM.requestJson.euid;requestObj.sessId=DDM.requestJson.sessId;requestObj.utt=DDM.requestJson.utt;return JSON.stringify(requestObj)},getPdfName:function(doc){var pdfName=
"";if(DDM.requestJson){var userSelection=$("#naming").find(":selected").val();$(DDM.namingSchemes).each(function(){if(this.schemeId==userSelection){selectednamingScheme=this;return false}});var nameParts=selectednamingScheme.partCodes;$(nameParts).each(function(idx){if(doc[this.toString()]!=undefined&&doc[this.toString()]!=""){pdfName+=$.trim(doc[this.toString()]);if(idx<nameParts.length-1)pdfName+="_"}});if(selectednamingScheme.customPrefix!=undefined&&selectednamingScheme.customPrefix!="")if(pdfName!=
"")pdfName=selectednamingScheme.customPrefix+"_"+pdfName;else pdfName=selectednamingScheme.customPrefix;if(selectednamingScheme.customSuffix!=undefined&&selectednamingScheme.customSuffix!="")if(pdfName!="")pdfName=pdfName+"_"+selectednamingScheme.customSuffix;else pdfName=selectednamingScheme.customSuffix;pdfName=pdfName.replace(/([^a-z0-9_]+)/gi,"-");if(pdfName.length>150)pdfName=pdfName.substr(0,150);return pdfName}},handleSelectedBits:function(){$("#list1 > option:selected").each(function(idx){$(this).prop("selected",
false)});$("#removeBtn:button,#upBtn:button,#downBtn:button,.saveName:button").prop("disabled",false).removeClass("disable");var selectedOption=$(this).find("option:selected").size();if(selectedOption>1){$("#upBtn:button,#downBtn:button").prop("disabled",true).addClass("disable");return}var noOfOptions="";noOfOptions=$(this).find("option").size();if(noOfOptions==0)$("#removeBtn:button,#upBtn:button,#downBtn:button,.saveName:button").prop("disabled",true).addClass("disable");else if(noOfOptions==1)$("#upBtn,#downBtn").prop("disabled",
true).addClass("disable");else if(noOfOptions>1)if(this.selectedIndex==0)$("#upBtn").prop("disabled",true).addClass("disable");else if(this.selectedIndex==noOfOptions-1)$("#downBtn").prop("disabled",true).addClass("disable")},handleAvailableBits:function(){if($("#list1 > option").length>0)$("#addBtn:button").prop("disabled",false).removeClass("disable");else $("#addBtn:button").prop("disabled",true).addClass("disable");$("#removeBtn:button,#upBtn:button,#downBtn:button").prop("disabled",true).addClass("disable");
$("#list2 > option:selected").each(function(idx){$(this).prop("selected",false)})},buildPartNameMap:function(){DDM.partNameMap=new Object;DDM.partNameMap["Document Title"]="translatedDocTitle";DDM.partNameMap["Publication Year"]="pubYear";DDM.partNameMap["Publication Name"]="pubTitle";DDM.partNameMap["First Author"]="author";DDM.partNameMap["First Page"]="startPage";DDM.partNameMap["Last Page"]="endPage";DDM.partNameMap["Volume Number"]="volume";DDM.partNameMap["Issue"]="issue";DDM.partNameMap["ISSN/ISBN"]=
"issnisbn"},initPredefinedNames:function(){DDM.predefinedNames.push("(Document Title)_(Publication Year)_(Publication Name)");DDM.predefinedNames.push("(First Author)_(Publication Year)_(Publication Name)")},getNamingSchemes:function(){if(SDU.cookieAvail()&&SDU.localStorageAvail()){var ns=localStorage.getItem("ddm.ns");if(ns)DDM.namingSchemes=$.parseJSON(ns);else DDM.loadNamingSchmes()}else if(!DDM.namingSchemes)DDM.loadNamingSchmes()},loadNamingSchmes:function(){var nsArray=[];$.each(DDM.predefinedNames,
function(i,name){var ns=new Object;ns.schemeId=name;var pcArray=[];var pcs=name.split("_");$.each(pcs,function(i,item){item=item.replace(/[\(\)]/g,"");var pc=DDM.partNameMap[item];if(pc!=undefined||pc!="")pcArray.push(pc)});ns.partCodes=pcArray;ns.customPrefix="";ns.customSuffix="";nsArray.push(ns)});DDM.namingSchemes=nsArray;DDM.saveNamingScheme(DDM.namingSchemes)},saveNamingScheme:function(ns){if(SDU.cookieAvail()&&(SDU.localStorageAvail()&&typeof JSON!="undefined"))localStorage.setItem("ddm.ns",
JSON.stringify(ns))},popupTabwrap:function(){var obj=$("#appDialog");obj.find("a:last").keydown(function(e){if(e.keyCode==9&&!e.shiftKey){e.preventDefault();$(obj).find("a:first").focus()}});obj.find("a:first").keydown(function(e){if(e.keyCode==9&&e.shiftKey){e.preventDefault();$(obj).find("a:last").focus()}})}};var AltMetric={altMetricJSON:null,init:function(){if(!SDM.pm.altmetric_avail)return;AltMetric.getAltMetricInfo()},getAltMetricInfo:function(){var altMetricURL=SDM.ep.urlPrefix+"/altmetric/"+SDM.pm.doi;try{$.get(altMetricURL,function(response){AltMetric.altMetricJSON=response;AltMetric.buildMetricSidebar()})}catch(err){return}},buildMetricSidebar:function(){var colorCodes={news:"#FF0000",blogs:"#FFD140",twitter:"#74CFED",facebook:"#2445BD",googleplus:"#E065BB",linkedin:"#1E90FF",reddit:"#D5E8F0",f1000:"#F4006E",
pinterest:"#CC6600",video:"#94DB5E",wikipedia:"#958899",peer_reviews:"#BDBDBD",weibo:"#FFB33B",mendeley:"#A60000",citeulike:"#BCD2EF",connotea:"#FF4040",policy:"#9f79f2"};var res=$.parseJSON(AltMetric.altMetricJSON);if(res){$("#metrics").css("display","block");var metric_details="";if(res.images&&res.images.medium)metric_details+='<a class="badge" target="_blank" href="http://www.altmetric.com/details.php?template=sciencedirect&doi='+SDM.pm.doi+'" title="Altmetric score of '+Math.ceil(res.score)+
'. Open Altmetric details page"><img width="120px" height="18px" style="border:0; margin:0;" src="'+res.images.medium+'&style=bar" alt="Altmetric score of '+Math.ceil(res.score)+'. Open Altmetric details page"/>';if(res.score)metric_details+='<span class="score">'+Math.ceil(res.score)+"</span> </a>";metric_details+='<div class="metrichelp"><a aria-describedby="metrics_info" href="'+SDM.pm.altmetric_helpurl+'" target="sdhelp" title="Help (Opens new window)" onClick="var helpWin; helpWin=window.open(\''+
SDM.pm.altmetric_helpurl+"','sdhelp','scrollbars=yes,resizable=yes,directories=no,toolbar=no,menubar=no,status=no,width=984,height=738'); helpWin.focus()\" class=\"noul icon_qmarkHelp"+SD_UTIL.getProdColor()+'">Help</a></div>';metric_details+='<ul class="metric_list">';if(res.counts.news&&res.counts.news.unique_users_count){source="news outlet";if(res.counts.news.unique_users_count>1)source+="s";metric_details+='<li class="details" style="border-left: 9px solid '+colorCodes.news+';">'+res.counts.news.unique_users_count+
" "+source+"</li>"}if(res.counts.blogs&&res.counts.blogs.unique_users_count){source="blog";if(res.counts.blogs.unique_users_count>1)source+="s";metric_details+='<li class="details" style="border-left: 9px solid '+colorCodes.blogs+';">'+res.counts.blogs.unique_users_count+" "+source+"</li>"}if(res.counts.twitter&&res.counts.twitter.unique_users_count){source="Tweeter";if(res.counts.twitter.unique_users_count>1)source+="s";metric_details+='<li class="details" style="border-left: 9px solid '+colorCodes.twitter+
';">'+res.counts.twitter.unique_users_count+" "+source+"</li>"}if(res.counts.facebook&&res.counts.facebook.unique_users_count){source="Facebook user";if(res.counts.facebook.unique_users_count>1)source+="s";metric_details+='<li class="details" style="border-left: 9px solid '+colorCodes.facebook+';">'+res.counts.facebook.unique_users_count+" "+source+"</li>"}if(res.counts.googleplus&&res.counts.googleplus.unique_users_count){source="Google+ user";if(res.counts.googleplus.unique_users_count>1)source+=
"s";metric_details+='<li class="details" style="border-left: 9px solid '+colorCodes.googleplus+';">'+res.counts.googleplus.unique_users_count+" "+source+"</li>"}if(res.counts.linkedin&&res.counts.linkedin.unique_users_count){source="LinkedIn user";if(res.counts.linkedin.unique_users_count>1)source+="s";metric_details+='<li class="details" style="border-left: 9px solid '+colorCodes.linkedin+';">'+res.counts.linkedin.unique_users_count+" "+source+"</li>"}if(res.counts.reddit&&res.counts.reddit.unique_users_count){source=
"Redditor";if(res.counts.reddit.unique_users_count>1)source+="s";metric_details+='<li class="details" style="border-left: 9px solid '+colorCodes.reddit+';">'+res.counts.reddit.unique_users_count+" "+source+"</li>"}if(res.counts.f1000&&res.counts.f1000.unique_users_count){source="research highlight platform";if(res.counts.f1000.unique_users_count>1)source+="s";metric_details+='<li class="details" style="border-left: 9px solid '+colorCodes.f1000+';">'+res.counts.f1000.unique_users_count+" "+source+
"</li>"}if(res.counts.pinterest&&res.counts.pinterest.unique_users_count){source="Pinner";if(res.counts.pinterest.unique_users_count>1)source+="s";metric_details+='<li class="details" style="border-left: 9px solid '+colorCodes.pinterest+';">'+res.counts.pinterest.unique_users_count+" "+source+"</li>"}if(res.counts.video&&res.counts.video.unique_users_count){source="video uploader";if(res.counts.video.unique_users_count>1)source+="s";metric_details+='<li class="details" style="border-left: 9px solid '+
colorCodes.video+';">'+res.counts.video.unique_users_count+" "+source+"</li>"}if(res.counts.wikipedia&&res.counts.wikipedia.unique_users_count){source="Wikipedia page";if(res.counts.wikipedia.unique_users_count>1)source+="s";metric_details+='<li class="details" style="border-left: 9px solid '+colorCodes.wikipedia+';">'+res.counts.wikipedia.unique_users_count+" "+source+"</li>"}if(res.counts.peer_reviews&&res.counts.peer_reviews.unique_users_count){source="peer review site";if(res.counts.peer_reviews.unique_users_count>
1)source+="s";metric_details+='<li class="details" style="border-left: 9px solid '+colorCodes.peer_reviews+';">'+res.counts.peer_reviews.unique_users_count+" "+source+"</li>"}if(res.counts.weibo&&res.counts.weibo.unique_users_count){source="weibo user";if(res.counts.weibo.unique_users_count>1)source+="s";metric_details+='<li class="details" style="border-left: 9px solid '+colorCodes.weibo+';">'+res.counts.weibo.unique_users_count+" "+source+"</li>"}if(res.counts.policy&&res.counts.policy.unique_users_count){source=
"policy source";if(res.counts.policy.unique_users_count>1)source+="s";metric_details+='<li class="details" style="border-left: 9px solid '+colorCodes.policy+';">'+res.counts.policy.unique_users_count+" "+source+"</li>"}metric_details+="</ul>";if(res.counts.readers){if(res.counts.readers.mendeley>0||(res.counts.readers.citeulike>0||res.counts.readers.connotea>0))metric_details+='<div class="metric_references"> <div><h3>Saved to reference managers</h3></div>';metric_details+='<ul class="metric_refence_list">';
if(res.counts.readers.mendeley&&res.counts.readers.mendeley>0){source="Mendeley reader";if(res.counts.readers.mendeley>1)source+="s";metric_details+='<li class="details" style="border-left: 9px solid '+colorCodes.mendeley+';">'+res.counts.readers.mendeley+" "+source+"</li>"}if(res.counts.readers.citeulike&&res.counts.readers.citeulike>0)metric_details+='<li class="details" style="border-left: 9px solid '+colorCodes.citeulike+';">'+res.counts.readers.citeulike+" CiteULike</li>";if(res.counts.readers.connotea&&
res.counts.readers.connotea>0)metric_details+='<li class="details" style="border-left: 9px solid '+colorCodes.connotea+';">'+res.counts.readers.connotea+" Connotea</li>";metric_details+="</ul>";if(res.counts.readers.mendeley>0||(res.counts.readers.citeulike>0||res.counts.readers.connotea>0))metric_details+="</div>"}metric_details+='<div class="moreMetricDetails"> <a aria-describedby="metrics_info"  aria-haspopup="true" href="http://www.altmetric.com/details.php?template=sciencedirect&doi='+SDM.pm.doi+
'">View more details &raquo;</a></div>';$("#metric_details").append(metric_details);AltMetric.addEventHandlers()}},addEventHandlers:function(){$("body").on("click",".closeFullScreen",function(e){e.preventDefault();$(".metrics_fullscreen, .metrics_overlay").css("display","none");$("body").css("overflow","auto")});$(window).resize(function(){AltMetric.adjustFullscreenView()});$("body").on("click","div.moreMetricDetails a, a.badge",function(e){e.preventDefault();AltMetric.fullScreenView()})},adjustFullscreenView:function(){var screenHeight=
$(window).height()-100;var screenWidth=$(window).width()-50;var iframeheight=screenHeight-35;$(".metrics_fullscreen").css("margin-top",$(window).scrollTop()+50);$(".metrics_fullscreen").css("margin-left",$(window).scrollLeft()+25);$(".metrics_overlay").css("top",$(window).scrollTop());$(".metrics_overlay").css("left",$(window).scrollLeft());$(".metrics_fullscreen, .metric_container").css({"width":screenWidth,"height":screenHeight});$(".metrics_overlay").css({"width":$(window).width(),"height":$(window).height()});
$(".metrics_fullscreen iframe").css({"width":screenWidth,"height":iframeheight})},fullScreenView:function(){if(!$(".metrics_fullscreen")[0]){$("body").append('<div class="metrics_fullscreen" id="metrics_information"><div class="metric_container"></div></div>');$("body").append('<div class="metrics_overlay"></div>');$(".metric_container").append('<div class="curveBoxRight ActiveGadget"><img src="http://ae-content.elsevier.com/svapp/322054/prod/smicon.png" border="none" class="headingGadgetIcon" title="Altmetric for ScienceDirect"><h3 id="GadgetName7" class="elsevierTimeLOver" tabindex="-1" style="cursor: auto;">Altmetric for ScienceDirect</h3><div class="CanvasControls"><ul><li> <a href="#" class="closeFullScreen" alt="Close Altmetric for ScienceDirect details" title="Close Altmetric for ScienceDirect details"><img style="border: 0px;" src="http://www.sciencedirect.com/gadgetservices/gadgets/v7/images/close_hoover.gif"/></a></li></ul></div><div class="clear"></div></div>');
$(".metric_container").append('<iframe src="http://www.altmetric.com/details.php?template=sciencedirect&doi='+SDM.pm.doi+'"></iframe>');$(".metrics_fullscreen, .metrics_overlay").css("display","block");$("body").css("overflow","hidden");AltMetric.adjustFullscreenView()}else{$(".metrics_fullscreen, .metrics_overlay").css("display","block");$("body").css("overflow","hidden");AltMetric.adjustFullscreenView()}$(".metrics_fullscreen h3").focus()}};var AuthorAccess={init:function(){if(SDM.authoraccess)if(!$(".authClaimSuccess").length){var h='<div class="authClaim page_fragment_ind"><div class="successMsgBox">';h+='<div class="imgIcon">';h+='<img title="Success" alt="Success" src="'+SDM.ep.staticImgUrlPrefix+'/successIcon.gif" />';h+="</div>";h+='<div class="authClaimSuccess" >You have successfully claimed authorship of this article on ScienceDirect.';h+='<span class="closeTool">';h+='<a id="closeMsg" onclick="AuthorAccess.closeAuthClaimSuccessMsg()"  tabindex="0" >';
h+='<img alt="Close subject area Dialog" title="Close subject area Dialog" src="'+SDM.ep.staticImgUrlPrefix+'/grey_close-btn.png"/>';h+="</a>";h+="</span></div></div></div>";$(".centerInner").prepend(h);$(".authClaim").css("padding-bottom","4px");$(".successMsgBox").css("display","block")}},closeAuthClaimSuccessMsg:function(){$(".authClaim .successMsgBox").hide()}};
var SDWebExport={init:function(){$("body").on("click","a.ppt",SDWebExport.downloadPPT)},downloadPPT:function(e){e.preventDefault();var ipJson=SDWebExport.formRequestJson(e);var url=SDM.pm.pptURL+SDM.pm.pii+"/ppt";$('<form action="'+url+'"'+' method="post">'+'<input type="hidden" name="jsonInput" value="'+encodeURIComponent(ipJson)+'" ></form>').appendTo("body").submit()},formRequestJson:function(e){var obj=e.target;var caption=SDWebExport.getCaption(obj);var imageId=SDWebExport.getImageID(obj);var requestObj=
new Object;requestObj.title=SDWebExport.getTitle();requestObj.authors=SDWebExport.getAuthors();requestObj.copyright=SDWebExport.getCopyRight(obj);var pubYear=SDM.pm.coverDate;var dates=pubYear.split("-");pubYear=dates.pop();requestObj.publicationYear=pubYear;requestObj.displayName=SDWebExport.getDisplayName();requestObj.issue=SDWebExport.getIssue();requestObj.caption=caption;requestObj.pg=SDWebExport.getPg();requestObj.doi=SDM.pm.doi;requestObj.collectionId=SDM.pm.cid;requestObj.label=SDWebExport.getDisplayName();
requestObj.imageId=imageId;return JSON.stringify(requestObj);e.preventDefault()},getCaption:function(obj){return $(obj).closest("dl.figure").find("div.caption").html()},getTitle:function(){return $("div.centerInner").find("h1.svTitle").text()},getAuthors:function(){return $("ul.authorGroup a.authorName").map(function(){return $(this).text()}).get().join(",  ")},getImageID:function(obj){return $(obj).closest("dl.figure").find("a.figureLink").find("img").attr("data-imgEIDs")},getCopyRight:function(){return $("p.copyright").text()},
getDisplayName:function(){return $("div.publicationHead").find("div.title").find("span").text()},getIssue:function(){return $("div.publicationHead").find("p.volIssue").find("a").text()},getPg:function(){var pg=$("div.publicationHead").find("p.volIssue").text();var pos=pg.split("Pages ");pg=pos.pop();return pg}};
function loadSocialLoginOptions(socialContainer){var socialLoginURL=SDM.ep.urlPrefix+"/getSocialIds";var providerName="";try{$.get(socialLoginURL,function(res){if(res){var obj=$.parseJSON(res);var pro=obj.SocialLoginProviders;$.each(pro,function(){if(providerName!="")providerName+=",";providerName+=this.providerName});gigya.socialize.showLoginUI({showTermsLink:false,authCodeOnly:true,width:"258px",height:"30px",UIConfig:'<config><body><controls><snbuttons buttonsize="20"></snbuttons></controls></body></config>',
authFlow:"redirect",containerID:socialContainer,hideGigyaLink:true,enabledProviders:providerName,onLoad:function(obj){socialLogin.init(obj.containerID)}})}})}catch(err){return}}
var socialLogin={init:function(containerID){var targetElm=$("#"+containerID).find("[gigid]").parent();$(targetElm).each(function(){if($(this).attr("title")=="OpenID")$(this).attr("title","Use your "+$(this).attr("title")+" username to sign in to ScienceDirect");else $(this).attr("title","Use your "+$(this).attr("title")+" account to sign in to ScienceDirect");$(this).attr("tabindex","0")})}};var refResolveEnabled=true;var moreInfoDisplayed=false;var dynamicsAdded=false;var curTmpFrag=1;var sE="#centerInner dl.figure, #centerInner dl.table, #centerInner dl.ecomponent,#centerInner h2, #centerInner h3, #centerInner h4";
var uE="#centerInner div.articleOutlineHidden h2, #centerInner div.articleOutlineHidden h3, #centerInner div.articleOutlineHidden h4";
function initializeArticlePage(){ArticlePage=function(){var autoHide=0;var page={objLColumn:$("#leftPane"),objCColumn:$(window),selectorE:sE,selectorUE:uE,selectorE_BK:sE,selectorUE_BK:uE,boomboxAd:{width:280},ready:false,opts:{empty:false,selector:"",focusEffect:false,focus:{cssFocusFirst:"outlineFocusFirst",cssFocus:"outlineFocus",cssFocusLast:"outlineFocusLast",scrollSyncSel:window,contentArea:"centerPane",idConvert:function(s){return"ol_"+s}}},addDynamics:function(fragId){page.setDefaultWidths();
var scope="#centerInner";if(typeof fragId!="undefined")scope="#"+fragId;$(scope+" dl.figure dd a.linkText").hide();if(!Fragment.isAvail()){if($(scope+" .doiLink").length&&(SDM.pm.doi!=undefined&&SDM.pm.doi!="")){var doiHtml="";doiHtml+='<dd class="doi">';doiHtml+='<a id="ddDoi" class="S_C_ddDoi" href="http://dx.doi.org/'+SDM.pm.doi+'" target="doilink" onclick="var doiWin; doiWin=window.open('+"'http://dx.doi.org/"+SDM.pm.doi+"','doilink','scrollbars=yes,resizable=yes,directories=yes,toolbar=yes,menubar=yes,status=yes'); doiWin.focus()"+
'">doi:'+SDM.pm.doi+"</a>";doiHtml+="</dd>";$(scope+" .doiLink").html(doiHtml)}if(SDM.dac.rightsLink)$(scope+" .rightsLink").html(SDM.dac.rightsLink)}if(!$(".extLinks.nonEmpty").length)$(".extLinks").addClass("nonEmpty");if(typeof fragId!="undefined"&&dynamicsAdded)return;AuthorAccess.init();if(!Fragment.isAvail())if($(".lightWeight").length){var obj=$(".lightWeight").parent().html();obj=obj.replace('class="icon_pdf toolbar lightWeight"','class="icon_pdf toolbar lightWeight additional"');obj=obj.replace('id="pdfLink"',
'id="addPdfLink"');obj=obj.replace("_zone=toolbar","_zone=workspace");if($(".svAbstract").length)if($("#embeddedPDF"))$("#embeddedPDF").after(obj);else if($(".svKeywords").length)$(".keyword:last").after(obj);else $(".svAbstract:last").after(obj);else if($("#excerptPlaceholder").length)$("#excerptPlaceholder").after(obj);else if($("#embeddedPDF").length)$("#embeddedPDF").after(obj);else if($(".extLinks").length)$(".extLinks").after(obj);PDFIcon.init()}$("#centerInner").off("click","li.collabWithAuthorsCollapse a.collabText").on("click",
"li.collabWithAuthorsCollapse a.collabText",function(e){page.hideShowCollab(e,this,true)});$("#centerInner").off("click","a.mathImg , span.formulatext").on("click","a.mathImg , span.formulatext",function(e){page.submitCitation(e,this)});if(SDU.isIE78()){$(window).resize(function(){page.delay(function(){page.setPaneWidths()},500)});$("#articleToolbar").addClass("toolbarFix")}else{if(SDU.isIE9())$("#articleToolbar").addClass("toolbarFix");$(window).resize(_.debounce(page.setPaneWidths,500))}page.setPaneWidths();
setQuickSearch();$(window).resize(function(){ArticlePage.setDefaultWidths();setQuickSearch()});$(window).scrollTop(0);dynamicsAdded=true},delay:function(callback,ms){var timer=0;clearTimeout(timer);timer=setTimeout(callback,ms)},toggleOptions:function(e,obj){var menuBtn=$(obj).parents("dd.menuButtonLinks").find("ul.menuButton");if($(menuBtn)[0])if($(menuBtn).is(":visible")){$(menuBtn).hide("blind");$(obj).parent().find("div").removeClass("up_Btn");$(document).off("click","body, .menuButton .viewWS",
page.closeOptions)}else{page.closeOptions();$(menuBtn).show("blind");$(obj).parent().find("div").addClass("up_Btn");$(document).on("click","body, .menuButton .viewWS",page.closeOptions)}$(window).bind("scroll",ArticlePage.closeOptions);SD_UTIL.killEvent(e)},closeOptions:function(e){$(document).off("click","body, .menuButton .viewWS",page.closeOptions);$(".menuButtonLinks ul.menuButton").each(function(){if($(this).is(":visible")){$(this).parent(".menuButtonLinks").find("div").removeClass("up_Btn");
$(this).hide("blind")}})},hideShowCollab:function(e,obj,startClosed){e.preventDefault();if(startClosed){page.setLoadedAuthDisplay();if(typeof Fragment.authMap!="undefined"){var authMap=Fragment.authMap;var max=authMap.length;var start=0;var len=0;for(var i=0;i<max;i++){var fragId=authMap[i].fid;if(!$("#"+fragId).length)if(start==0)start=fragId.substr(fragId.indexOf("_")+1)*1;else len++;else $("#"+fragId).show()}if(start>0&&len>0)Fragment.getBatch({s:start,l:len,f:function(){setTimeout(function(){page.setLoadedAuthDisplay()},
100)}})}if($(obj).hasClass("collabOpened"))$(obj).removeClass("collabOpened").addClass("collabClosed");else $(obj).removeClass("collabClosed").addClass("collabOpened")}if($(obj).parent().children(".hideShow").css("display")!="block"){if($(".showInfo").hasClass("open"))$(obj).parent().children(".hideShow").css("display","block");else $(obj).parent().children(".hideShow:lt(5)").css("display","block");$(obj).parent().children(".hideShow").children().css("display","block");$(obj).css("background",'url("/sd/minus_lt.png") no-repeat scroll 0 5px transparent')}else{$(obj).parent().children(".hideShow").css("display",
"none");$(obj).css("background",'url("/sd/plus_lt.png") no-repeat scroll 0 5px transparent')}},submitCitation:function(e,obj){var authorStr="";$(".authorGroup").each(function(){if($(this).hasClass("noCollab")){$(this).find(".authorName").each(function(){if(!$(this).parents(".collab")[0]){if(authorStr!=""&&!$(this).hasClass("text"))authorStr+=", ";authorStr+=$(this).text();var authDegree=$(this).next("span.authorDegrees");if(authDegree!=null&&$(authDegree).text()!=""){authorStr+=", ";authorStr+=$(authDegree).text()}}});
var collab=$(this).find(".collab");if(collab!=null&&$(collab).text()!=""){authorStr+=", ";authorStr+=$(collab).find(".collabText").text()}if($(collab).find(".authorGroup")[0]){var collabAuthors=$(collab).find(".authorGroup");var collabAuthorStr="";authorStr+=" (";$(collabAuthors).find(".authorName").each(function(){if(collabAuthorStr!="")collabAuthorStr+=", ";collabAuthorStr+=$(this).text();var authDegree=$(this).next("span.authorDegrees");if(authDegree!=null&&$(authDegree).text()!=""){collabAuthorStr+=
", ";collabAuthorStr+=$(authDegree).text()}});authorStr+=collabAuthorStr;authorStr+=")"}}});var artTitleObj=$(".svTitle").clone();artTitleObj.find("noscript").remove();var articleTitle=artTitleObj.text();var doiLink="http://dx.doi.org/"+SDM.pm.doi;var pubTitle=$(".publicationHead div.title").text();if(pubTitle=="")pubTitle=$(".publicationHead div.title").find("img").attr("alt");var volIssueDetails=$(".publicationHead p.volIssue").text();var specIssueDetails=$(".publicationHead p.specIssueTitle").text();
articleTitle+=authorStr+" \r\n";articleTitle+="Published in:\r\n"+pubTitle+" \r\n"+volIssueDetails+" \r\n"+doiLink;var actionUrl=$(obj).attr("data-mathURL");$("#citationInfo input[name='art_citation']").val(articleTitle);$("#citationInfo").attr("action",actionUrl);$("#citationInfo").submit()},setDefaultWidths:function(){$(".appContainer.fixedPane").css("visibility","hidden");$("#rightPane").css("width","300px")},setPaneWidths:function(){var vpHeight=$(window).height();if($(window).height()>$("body").height())pgLayout.vpWidth=
$(window).width()-$.scrollBarWidth();else pgLayout.vpWidth=$(window).width();pgLayout.lcWidth=260;pgLayout.ccWidth=680;pgLayout.rcWidth=300;pgLayout.lcLeft=3;$("body").css({"max-width":"","min-width":""});if(1366<=pgLayout.vpWidth){pgLayout.vpWidth=1366;pgLayout.lcWidth=260;$("#leftButton,#leftPane,#outlineContainer,.articleInternal").removeClass("small off").css("top","");pgLayout.rcWidth=pgLayout.vpWidth-pgLayout.lcWidth-pgLayout.ccWidth-1;pgLayout.showLeftBar=true;$("#bannerTop").removeClass("resizedBanner");
$("#page-area .quicksearch").removeClass("addPadding");$("#header .headerBlk .home a").removeClass("padLeft")}else if(1280-$.scrollBarWidth()<=pgLayout.vpWidth){pgLayout.lcWidth=260;$("#leftButton,#leftPane,#outlineContainer,.articleInternal").removeClass("small off").css("top","");pgLayout.rcWidth=pgLayout.vpWidth-pgLayout.lcWidth-pgLayout.ccWidth-1;pgLayout.showLeftBar=true;$("#bannerTop").removeClass("resizedBanner");$("#page-area .quicksearch").removeClass("addPadding");$("#header .headerBlk .home a").removeClass("padLeft")}else if(1024-
$.scrollBarWidth()<=pgLayout.vpWidth){if(pgLayout.vpWidth<1240){pgLayout.lcWidth=28;if(pgLayout.vpWidth<1008)pgLayout.vpWidth=1008;$("#leftButton,#leftPane,#outlineContainer,.articleInternal").removeClass("on").addClass("small");$("body").css("max-width","1074px");pgLayout.showLeftBar=false}else{pgLayout.lcWidth=260;$("#leftButton,#leftPane,#outlineContainer,.articleInternal").removeClass("small off").css("top","");pgLayout.showLeftBar=true;$("body").css("max-width","")}pgLayout.rcWidth=pgLayout.vpWidth-
pgLayout.lcWidth-pgLayout.ccWidth-1;$("#bannerTop").removeClass("resizedBanner");$("#page-area .quicksearch").removeClass("addPadding");$("#header .headerBlk .home a").removeClass("padLeft")}else{pgLayout.vpWidth=1008;pgLayout.lcWidth=28;$("#leftButton,#leftPane,#outlineContainer,.articleInternal").removeClass("on").addClass("small");pgLayout.rcWidth=pgLayout.vpWidth-pgLayout.lcWidth-pgLayout.ccWidth-1;pgLayout.showLeftBar=false;$("#bannerTop").addClass("resizedBanner");$("#page-area .quicksearch").addClass("addPadding");
$("#header .headerBlk .home a").addClass("padLeft")}pgLayout.lcWidth=260;if(pgLayout.showLeftBar==false)$("div#articleNav").css("margin-left",6);else $("div#articleNav").css("margin-left",237);pgLayout.ccLeft=pgLayout.lcLeft+pgLayout.lcWidth;if(pgLayout.lcWidth<=20)pgLayout.ccLeft-=2;$("#rightPane,.appContainer.fixedPane").css("width",pgLayout.rcWidth);$("#leftPaneInner").not(".fixedPane").height(vpHeight-($("#header-area").height()-$("body").scrollTop())-$("#articleToolbar").outerHeight()-2);$("#leftPaneInner.fixedPane").width($("#leftPane").width());
$("#rightOuter").height($("#rightInner").height());if($("#rightInner").height()+$(".appContainer.fixedPane").height()>$("#centerPane").height())if($("#rightInner").height()>$("#page-area").height())$("#rightOuter").height($("#rightInner").height()-1);else $("#rightOuter").height($("#page-area").height()-$("#articleToolbar").outerHeight()-1);else if($("#centerPane").height()>vpHeight)$("#rightOuter").height($("#centerPane").height()-1);else $("#rightOuter").height(vpHeight-($("#header-area").height()-
$("body").scrollTop())-$("#articleToolbar").outerHeight()-1);page.viewHandler()},getCurrentImg:function(){var imgSel="img.imgLazyJSB";var totalCount=$(imgSel).size();var loopBool=true;for(i=0;i<totalCount&&loopBool==true;i++){var obj=$(imgSel)[i];if($(obj).positionA("#centerContent").top+$(obj).height()>=$(window).scrollTop()&&$(obj).positionA("#centerContent").top<=$(window).scrollTop()+$(window).height()){var imgObj=$(obj);loopBool=false}}return imgObj},lazyLoadInit:function(){$("img.imgLazyJSB").show();
$(window).lazyLoadImages({imgClass:"imgLazyJSB"});$("#outline").lazyLoadOutlineImages({imgSel:"img.smlImgLazyJSB"})},lazyLoadFragInit:function(fragId,singleFrag){$("img.imgLazyJSB").show();if(fragId!="all"&&singleFrag)$("#"+fragId).lazyLoadImages({imgClass:"imgLazyJSB"})},viewHandler:function(e){$("body").css({"min-width":""});$(".appContainer").css("visibility","");$(window).off("scroll.viewHandler",page.viewHandler);var h=$(window).height();var st=$(window).scrollTop();DBG.out(1,"viewHandler::window.height()::"+
h+"  window.scrollTop()::"+st);var toolHeight=$("#articleToolbar").outerHeight();var toolTop=$("#articleToolbar").offset().top;var prevTop=$("#articleToolbar").attr("data-top");if(st>=toolTop&&prevTop==undefined){$("#articleToolbar").attr("data-top",toolTop);$("#articleToolbar,.topBorder,#leftPaneInner").addClass("fixedPane");$("#articleToolbarDummy").show().css("height",toolHeight);$("#leftPaneInner").addClass("fixedPane").width($("#leftPane").width());$("#outlineContainer").css({"top":0})}else if(prevTop!=
undefined&&st<prevTop){$("#articleToolbar").removeAttr("data-top").removeClass("fixedPane").css("left","");$("#leftPaneInner").removeClass("fixedPane").css({"width":""}).css("left","");$(".topBorder").removeClass("fixedPane").css("left","");$("#leftPaneInner").css({"top":""});$("#leftPaneInner,#leftPane").height(h-($("#header-area").height()+toolHeight));$("#articleToolbarDummy").hide()}else{DBG.out(1,"setting leftPane height::"+h+" - ("+$("#header-area").height()+"-"+$("body").scrollTop()+") - "+
toolHeight+"-"+2);$("#leftPaneInner,#leftPane").height(h-($("#header-area").height()+toolHeight))}$("#leftPaneInner.fixedPane").height(h-toolHeight);$("#leftPaneInner.fixedPane,.topBorder.fixedPane,.appContainer.fixedPane").css("top",toolHeight);$(".fixedPane").not("#articleToolbar").each(function(){var leftPos=$(this).parent().position().left;$(this).css({"left":leftPos-$(document).scrollLeft()})});$("#rightOuter").height($("#rightInner").height());if($("#rightInner").height()+$(".appContainer.fixedPane").height()>
$("#centerPane").height())if($("#rightInner").height()>$("#page-area").height())$("#rightOuter").height($("#rightInner").height()-1);else $("#rightOuter").height($("#page-area").height()-toolHeight-1);else if($("#centerPane").height()>h)$("#rightOuter").height($("#centerPane").height()-1);else $("#rightOuter").height(h-($("#header-area").height()-$("body").scrollTop())-toolHeight-1);if($("li.exportPopupListitem")[0])$("#erToolbar > div").css("padding-left",$("li.exportPopupListitem").position().left-
10);if($(".appContainer")[0]){var appTop=$(".appContainer").offset().top;var prevScrollTop=$(".appContainer").attr("data-scroll");if(typeof prevScrollTop=="undefined")prevScrollTop=0;var scroll_delta=0;if(prevScrollTop<st)scroll_delta=st-prevScrollTop;$(".appContainer").attr("data-scroll",st);if($("#articleToolbar.fixedPane")[0])appTop-=$("#articleToolbar.fixedPane").outerHeight();var prevAppTop=$(".appContainer").attr("data-top");$(".appContainerDummy:visible").css("height",$(".appContainer").outerHeight());
if(st>=appTop-scroll_delta&&prevAppTop==undefined){$(".appContainer").css("top",toolHeight);$(".appContainer").addClass("fixedPane").attr("data-top",appTop);$(".appContainerDummy").css("height",$(".appContainer").outerHeight()).show()}else if(prevAppTop!=undefined&&st<prevAppTop){$(".appContainer").removeClass("fixedPane").removeAttr("data-top").css({"top":"","right":"","max-height":"","width":""});$(".appContainerDummy").hide()}$(".appContainer").css({"right":"","left":""});$(".appContainer.fixedPane").each(function(){var rightPos=
$(window).width()-$("#page-area").width()+$(window).scrollLeft();if($(window).width()>$("#page-area").width())rightPos=rightPos/2;$(this).css({"right":rightPos,"max-height":h-toolHeight,"width":$(this).closest("#rightPane").width()}).unbind("mouseenter mouseleave").hover(function(){$(this).css("overflow-y","auto")},function(){$(this).css("overflow-y","hidden")})})}if($("#footer-area").is(":visible")){var footTop=$("#footer-area").offset().top*1;var footHeight=$("#footer-area").outerHeight()*1;var prevFootTop=
$("#footer-area").attr("data-top");if(prevFootTop)prevFootTop=prevFootTop*1;if(st+h>=footTop+footHeight&&typeof prevFootTop=="undefined"){$("#footer-area").addClass("fixedPane").attr("data-top",$("#centerInner").height()+$("#header-area").height()+toolHeight);$("#footer-area-dummy").css("height",footHeight).show()}else if(prevFootTop!=undefined&&parseInt(st+h)<eval(parseInt($("#centerInner").height()+$("#header-area").height()+toolHeight)+parseInt(footHeight))){$("#footer-area").removeClass("fixedPane").removeAttr("data-top");
$("#footer-area-dummy").hide()}}if($(".js_workspace_content:visible")[0]){if($("#articleToolbar").hasClass("fixedPane"))var wsTop=$("#articleToolbar").outerHeight();else var wsTop=$("#articleToolbar").outerHeight()+$("#header-area").height();$(".js_workspace_content").css("top",wsTop)}if($(".js_workspace_content").is(":visible"))rightSidePane.resetWorkspace();if($("#pdfModalWindowMsgBox").is(":visible"))pdfCite.alignSuggestedArticleBox();$(window).on("scroll.viewHandler",page.viewHandler);page.adjustRightPane()},
adjustRightPane:function(){if($(window).height()>$("body").height())pgLayout.vpWidth=$(window).width()-$.scrollBarWidth();else pgLayout.vpWidth=$(window).width();pgLayout.lcWidth=260;pgLayout.ccWidth=680;pgLayout.rcWidth=300;pgLayout.lcLeft=3;$("body").css("max-width","");if(1366<=pgLayout.vpWidth){pgLayout.vpWidth=1306;pgLayout.lcWidth=260;pgLayout.rcWidth=pgLayout.vpWidth-pgLayout.lcWidth-pgLayout.ccWidth-3}else if(1280-$.scrollBarWidth()<=pgLayout.vpWidth){if(pgLayout.vpWidth>1306)pgLayout.vpWidth=
1306;pgLayout.lcWidth=260;pgLayout.rcWidth=pgLayout.vpWidth-pgLayout.lcWidth-pgLayout.ccWidth-3}else if(1024-$.scrollBarWidth()<=pgLayout.vpWidth){if(pgLayout.vpWidth<1240){pgLayout.lcWidth=28;if(pgLayout.vpWidth<1008){pgLayout.vpWidth=1008;$("body").css("max-width",pgLayout.vpWidth)}else if(pgLayout.vpWidth<1074)$("body").css("max-width",pgLayout.vpWidth);else{pgLayout.vpWidth=1074;$("body").css("max-width",pgLayout.vpWidth)}}else{pgLayout.lcWidth=260;$("body").css("max-width","")}pgLayout.rcWidth=
pgLayout.vpWidth-pgLayout.lcWidth-pgLayout.ccWidth-3}else{pgLayout.vpWidth=1008;pgLayout.lcWidth=28;pgLayout.rcWidth=pgLayout.vpWidth-pgLayout.lcWidth-pgLayout.ccWidth-3}pgLayout.lcWidth=260;if($(window).height()>$("body").height())pgLayout.rcWidth-=2;$("#rightPane,.appContainer.fixedPane").css("width",pgLayout.rcWidth)},showLeftAd:function(){if(SDM.adPreventOutline==true)return;if(typeof SDM.pf.ads.leftUrl!="undefined")$("#articleLeftAd").append('<iframe scrolling="no" frameborder="0" border="0" cellspacing="0" src="'+
SDM.pf.ads.leftUrl+'"></iframe>')},adRemoveOutline:function(){$("#articleLeftAd").remove()},touchUpLeftAd:function(){$("#articleLeftAd iframe")[0].style.height=$("#articleLeftAd iframe")[0].contentWindow.document.body.offsetHeight+"px"},updateRightAdLeftPosition:function(){var sidebarAd=$("#articleRightAd");if(sidebarAd.css("position")=="fixed"){var rightInner=$("#rightInner");sidebarAd.css({"left":rightInner.offset().left-$(window).scrollLeft()})}},doHighlighting:function(ev){var thisObj=$(ev.target).closest("a");
var linkId=thisObj.attr("href");if(Fragment.isAvail()){var $fragSet=$("#centerInner .page_fragment").filter(function(i){return MoreInformation.hideFrag($(this))});$fragSet.show()}CollapsibleTextbox.openTboxForTarget(linkId.substring(1));$("html,body").moveTo(linkId.substring(1));ev.preventDefault()},showFullTableLink:function(){$("dl.table").each(function(i){var thisObj=$(this);if($(thisObj.find(".table")).width()<$(thisObj.find("table")).width())$(thisObj.find(".fullsizeTable")).css("display","block");
if($(thisObj.find(".table")).width()<$(thisObj.find("dt img")).width())$(thisObj.find(".fullsizeTable")).css("display","block")})},searchWithinErrorMsg:function(msg){$("#searchWithin .errorMsg").remove();$("#searchWithin > div").prepend('<div class="errorMsg"><div class="msg"><div class="alertIcon"></div><span>'+msg+"</span></div></div>").addClass("bookError");$("#outline").addClass("bookError");$("#outline").css("top",24+$("#searchWithin").outerHeight())},searchWithinErrorMsgClear:function(){$("#searchWithin, #outline").removeClass("bookError");
$("#searchWithin .errorMsg").remove();$("#outline.book").css("top",24+$("#searchWithin").outerHeight())},searchWithinNoResult:function(){page.searchWithinErrorMsg("No results were found")},searchWithinNoTerms:function(){page.searchWithinErrorMsg("No search terms entered")},searchWithinInvalidSearch:function(){page.searchWithinErrorMsg("Invalid search format")},searchWithinSubmit:function(){var searchStr=$("#searchWithin input[type=text]").prop("value");if(searchStr==""||searchStr=="Search this book"){page.searchWithinNoTerms();
return}page.searchWithinErrorMsgClear();if(searchStr.search("SW()")!=-1){page.searchWithinInvalidSearch();SearchWithin.clear(true);return}SearchWithin.clear();SearchWithin.saveSearch(0,searchStr);var rslt=SearchWithin.reqResult("#srcOutline li",page.selectorE_BK,page.opts.focus.idConvert,page.searchWithinNoResult)},searchWithinInit:function(){var val=SearchWithin.loadSearch();if(val==null||(val.str==""||(val.str=="Search this book"||val.cid!=SDM.pm.cid))){SearchWithin.clear();$("#searchWithin input[type=text]").parent().siblings(".clearWithin").children().addClass("clearXHide").removeClass("clearXShow")}else{$("#searchWithin input[type=text]").prop("value",
val.str);$("#searchWithin input[type=text]").parent().siblings(".clearWithin").children().removeClass("clearXHide").addClass("clearXShow");SearchWithin.init("#srcOutline li",page.selectorE_BK,page.opts.focus.idConvert,page.searchWithinNoResult)}},setupRelatedPDF:function(){$("body").on("click","#pdfLink, #addPdfLink",function(event){event.stopPropagation();if(!SDU.isIE())event.preventDefault();var t=$(event.currentTarget);if(t.attr("pdfurl"))pdfCite.openPDF(t.attr("pdfurl"),event);if(t.attr("suggestedarturl")){var wait=
0;if(typeof SDM.pf.suggestedArtPDFMaxWait!="undefined"){wait=parseInt(SDM.pf.suggestedArtPDFMaxWait);if(SDU.isIEless(10))wait+=1E3}setTimeout(function(){pdfCite.suggestedArt(t.attr("suggestedarturl"))},wait);if(t.attr("citingArtURL"))pdfCite.citedArtURL=t.attr("citingArtURL")}else pdfCite.suggestedArtDisplayed=false;return false})},processFragments:function(){$("#centerPane .page_fragment").each(function(){var fragIdNum=$(this).attr("data-fid");var fragID=$(this).attr("id");if(fragIdNum==1)DynamicArtContent.fragReady=
1;page.addDynamics();ExtObjLink.init($("#"+fragID))})},moveToSection:function(e){var selID=$(e.target).closest("a").attr("href").split("#");selID=selID[1];$("html,body").moveTo(selID,e.data);e.preventDefault();e.stopPropagation()},addJS:function(){if(SDU.isIE()&&SDU.isIEless(7))return;CanonLink.init();CanonicalLink.init();CanonicalHomeLink.init();SDWebExport.init();ArticleToolbar.init();EReader.init();SDWebExport.init();HomeAccMsgLink.init();if(Fragment.isAvail())page.processFragments();Fragment.init();
mathRenderer.init();if(!Fragment.isAvail()){page.addDynamics();MoreInformation.init()}CollapsibleTextbox.init();$("#page-area").on("click",".intra_ref,.authorVitaeLink,.figureLink,.authorName, .viewWS",{z:"centerPane"},rightSidePane.findTargetElement);if(Fragment.isAvail()){$("#outline").on("click",".tocLink",{z:"leftPane"},Outline.findTargetFragment);$("#centerPane").on("click",".glossaryAnchor",{z:"centerPane"},Outline.findTargetFragment);$("#rightPane").on("click",".viewInArt",{z:"rightPane"},
Outline.findTargetFragment);$("#centerPane").on("click",".FCANote",Fragment.handleAipClicks)}else{$("#outline").on("click",".tocLink",Outline.moveToSection);$("#centerPane").on("click",".glossaryAnchor",Outline.moveToSection);$("#rightPane").on("click",".viewInArt",page.moveToSection);$("#centerPane").on("click",".FCANote",{focus:false},page.moveToSection)}$("#centerPane").on("click",".grantnum",{focus:false},page.moveToSection);$("#centerPane").on("click",".btnHolder",function(e){page.toggleOptions(e,
this)});page.lazyLoadInit();page.showFullTableLink();$("div.downloadCsv").bind("click",TableDownload.processRequest);$("a.ppt").bind("click",FigureDownload.processRequest);EComponent.init();if(!Fragment.isAvail())ExtObjLink.init($("#centerInner"));page.searchWithinInit();if(SDM.pm.entitled==true)page.setupRelatedPDF();if(!SDM.pf.reqAllFrags)resolveReferences("centerPane");if(SDM.pf.gadget&&SDM.pf.gadget.displayGadgets)if(SDM.pf.gadget.sciverseGadgetDetailsID.length>0)GadgetUtil.loadGadgetsParallel();
else GadgetUtil.loadGadgets();AltMetric.init();$("#centerPane")[0].tabIndex=-1;if(typeof SDM.fab!="undefined"&&SDM.pm.itemWeight=="FULL-TEXT")EReader.fabRequest();ready=true},startOutline:function(){Outline.init();if(SDM.pm.entitled==true&&SDM.pageType=="article_full"){if(SDM.pm.contentType=="BK"||SDM.pf.mrwmod.isModArticle){page.opts.selector=page.selectorE_BK;if(SDM.pm.contentType=="BK")page.opts.searchWithin=true}else page.opts.selector=page.selectorE;page.opts.focusEffect=true}else{page.opts.focusEffect=
false;if(SDM.pm.contentType=="BK"||SDM.pf.mrwmod.isModArticle){page.opts.selector=page.selectorUE_BK;if(SDM.pm.contentType=="BK")page.opts.searchWithin=true}else page.opts.selector=page.selectorUE;if(!$("#centerInner div.articleOutlineHidden").length){page.opts.empty=true;if(mrwLeftPane.currentTab=="S"&&SDM.pf.mrwmod.isModArticle)$("#outline .outlineMsg").hide()}}if(typeof SDM.tocJson!="undefined"){DBG.out(1,"Found TOC JSON Already!!!");$("#centerInner").outline($("#outline"),page.opts,SDM.tocJson)}else{var tocCounter=
0;var trd=SDM.pf.toc.retryDelay;var tocCheck=function(){clearInterval(tocIntrvl);if(typeof SDM.tocJson!="undefined"||tocCounter>SDM.pf.toc.retry){$("#centerInner").outline($("#outline"),page.opts,SDM.tocJson);$("#outline").attr("data-st",0);$("#outline").scroll();if(SDM.pm.contentType=="BK")if(SDM.pf.toc.outlineTab=="I")EbookTOC.showItemTab($("#lpTabs .rightTab")[0]);else EbookTOC.showSourceTab($("#lpTabs .leftTab")[0])}else{Outline.getJson();tocCounter++;trd=trd*SDM.pf.toc.retryFactor;tocIntrvl=
setInterval(tocCheck,trd)}};var tocIntrvl=setInterval(tocCheck,0)}$("#outline").attr("data-st",0)},setLoadedAuthDisplay:function(){$("ul.affiliation").not(".inlCollab ul.affiliation").find("li").addClass("smh5plus");if(!$(".moreLink span.showInfo").hasClass("open"))$(".smh5plus").css("display","none");else $(".smh5plus").show()}};if(SDU.isIEless(7))return page;DynamicArtContent.buildDynamicRequestData();if(SDM.pf.citedByScAvail)getcitedByScopusCount();page.startOutline();if($("#frag_1").length||!Fragment.isAvail())page.addJS();
else{Fragment.get("maps");Fragment.get("frag_1",null,{successCb:page.addJS})}return page}()}function checkSearchWithin(){if($("#searchWithin input[type=text]").prop("value")=="")$("#searchWithin input[type=text]").parent().siblings(".clearWithin").children().addClass("clearXHide").removeClass("clearXShow");else $("#searchWithin input[type=text]").parent().siblings(".clearWithin").children().removeClass("clearXHide").addClass("clearXShow")}
$.fn.outline=function(oObj,opts,tocJson){var cfg={empty:false,selector:".outlineItem",graphicsToggler:true,searchWithin:false,focusEffect:true,focus:{}};Outline.oObj=oObj;return this.each(function(){if(opts)$.extend(true,cfg,opts);oObj.prepend('<div id="olGraphCbBox"></div>');$("#olGraphCbBox").append($(".outlineMsg"));$("#olGraphCbBox").append('<ul id="itemOutline"></ul>');var $iOutline=$("#itemOutline");oObj.append('<div id="fig" role="navigation" aria-labelledby="fig_title">'+'<hr><h2 id="fig_title">Figures and tables</h2>'+
'<ol class="figures " role="tree">'+"</ol></div>");var level="";var isGraphics=false;if(typeof tocJson=="undefined"){Outline.buildOutlineUnavailable(cfg);Outline.postBuild(cfg)}else{var outlineObj;try{outlineObj=$.parseJSON(tocJson);Outline.buildOutlineJsonSide(cfg,outlineObj)}catch(e){$.get(SDM.ep.urlPrefix+"/outlineJson/"+SDM.pm.pii+"/"+SDM.pm.cid+"/ftp");if(Fragment.isAvail()){Fragment.get("all",null,{successCb:Outline.buildOutlineClientSide,successCbArg:cfg,failureCb:Outline.buildOutlineUnavailable,
failureCbArg:cfg});return}else Outline.buildOutlineClientSide(cfg)}}})};
var CrossMark={cssUrl:"",buildHTML:function(doi){if(!SDM.pf.crossMark)return;var htmlStr='<dd class="crossMarkInfo smh">';htmlStr+="<div>";htmlStr+='<a id="open-crossmark" href="#" style="padding: 0px 0 0px 0;"><img id="crossmark-icon" src="http://crossmark.crossref.org/images/logos/cm_sbs_018_plain.png" /></a>';htmlStr+='<meta name="dc.identifier" content="doi:'+doi+'"></meta>';htmlStr+="</div>";htmlStr+='<div id="crossmark-dialog" style="display:none;" title="">';htmlStr+='<iframe id="crossmark-dialog-frame" frameborder="0"></iframe>';
htmlStr+="</div>";htmlStr+="</dd>";return htmlStr},init:function(){if(!SDM.pf.crossMark||(!SDM.pf.crossMark.url||!SDM.pf.crossMark.lib))return;$("#open-crossmark").delegate("#crossmark-icon","click",function(event){$.get(SDM.pf.crossMark.url+"/"+SDM.pm.pii+"/article/rightPane/displayPopup/"+SDM.pm.contentFamily+"/"+SDM.pm.issnisbn)});if($("#open-crossmark")[0])LazyLoad.js([SDM.pf.crossMark.lib],function(){$("#open-crossmark").css({"display":"inline-block"}).find("img").css("padding-top","10px");$("#open-crossmark").click(function(){$(".ui-dialog-titlebar").css("top",
"0px").css("width","520px")})});$("#open-crossmark").bind("mouseover",function(){setTimeout(CrossMark.setCss,1E3)})},setCss:function(){if(!$('link[href*="crossmark_widget.css"]')[0])if(document.createStyleSheet)document.createStyleSheet(CrossMark.cssUrl);else $("head").append('<link href="'+CrossMark.cssUrl+'" rel="stylesheet" type="text/css"/>');$("#crossmark-tooltip-130").css({"z-index":"1001"})}};
var ArticleOutline={outline:"",init:function(){if(typeof SDM.tocJson!="undefined"){var obj=$.parseJSON(SDM.tocJson);for(var i=0;i<=obj.TOC.length;i++)ArticleOutline.buildSectionItem(obj.TOC[i])}},buildSectionItem:function(sec){var html="";var keyE='"displayTOCSection", "article", "leftPane", '+SDM.pm.contentFamily+"";if(sec.sID!=undefined)html+='<div id="ol_'+sec.sID+'" class="io item h2sec"></div>';if(sec.sT!=undefined)html+="<a onclick=\"SD_UTIL.sendUserKeyEvent('displayTOCSection', 'article', 'leftPane', "+
SDM.pm.contentFamily+"); return $('html,body').moveTo('"+sec.sID+"')\"  href='#"+sec.sID+"' >"+sec.sT+"</a>";return html}};
$(document).ready(function(){placeHolderInit();if(!SDM.pf.blkSocialLogins&&SDU.cookieAvail())LazyLoad.js([SDM.ep.gigyaLib],function(){$(".socialContainer").each(function(){if($(this).attr("id")!="")loadSocialLoginOptions($(this).attr("id"))});initGigyaHelp()});if(SDM.secId!=""&&SDM.secId!=undefined)$("#centerPane").moveTo(SDM.secId);if(SDU.isIE(SDM.ieVersion,"lte")&&SDM.browserUserMsg)$("#ieWarningMsg").ieWarning();if(SDM.prodSysMsg)prodMsg.init();exportCite.init();exportCite.Mendeley();DDM.init();
if($("#eCredPopupBox")[0])eCredPopup.init();$("#page-area").on("click","#MigratedStatus .closeBt, .newUserMsg .closeBt, #smanraActivatedMsg .closeBt",function(e){e.preventDefault();var msgBlock=$(this).parent();msgBlock.remove()});if($(".newUserMsg")[0]&&$("#bannerTop")[0])$(".newUserMsg").css("margin-top","27px");if($("#smanraActivatedMsg")[0]&&$("#bannerTop")[0])$("#smanraActivatedMsg").css("margin-top","27px");if($("#homeAccPopupBox")[0])homeaccPopup.init();if($("#smanraActivatedMsg")[0])Cookie.set("smanramsg",
1)});function initGigyaHelp(){$("#socialHelpPage").click(function(e){e.stopPropagation();e.preventDefault();openPopup($(this).attr("href"),"help",800,600)})}
var SD_UTIL={killEvent:function(e){if(!e)return;e.preventDefault();e.stopPropagation()},sendUserKeyEvent:function(a,o,z,ocf){$.get(SDM.ep.userActionURL+"/"+o+"/"+z+"/"+ocf+"/"+a)},sendUserKeyEventForPPV:function(a,o,z){$.get(SDM.ep.userActionURL+"/"+o+"/"+z+"/"+a)},sendDownloadKeyEvent:function(o,z,ocf,f){$.get(SDM.ep.downloadActionURL+"/"+o+"/"+z+"/"+ocf+"/"+f)},loadLib:function(urlStr){var headID=document.getElementsByTagName("head")[0];var newScript=document.createElement("script");newScript.type=
"text/javascript";newScript.src=urlStr;headID.appendChild(newScript)},getProdColor:function(){return SDM.pm.prodColor==""?"sci_dir":SDM.pm.prodColor},getIFrameHeight:function(ifr){var ifrDoc=ifr.contentWindow||(ifr.contentDocument||ifr.document);if(ifrDoc.document!=undefined)ifrDoc=ifrDoc.document;return $(ifrDoc.body).height()},resizeIFrame:function(iframeBox,iframeHeight){$("#"+iframeBox+" iframe").height(iframeHeight)}};
$.fn.lazyLoadImages=function(opts){var cfg={imgClass:"imgLazyJSB",preLoadLine:10};var lastScrollTop=0;function scrollAction(){var bottom=$(window).height()+$(window).scrollTop();var totalCount=$("img."+cfg.imgClass).size();var loopBool=true;var st=$(window).scrollTop();if(st>lastScrollTop)var scrollDown=true;else var scrollUp=true;for(i=0;i<totalCount&&loopBool==true;i++){var obj=$("img."+cfg.imgClass)[i];if(Math.abs($(window).scrollTop()+$(window).height()-$(obj).positionA("#centerContent").top+
$(obj).height())<$(window).height()+cfg.preLoadLine||Math.abs($(window).scrollTop()-$(obj).positionA("#centerContent").top)<$(window).height()+cfg.preLoadLine){var imgObj=$(obj);if(imgObj.attr("data-loaded")!="true"){var dataGabsImgEID=imgObj.attr("data-gabsEID");var dataFullImgEID=imgObj.attr("data-fullEID");var dataThumbImgEID=imgObj.attr("data-thumbEID");var dataInlImgEid=imgObj.attr("data-inlimgeid");var dataInlImg=imgObj.attr("data-inlimg");var dataPubLogo=imgObj.attr("data-publogo");var dataDefaultLogo=
imgObj.attr("data-defaultlogo");if(dataGabsImgEID!=undefined&&dataGabsImgEID!="")imgObj.attr("src",SDM.ep.imgUrlPrefix+imgObj.attr("data-gabsEID")).attr("data-loaded","true");else if(dataFullImgEID!=undefined&&dataFullImgEID!=""){imgObj.attr("src",SDM.ep.imgUrlPrefix+imgObj.attr("data-fullEID")).attr("data-loaded","true");if(imgObj.attr("data-fullwidth")<580||imgObj.attr("data-fullwidth")>800)$(obj).css("height",$(obj).attr("data-fullheight")).css("width",$(obj).attr("data-fullwidth"))}else if(dataInlImgEid!=
undefined&&dataInlImgEid!=""){imgObj.attr("src",SDM.ep.imgUrlPrefix+imgObj.attr("data-inlimgeid")).attr("data-loaded","true");if(imgObj.closest(".formula")[0]&&imgObj.width()>=595)if(imgObj.closest(".formula").find("div.label")[0])imgObj.closest(".formula").find(".mathmlsrc").addClass("scrollOn");else if(imgObj.width()>616)imgObj.closest(".formula").find(".mathmlsrc").addClass("scrollOn")}else if(dataDefaultLogo!=undefined&&dataDefaultLogo!="")imgObj.attr("src",SDM.ep.staticImgUrlPrefix+imgObj.attr("data-defaultlogo")).attr("data-loaded",
"true");else if(dataPubLogo!=undefined&&dataPubLogo!="")imgObj.attr("src",SDM.ep.imgUrlPrefix+imgObj.attr("data-publogo")).attr("data-loaded","true");else if(dataInlImg!=undefined&&dataInlImg!="")imgObj.attr("src",SDM.ep.staticImgUrlPrefix+imgObj.attr("data-inlimg")).attr("data-loaded","true")}}}lastScrollTop=$(window).scrollTop()}return this.each(function(){if(opts)$.extend(cfg,opts);scrollAction();var lazyScroll=_.debounce(scrollAction,300);$(this).scroll(lazyScroll)})};
$.fn.lazyLoadOutlineImages=function(opts){var cfg={imgSel:"img",preLoadLine:400};function lazyDisplay(){var cnt=0;var myTop=0;var myHeight=0;var myWidth=0;var thumbHeight=0;$(cfg.imgSel).each(function(){var outlineTop=Math.abs($("#outline").scrollTop());var outlineBottom=Math.abs(outlineTop+$("#outline").height());var outlineHeight=$("#outline").height();var windowHeight=Math.abs($(window).height());if(cnt==0)myTop=Math.abs($(this).position().top);else myTop+=myHeight*1;myHeight=Math.abs($(this).height());
thumbHeight=$(this).attr("data-thumbheight");if(thumbHeight==undefined)thumbHeight=0;if(thumbHeight>0&&thumbHeight<myHeight)myHeight=thumbHeight;myWidth=Math.abs($(this).width());var myDims=myTop*1+myHeight*1;if(Math.abs(myDims-outlineTop)<Math.abs(outlineBottom+cfg.preLoadLine)||Math.abs(outlineTop-myTop)<Math.abs(outlineHeight+cfg.preLoadLine)){var imgObj=$(this);if(imgObj.attr("data-loaded")!="true"){if(imgObj.attr("data-smlsrc")!=undefined)imgObj.attr("src",imgObj.attr("data-smlsrc")).attr("data-loaded",
"true");else if(imgObj.attr("data-mmlEID")!=undefined)imgObj.attr("src",SDM.ep.imgUrlPrefix+imgObj.attr("data-mmlEID")).attr("data-loaded","true");imgObj.addClass("displayImg");$(this).removeClass("greyImg smlImgLazyJSB")}$(this).parent().parent().css("height","").css("width","")}cnt++})}return this.each(function(){if(opts)$.extend(cfg,opts);lazyDisplay();var lazyScroll=_.debounce(lazyDisplay,300);$(this).scroll(lazyScroll)})};
$.fn.lazyLoad=function(cfg){var limit=function(func,wait,debounce){var timeout;return function(){var context=this,args=arguments;var throttler=function(){timeout=null;func.apply(context,args)};if(debounce)clearTimeout(timeout);if(debounce||!timeout)timeout=setTimeout(throttler,wait)}};var plugin={buffer:cfg.buffer?cfg.buffer:50,batchSize:cfg.batchSize?cfg.batchSize:1,scrollSrc:cfg.scrollSrc?cfg.scrollSrc:window,callback:cfg.intoView?cfg.intoView:function(obj,idx){},selector:".refPlaceHolder",screenTop:$(window).scrollTop(),
screenHeight:$(window).height(),debounce:function(func,wait){return limit(func,wait,true)},calculateView:function(){if(refResolveEnabled==false)return;if(plugin.applyPatch()){plugin.buffer+=500;plugin.screenTop=$(plugin.scrollSrc).scrollTop()-plugin.buffer}else plugin.screenTop=$(plugin.scrollSrc).scrollTop()-plugin.buffer;var screenBot=plugin.screenTop+$(window).height()+plugin.buffer;var batch=[];$refs=$(plugin.selector).not(function(){return $(this).attr("data-sr")=="Y"});$refs.each(function(){var tmpTop=
$(this).position().top;if(plugin.applyPatch())tmpTop=this.offsetTop;if(tmpTop>plugin.screenTop&&tmpTop<screenBot){$(this).attr("data-sr","Y");batch.push(this);if(plugin.batchSize==1){plugin.callback(batch);batch=[]}else if(batch.length==plugin.batchSize){plugin.callback(batch);batch=[]}}else $(this).attr("data-sr","N")});if(batch)plugin.callback(batch)},applyPatch:function(){return SDU.isIEless(9)}};var lazyResize=plugin.debounce(plugin.calculateView,300);var lazyScroll=plugin.debounce(plugin.calculateView,
300);$(window).resize(lazyResize);$(plugin.scrollSrc).scroll(lazyScroll);plugin.calculateView();return plugin};function isNotNumber(o){if(o==-1)return true;return isNaN(o-0)}function getNumber(str){if(!str)return-1;var i=0;while(i<str.length){var charat=str.charAt(i);if(!isNotNumber(charat))if(charat!="0")return str.substring(i);i++}}var ajaxRefResol;var ajaxCitedByUpdate;var refsResolvedFlag=false;
function updateCitedByCounts(citedByCounts,isHoover,start,count){citedByCounts=citedByCounts.substring(0,citedByCounts.length-1);var updateCitedUrl=SDM.pf.ref.citedByURL+citedByCounts;ajaxCitedByUpdate=new $.ajax({url:updateCitedUrl,type:"GET",async:true,dataType:"text",error:function(){$(".citedBy_").each(function(){$(this).html("")})},success:function(res){var citedBy=decodeURIComponent(res);if(citedBy!=null){$("body").append($(citedBy));$(".citedBy_").each(function(){if(myXabsCounts[this.id]){if(this.innerHTML.match("Citing articles")==
null){$(this).html(myXabsCounts[this.id]);$(this).closest("div.boxLink").before("&nbsp;|&nbsp;");$(this).attr("data-citeres","Y")}}else{$(this).html("");$(this).attr("data-citeres","Y")}})}}})}String.prototype.substringBetween=function(string1,string2){if(this.indexOf(string1,0)==-1||this.indexOf(string2,this.indexOf(string1,0))==-1)return-1;else return this.substring(this.indexOf(string1,0)+string1.length,this.indexOf(string2,this.indexOf(string1,0)))};
function delayedResolveRefs(s,c,d){setTimeout(function(){resolveRefs(s,c)},d)}
function resolveReferences(fId){if(SDM.pf.reqAllFrags)if(refsResolvedFlag)return;else if(!$("ul.reference li.refPlaceHolder img.refimgLoader").length)refsResolvedFlag=true;$refs=$("#"+fId+" .refPlaceHolder");var rl=$refs.length-1;if(rl>=0)if(rl>SDM.pf.ref.bs){var c=Math.ceil(rl/SDM.pf.ref.bs);var m=rl%SDM.pf.ref.bs;var st=$($refs[0]).attr("id").substring(8)*1;var ct=SDM.pf.ref.bs;for(var i=1;i<=c;i++){if(i==c&&m!=0)ct=m;if(Fragment.isAvail())resolveRefs(st,ct);else delayedResolveRefs(st,ct,SDM.pf.ref.fd+
i*10);st=st+SDM.pf.ref.bs}}else{var start=$($refs[0]).attr("id").substring(8);var count=rl;resolveRefs(start,count)}}var jqxhr;
function resolveRefs(start,count){var url=SDM.pf.ref.resolveURL+"&_refRangeStart="+start+"&_refRangeCount="+count;jqxhr=$.get(url).success(function(res){var refMap=decodeURIComponent(res);var citedBySCEids=refMap.substringBetween("#","^");var tmp="#"+citedBySCEids+"^";refMap=refMap.replace(tmp,"");if(refMap!=null){$("body").append($(refMap));$(".refPlaceHolder").each(function(){if(myMap[this.id.toLowerCase()]["refHtml"]||myMap[this.id.toLowerCase()]["refHtml"]!=""){if(this.innerHTML.match("/science?")==
null){$(this).html(myMap[this.id.toLowerCase()]["refHtml"]);$(this).attr("data-refres","Y")}if(myMap[this.id.toLowerCase()]["absUrl"])$(this).attr("data-absurl",myMap[this.id.toLowerCase()]["absUrl"])}else{$(this).html("");$(this).attr("data-refres","Y")}});if(citedBySCEids!=null&&citedBySCEids!="")updateCitedByCounts(citedBySCEids,false,start,count)}}).error(function(){$(".refPlaceHolder").each(function(){$(this).html(' <span style="color:red;"> [SD-008]</span>')});return})}var loadsection;
function loadSection(baseUrl,section){if(Fragment.isAvail()){loadSectionFrag(baseUrl,section);return}var endPoint=baseUrl+section;var div1=doc.getById("indexSection");loadsection=new $.ajax({url:endPoint,type:"GET",error:function(){$("#centerInner").find(".glossarySec,.artIndexItem").remove();$("#centerInner").find("h3").remove();var vpHeight=$(window).height()},success:function(res){$("#centerInner").find(".glossarySec,.artIndexItem").remove();$("#centerInner").find("h3").remove();$("#centerInner").append(res);
$("#centerInner").append($("#centerInner").find(".copyright").prev());$("#centerInner").append($(".copyright"));if($("#"+section).position()!=null)$("html,body").moveTo(section);var secTitle=$("#sectitle");$("#ol_sectitle").html("<a onclick=\"return $('html,body').moveTo('sectitle')\"  href='"+secTitle.attr("id")+"'>"+secTitle.html()+"<br></a>")}})}
function loadSectionFrag(baseUrl,section){var endPoint=baseUrl+section;var div1=doc.getById("indexSection");$(window).unbind("scroll",Fragment.scroll);Fragment.isFooterEnabled=function(){return true};loadsection=new $.ajax({url:endPoint,type:"GET",error:function(){$(".page_fragment").find(".glossarySec,.artIndexItem").remove();$(".page_fragment").find("h3").remove()},success:function(res){$("#centerPane .page_fragment").each(function(){if($(this).attr("data-first")=="true"){$(this).find(".glossarySec,.artIndexItem").remove();
$(this).find("h3").remove();$(this).find(".copyright").remove();$(".page_fragment").append(res);var copyright=$("#centerInner").find(".hiddenCopyright");if($(copyright)[0])$(".page_fragment").append('<p class="copyright">'+$(copyright).text()+"</p>")}else $(this).remove()});if($("#"+section).position()!=null)$("html,body").moveTo(section);var secTitle=$("#sectitle");$("#ol_sectitle").html("<a onclick=\"return $('html,body').moveTo('sectitle')\"  href='"+secTitle.attr("id")+"'>"+secTitle.html()+"<br></a>")}})}
var ArticleToolbar={init:function(){$(".exportDivision").click(ArticleToolbar.toggleOptions);$("#articleNav .icon_pdf div").click(function(e){var currObj=e.target;if(SDM.pm.entitled)$(currObj).parent().find("a#pdfLink").click();else document.location=$(currObj).parent().find("a#pdfLink").attr("href")});$(".icon_orderdoc"+SD_UTIL.getProdColor()+" div").click(function(){document.location=$(".icon_orderdoc"+SD_UTIL.getProdColor()+" a").attr("href")});$(".icon_exportarticle"+SD_UTIL.getProdColor()+" div").click(function(){document.location=
$(".icon_exportarticle"+SD_UTIL.getProdColor()+" a").attr("href")});$(".email"+SD_UTIL.getProdColor()+" div").click(function(){document.location=$(".email"+SD_UTIL.getProdColor()+" a").attr("href")});$(".alert"+SD_UTIL.getProdColor()+" div").click(function(){document.location=$(".alert"+SD_UTIL.getProdColor()+" a").attr("href")});$(".thumbnail"+SD_UTIL.getProdColor()+" div").click(function(){document.location=$(".thumbnail"+SD_UTIL.getProdColor()+" a").attr("href")});$(".fullsize"+SD_UTIL.getProdColor()+
" div").click(function(){$(".fullsize"+SD_UTIL.getProdColor()+" a").click()})},toggleOptions:function(e){$("body").bind("click",ArticleToolbar.closeOptions);$(window).bind("scroll",ArticleToolbar.closeOptions);exportPopupClose(e);SD_UTIL.killEvent(e)},closeOptions:function(e){exportPopupClose(e);$("body").unbind("click",ArticleToolbar.closeOptions);$(window).unbind("scroll",ArticleToolbar.closeOptions)}};
var PDFIcon={init:function(){$(".icon_pdf.additional div").click(function(e){var currObj=e.target;if(SDM.pm.entitled)$(currObj).parent().find("a#addPdfLink").click();else document.location=$(currObj).parent().find("a#addPdfLink").attr("href")})}};var blocks={articleOptions:false,quickSearch:false};
function publicationLink(url,showId,hideId,rsltIndId){$.get(url,function(data){if(data.match(/TRUE/g)){$("#"+hideId).css("display","none");$("#"+showId).css("display","inline");$("#"+rsltIndId).css("display","none")}else $("#"+rsltIndId).css("display","inline");setTimeout("ArticleToolbar.closeOptions('')",500)})}
function openNS(url,width,height){if(navigator.appName=="Microsoft Internet Explorer"&&parseFloat(navigator.appVersion)<4)return false;if(!width)var width=600;if(!height)var height=400;var newX=width,newY=height,xOffset=10,yOffset=10;var parms="width="+newX+",height="+newY+",screenX="+xOffset+",screenY="+yOffset+",status=yes,toolbar=yes,menubar=yes"+",scrollbars=yes,resizable=yes,location=yes";nsWin=window.open(url,"displayWindow",parms);nsWin.focus();return false}var figCaption;
function openStrippedNS(url,figElem,figRefElem,pii){if(navigator.appName=="Microsoft Internet Explorer"&&parseFloat(navigator.appVersion)<4)return false;var capId=figElem.replace("labelCaption","");var ih=doc.getById(figElem);var cRef=doc.getById(capId+"b"+figRefElem);var newRef=doc.getById("anc"+capId+"b"+figRefElem);var xOffset=25,yOffset=25;var parms="left="+xOffset+",top="+yOffset+",status=yes,toolbar=no,menubar=no"+",scrollbars=yes,resizable=yes,location=no";if(ih!=null)if(cRef!=null)figCaption=
ih.innerHTML.replace(cRef.innerHTML,'<a href="'+SDM.ep.urlPrefix+"/article/pii/"+pii+"#"+figRefElem+'">'+newRef.innerHTML+"</a>");else figCaption=ih.innerHTML;else figCaption="";var focusCount=0;var nsWin=window.open(url,"displayWindow",parms);if(nsWin)nsWin.focus();$(window).unbind("focus").bind("focus",function(){if(nsWin&&focusCount<=5){nsWin.focus();focusCount++}else{focusCount=0;$(window).unbind("focus")}});window.setTimeout(function(){focusCount=10},1E3);return false}
function sortInit(){var navBox=$("#navBox");navBox.sortable({axis:"y",opacity:0.6});navBox.disableSelection();navBox.bind("sortstop",function(event,ui){var url=SD_SORTURL+"?"+navBox.sortable("serialize");$.get(url)})}
var QuickSearch={getElementsByClassName:function(oElm,strTagName,strClassName){var arrElements=strTagName=="*"&&oElm.all?oElm.all:oElm.getElementsByTagName(strTagName);var arrReturnElements=new Array;strClassName=strClassName.replace(/\-/g,"\\-");var oRegExp=new RegExp("(^|\\s)"+strClassName+"(\\s|$)");var oElement;for(var i=0;i<arrElements.length;i++){oElement=arrElements[i];if(oRegExp.test(oElement.className))arrReturnElements.push(oElement)}return arrReturnElements},clearQSForm:function(){document.qkSrch.qs_tak.value=
"";document.qkSrch.qs_author.value="";document.qkSrch.qs_title.value="";document.qkSrch.qs_vol.value="";document.qkSrch.qs_issue.value="";document.qkSrch.qs_pages.value=""},changeFields:function(event){var quckSrch=QuickSearch.getElementsByClassName(document,"td","toggleQukSrch");if(event.currentTarget.value=="i"){$(".toggleQukSrch").css("display","none");doc.getById("fieldLabel").innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;Images";doc.getById("qs_all").title="Search figures & videos";if(doc.getById("qs_all").value==
""){doc.getById("qs_all").value="Search figures & videos";doc.getById("qs_all").style.color="#9b9b9b"}doc.getById("volField").style.display="none";doc.getById("qs_vol").style.display="none";doc.getById("issueField").style.display="none";doc.getById("qs_issue").style.display="none";doc.getById("pageField").style.display="none";doc.getById("qs_pages").style.display="none";if(/MSIE (\d+\.\d+);/.test(navigator.userAgent))doc.getById("submit_search").style.marginLeft="7px"}else{$(".toggleQukSrch").css("display",
"");doc.getById("fieldLabel").innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;All Fields";doc.getById("qs_all").title="For Example. Heart Attack and Behaviour";if(doc.getById("qs_all").value=="Search figures & videos"){doc.getById("qs_all").value="";doc.getById("qs_all").style.color="#000000"}doc.getById("volField").style.display="";doc.getById("qs_vol").style.display="";doc.getById("issueField").style.display="";doc.getById("qs_issue").style.display="";doc.getById("pageField").style.display="";doc.getById("qs_pages").style.display=
"";if(/MSIE (\d+\.\d+);/.test(navigator.userAgent))doc.getById("submit_search").style.marginLeft="14px"}},clearValues:function(){if(doc.getById("Images").checked==true)if(doc.getById("qs_all").value=="Search figures & videos"){doc.getById("qs_all").value="";doc.getById("qs_all").style.color="#000000"}},setValues:function(){if(doc.getById("Images").checked==true)if(doc.getById("qs_all").value==""){doc.getById("qs_all").value="Search figures & videos";doc.getById("qs_all").style.color="#9b9b9b"}}};
function ccAutoComplete(inputField,outputField,validCostCodes){$("#"+inputField).autocomplete({minLength:2,source:validCostCodes})}var CanonLink={init:function(){$("body").on("click",".cLink:not('.pdfRightPaneLink')",function(event){var t=$(this);createStateCookie(t.attr("queryStr"),event)})}};var CanonicalHomeLink={init:function(){$("body").delegate(".canonHomeLink","click",function(event){var t=$(this);createCookieForHomePage(t,event)})}};
var HomeAccMsgLink={init:function(){$("body").delegate(".homeAccBtn","click",function(event){Cookie.set("homeacc_pop",1)})}};
function createCookieForHomePage(hc,e){var cv="";cv=cv.addTag(hc.attr("method"),"md").addTag(hc.attr("zone"),"z").addTag(hc.attr("btn"),"btn").addTag(hc.attr("origin"),"org").addTag(hc.attr("more"),"me").addTag(hc.attr("actionType"),"at").addTag(hc.attr("boxAction"),"bt").addTag(hc.attr("box"),"bx").addTag(hc.attr("record"),"rd").addTag(hc.attr("fl"),"fl").addTag(hc.attr("prompt"),"pt").addTag(hc.attr("lg"),"lg");var cookieStart="<e><q>science</q>";var cookieEnd="<enc>N</enc></e>";cv=cookieStart+
cv+cookieEnd;Cookie.set("SD_HOME_PAGE_COOKIE",cv)}
String.prototype.getParameter=function(inName){var outParm="";var queryIndex=this.indexOf("?");var parmIndex=this.indexOf(inName,queryIndex+1);if(parmIndex>0){parmIndex+=inName.length;while(parmIndex>=0&&"="!=this.charAt(parmIndex)){parmIndex=this.indexOf(inName,parmIndex+1);if(parmIndex>0)parmIndex+=inName.length}if("="==this.charAt(parmIndex)){parmIndex++;var endIndex=parmIndex;while(endIndex<this.length&&("&"!=this.charAt(endIndex)&&"#"!=this.charAt(endIndex)))endIndex++;if(endIndex>parmIndex)outParm=
this.substring(parmIndex,endIndex)}}return outParm};String.prototype.addTag=function(tagVal,tag){if(tagVal)return this.concat("<"+tag+">"+tagVal+"</"+tag+">");else return this};
var CanonicalLink={init:function(){$("body").delegate(".fedLink","click",function(event){var preUrl=window.location.href;var cookieValue="";if(preUrl)cookieValue+="<prevURL>"+preUrl+"</prevURL>";var cookieStart="<e><q>science</q>";var cookieEnd="<enc>N</enc></e>";cookieValue=cookieStart+cookieValue+cookieEnd;if(typeof console!="undefined")console.log("cookieValue is: "+cookieValue);Cookie.set("SD_ART_LINK_STATE",cookieValue)})}};
function createStateCookie(qs,e){var zone="";if(qs){zone=qs.getParameter("_zone");if(!zone)zone=qs.getParameter("zone")}var cv="";if(zone=="subjectBrowse"){cv=cv.addTag(zone,"z").addTag(qs.getParameter("_origin"),"org");var cookieStart="<e><q>science</q>";var cookieEnd="<enc>N</enc></e>";cv=cookieStart+cv+cookieEnd;Cookie.set("MRW_MODULE_STATE_COOKIE",cv)}else{if(qs)cv=cv.addTag(qs.getParameter("_alid"),"al").addTag(qs.getParameter("_rdoc"),"rd").addTag(qs.getParameter("_fmt"),"fmt").addTag(qs.getParameter("_origin"),
"org").addTag(qs.getParameter("_srch"),"src").addTag(qs.getParameter("_ct"),"cnt").addTag(zone,"z").addTag(qs.getParameter("_srcFr"),"srcFr").addTag(qs.getParameter("_docanchor"),"av").addTag(qs.getParameter("_alertKey"),"ak").addTag(qs.getParameter("_wid"),"wid").addTag(qs.getParameter("_errMsg"),"err").addTag(qs.getParameter("_reqId"),"req").addTag(qs.getParameter("_xRefDocId"),"cid").addTag(qs.getParameter("_origPii"),"opi").addTag(qs.getParameter("artImgPref"),"rt").addTag(qs.getParameter("_cid"),
"rwi").addTag(qs.getParameter("_hierId"),"rhi").addTag(qs.getParameter("_explode"),"exp").addTag(qs.getParameter("_idxType"),"ind").addTag(qs.getParameter("_refLink"),"rfl").addTag(qs.getParameter("_alpha"),"alp").addTag(getDateTime(),"rdt").addTag(qs.getParameter("overrideIP"),"oip").addTag(qs.getParameter("nextPrevTag"),"np").addTag(qs.getParameter("originContentFamily"),"oct").addTag(qs.getParameter("_hashID"),"sec").addTag(qs.getParameter("panel"),"p").addTag(qs.getParameter("_piiSuggestedFrom"),
"sf").addTag(qs.getParameter("gatewayReq"),"gr").addTag(qs.getParameter("_isEmbed"),"embedPdf");var cookieStart="<e><q>science</q>";var cookieEnd="<enc>N</enc></e>";cv=cookieStart+cv+cookieEnd;Cookie.set("SD_ART_LINK_STATE",cv)}}
function createSimpleCookie(cookieName,value){var finalCookie=cookieName+"="+value+";path=/";var hostName=document.location.hostname;hostName.toLowerCase();var domain="";if(hostName.indexOf("sciencedirect.com")!=-1&&hostName.match(/\.sciencedirect\.com\./)==null)domain=".sciencedirect.com";else if(hostName.indexOf(".lexisnexis.com")!=-1)domain=".lexisnexis.com";else if(hostName.match(/\.sciencedirect\.com\./)!=null)domain=hostName;if(domain)finalCookie+=";domain="+domain;document.cookie=finalCookie}
function getDateTime(){var ct=new Date;return ct.getFullYear()+"/"+ct.getMonth()+"/"+ct.getDate()+"/"+ct.getHours()+":"+ct.getMinutes()+":"+ct.getSeconds()}function getCombinedSrcTitle(item){var srcTitle="";if(item.SATSRCINFO&&item.SATSRCINFO.length){srcTitle+=item.SATSRCINFO[0].SRCTITLE;if(item.CONTENTSUBTYPE&&("M"!=item.CONTENTSUBTYPE&&item.PUBTITLE))srcTitle+=", from "+item.PUBTITLE}if(""==srcTitle)srcTitle=item.PUBTITLE;return srcTitle}
function flipAlertSettings(id,currObj,nextObj){var obj=document.getElementById(id);var currObj=document.getElementById(currObj);var nextObj=document.getElementById(nextObj);if(obj.style.display=="none"){obj.style.display="block";currObj.className="regMMinus";nextObj.innerHTML="Hide alert & other settings"}else{obj.style.display="none";currObj.className="regMPlus";nextObj.innerHTML="Show alert & other settings"}}
function displayMarketingInfo(id,currObj){var obj=document.getElementById(id);var currObj=document.getElementById(currObj);if(obj.style.display=="none"){obj.style.display="block";currObj.className="regMMinus"}else{obj.style.display="none";currObj.className="regMPlus"}currObj.innerHTML="I wish to receive information from Elsevier B.V. and its affiliates concerning their products and services.&nbsp;&nbsp;&nbsp;&nbsp;"}
var ECC={selectorDisplayCount:10,audioPlayerWidth:318,audioPlayerHeight:29,videoPlayerWidth:602,videoPlayerHeight:334,reqFlashVersion:"9.0.0",reqMajorVersion:9,reqMinorVersion:0,videoNoFlashWidth:318,videoNoFlashHeight:260,audioPlayerURL:"/page/flash/AudioPlayer.swf",videoPlayerURL:"/page/flash/VideoPlayer.swf"};
var EComponent={scope:"",videos:null,others:null,audios:null,needFlash:false,init:function(fragId){if(typeof fragId!="undefined")this.scope="#"+fragId+" ";if($(this.scope+".MMCvAUDIO").length+$(this.scope+".MMCvOTHER").length+$(this.scope+".MMCvVIDEO").length==0)return;var fv=swfobject.getFlashPlayerVersion();if(ECC.reqMajorVersion==0||(ECC.reqMajorVersion>fv.major||ECC.reqMajorVersion==fv.major&&ECC.reqMinorVersion>fv.minor)){this.needFlash="true";this.initNoFlash("version_mismatch")}else{this.audios=
$(".MMCvAUDIO");$(this.scope+".MMCvAUDIO").each(function(){swfobject.embedSWF(SDM.ep.urlPrefix+ECC.audioPlayerURL,$(this).siblings("div").attr("id"),ECC.audioPlayerWidth,ECC.audioPlayerHeight,ECC.reqFlashVersion,false,false,{menu:"false",play:"false",bgcolor:"0xFFF",allowscriptaccess:"always",wmode:"opaque",flashvars:$(this).attr("mmcvflashvars")})});this.others=$(".MMCvOTHER");this.videos=$(".MMCvVIDEO");$(this.scope+".MMCvVIDEO").each(function(){swfobject.embedSWF(SDM.ep.urlPrefix+ECC.videoPlayerURL,
$(this).siblings("div").attr("id"),ECC.videoPlayerWidth,ECC.videoPlayerHeight,ECC.reqFlashVersion,false,false,{menu:"false",play:"false",bgcolor:"0xFFF",allowscriptaccess:"always",allowFullScreen:"true",wmode:"opaque",flashvars:$(this).attr("mmcvflashvars")})})}this.buildMMClabelanchor()},buildMMClabelanchor:function(){$(this.scope+"dd.ecomponent").each(function(i){var thisObj=$(this).parent("dl");var downLinkObj=thisObj.find(".MMCvLINK");var captionObj=thisObj.find(".MMCvLABEL_SRC a");if(downLinkObj&&
captionObj){var downLinkUrl=$(downLinkObj).attr("href");$(captionObj).attr("href",downLinkUrl)}})},initNoFlash:function(str){}};
function assignPosition(d){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){d.css("left",Number(linkBufObj.offsetLeft+linkBufObjLeft)+"px");var linkId=linkBufObj.id;var linkNum=linkId.substring(9,linkId.length);var numPrev=Number(linkNum)-1;var numPrevs=Number(linkNum)-2;var numNext=Number(linkNum)+1;var prevEle=doc.getById("authname_"+numPrev);var nextEle=doc.getById("authname_"+numNext);var prevestEle=doc.getById("authname_"+numPrevs);var posPrev;var posNext;if(prevEle!=null)posPrev=findPosY(prevEle);
else posPrev=findPosY(linkBufObj);if(posPrev==findPosY(linkBufObj))d.css("top",findPosY(linkBufObj)+linkBufObj.offsetHeight+5+"px");else{if(nextEle!=null)posNext=findPosY(nextEle);else if(prevestEle!=null&&posPrev==findPosY(prevestEle))posNext=findPosY(linkBufObj)+27;else posNext=findPosY(linkBufObj);d.css("top",posNext+linkBufObj.offsetHeight+5+"px")}d.css("display","block")}else{d.css("left",Number(linkBufObj.offsetLeft+linkBufObjLeft)+"px");d.css("top",findPosY(linkBufObj)+linkBufObj.offsetHeight+
2+"px");d.css("display","block")}}function textBoxCE(textObj,imptr){if(textObj=="")textObj=$(imptr).attr("data-img");var child=doc.getById(textObj);if(child.style.display!="block"){child.style.display="block";imptr.src="/scidirimg/minus_lt.png"}else{child.style.display="none";imptr.src="/scidirimg/plus_lt.png"}}
function toggleFigLblMMCStyling(){var defBoxes;var crntLblDivs;defBoxes=getElementsByClassName(document,"DIV","textboxdefault");for(var k=0;k<defBoxes.length;k++){crntLblDivs=getElementsByClassName(defBoxes[k],"SPAN","nodefault");if(crntLblDivs.length==0){defBoxes[k].style.background="none";defBoxes[k].style.border="0 none";defBoxes[k].style.margin="0 0 0 15px"}}}
function findPosY(obj){var curtop=0;if(obj.offsetParent)while(1){curtop+=obj.offsetTop;if(!obj.offsetParent)break;obj=obj.offsetParent}else if(obj.y)curtop+=obj.y;return curtop}function hideModalBox(){doc.getById("modalBoxDisplay").style.display="none"}
function setCenterAlign(){var msgBox=$("#modalWindowMsgBox");var winWidth=$(window).width();var winHeight=$(window).height();var top=(winHeight-msgBox[0].offsetHeight)/2;var left=(winWidth-msgBox[0].offsetWidth)/2;msgBox.css("top",top+"px");msgBox.css("left",left+"px");$("#modalWindow").css("height",winHeight+"px")}
function requestHeightAdjust(id,h){if(h>50&&!$("#"+id).find(".adText")[0])$("#"+id).prepend('<hr style="margin-left:12px;"><div class="adText">ADVERTISEMENT<div class="closeBt"><a href="#" title="Close Advertisement">&nbsp;</a></div></div>');if(h>50){$("#"+id+" iframe").height(h);$("#"+id).height(h+65)}adDisplay.init()}
var pgLayout={vpWidth:$(window).width(),lcWidth:260,ccWidth:700,rcWidth:300,rcFloatWidth:300,pgWidth:1606,lcLeft:0,ccLeft:0,rcLeft:0,pgLeft:0,showLeftBar:true,showRightBar:true,animDuration:300,holdAnimation:500,bibliographicPanelDisplayed:false,relatedCitingPanelDisplayed:false,applicationPanelDisplayed:false,hoverOnColor:"#fff",hoverOffColor:"#ECF2F6",glowOnColor:"#C1D3E1",glowOffColor:"#ECF2F6"};
$.fn.outerHTML=function(s){if(this.length==0)return false;var elem=this[0],name=elem.tagName.toLowerCase();if(elem.outerHTML)return elem.outerHTML;var attrs=$.map(elem.attributes,function(i){return i.name+'="'+i.value+'"'});return"<"+name+(attrs.length>0?" "+attrs.join(" "):"")+">"+elem.innerHTML+"</"+name+">"};
var TableDownload={processRequest:function(e){var tableId=$(e.target).closest("dl").attr("id");var table=$("#"+tableId+" dd.table table");var lblCap=$("#"+tableId+" dd.lblCap");var csvText="";csvText+=TableDownload.convertLabelToCSV(lblCap);csvText+="\n";csvText+=TableDownload.convertTableToCSV(table);SD_UTIL.sendDownloadKeyEvent("article","centerPane",SDM.pm.contentFamily,"CSV");$('<form action="'+SDM.ep.downloadCsvURL+'"'+' method="post">'+'<input type="hidden" name="buffer" value="'+csvText.toString()+
'" ></form>').appendTo("#articleToolbar").submit().remove();return false},convertLabelToCSV:function(myLabel){var csvData=[];var labelRow=[];labelRow[labelRow.length]=TableDownload.cleanCellData($(myLabel).html());TableDownload.row2CSV(labelRow,csvData);var mydata=csvData.join("\n");return mydata},convertTableToCSV:function(myTable){var csvData=[];myTable.find("thead tr").each(function(){var tmpHeadRow=[];$(this).find("th").each(function(){tmpHeadRow[tmpHeadRow.length]=TableDownload.cleanCellData($(this).html())});
TableDownload.row2CSV(tmpHeadRow,csvData)});myTable.find("tbody tr").each(function(){var tmpRow=[];$(this).find("td").each(function(){tmpRow[tmpRow.length]=TableDownload.cleanCellData($(this).html())});TableDownload.row2CSV(tmpRow,csvData)});var mydata=csvData.join("\n");return mydata},row2CSV:function(tmpRow,csvData){var tmp=tmpRow.join("");if(tmpRow.length>0&&tmp!=""){var mystr=tmpRow.join(",");csvData[csvData.length]=mystr}},cleanCellData:function(rawCellData){if(rawCellData.match("mathmlsrc")==
null){var cleanCellData=rawCellData.replace(/<img\/?[^>]+(>|$)/g,"&lt;image&gt;");cleanCellData=cleanCellData.replace(/<\/?[^>]+(>|$)/g,"");cleanCellData=cleanCellData.replace(/[,]/g,"<comma>");cleanCellData=cleanCellData.replace(/&nbsp;/gi," ");cleanCellData=cleanCellData.replace(/&gt;/gi,">");cleanCellData=cleanCellData.replace(/&lt;/gi,"<");var regexp=new RegExp(/["]/g);cleanCellData=cleanCellData.replace(regexp,"?")}else var cleanCellData="<MathML>";if(cleanCellData.indexOf(",")!=-1)cleanCellData=
'"'+cleanCellData+'"';return cleanCellData}};var FigureDownload={processRequest:function(e){SD_UTIL.sendDownloadKeyEvent("article","centerPane",SDM.pm.contentFamily,"PPT")}};Array.prototype.indexof=function(obj){for(var i=0;i<this.length;i++)if(this[i]==obj)return i;return-1};
$(document).ready(function(){$("body").on("click",".offerBtn",function(){displayOffer(this)});$("body").on("click",".tbxCollapse",function(){textBoxCE("",this)});$("body").on("click","a.alphaAnchor,a.glossaryAnchor",function(e){var url=$(this).attr("data-url");var txt=$(this).text();loadSection(url,txt)});$("body").on("click","#ddDoi",function(e){var doiWin;var txt=$(this).attr("data-url");doiWin=window.open("http://dx.doi.org/"+txt,"doilink","scrollbars=yes,resizable=yes,directories=yes,toolbar=yes,menubar=yes,status=yes");
doiWin.focus()});$("body").on("click",".iconAnchor",function(e){var helpWin;var txt=$(this).attr("data-url");helpWin=window.open(txt+"/science/help/doi.htm","sdhelp","scrollbars=yes,resizable=yes,directories=no,toolbar=no,menubar=no,status=no,width=760,height=570");helpWin.focus()});$("body").on("click",".S_C_full_size,.S_C_high_quality",function(e){var src=$(this).attr("data-src");var labelCaption=$(this).attr("data-label");var captionRef=$(this).attr("data-ref");var format=$(this).attr("data-format");
openStrippedNS(src,labelCaption,captionRef,format);return false});$("body").on("click",".videoclip",function(e){openNS(this.href,700,500);return false});$("body").on("click",".tableAnchor",function(e){var url=$(this).attr("data-url");openStrippedNS(url,"");return false});rightSidePane.initAccordion();$("body").on("click",".cExLink, #rightPane a.redirectUrl",function(){if($(this).attr("data-url")!=undefined)var url=$(this).attr("data-url");else var url=$(this).find("a").attr("data-url");$.get(url)})});
function displayOffer(obj){if($(obj).next("div.specialOffer")[0]){SD_UTIL.sendUserKeyEventForPPV("specialOfferPopup","article","centerPane");$(obj).next(".specialOffer").css("top",$(obj).position().top);$(obj).next(".specialOffer").show()}else{var url=$(obj).attr("data-offerSummary");SD_UTIL.sendUserKeyEventForPPV("specialOfferPopup","article","centerPane");$.get(url,function(response){$(obj).parents(".divBlk").append('<div class="specialOffer shadow"><span class="txtContent"></span><span class="spclose">X</span></div>');
$(obj).next(".specialOffer").find(".txtContent").html(response);$(obj).next(".specialOffer").css("top",$(obj).position().top);$(obj).next(".specialOffer").show("fast");$(obj).parents(".divBlk").find(".specialOffer").unbind("click").bind("click",function(){hideOffer(this)})})}}function hideOffer(obj){$(obj).hide()}
var mathRenderer={opt:{config:"",container:".mathContainer",image:".mathImg",button:"a.mathButton,a.firstFormula",renderOn:false},init:function(){this.opt.config="MathJax.Hub.Config({"+"    skipStartupTypeset: true,"+'    displayAlign:"left",'+'    config: ["MMLorHTML.js"],'+'    elements: ["leftPane","rightPane"],'+'    jax: ["input/MathML","output/HTML-CSS","output/SVG","output/NativeMML"],'+'    extensions: ["mml2jax.js","MathMenu.js","MathZoom.js"],'+'    "HTML-CSS": {'+"        linebreaks: { automatic: true},"+
'        styles: {".MathJax_Display": {"margin": 0}}'+"    },"+'    "SVG":{linebreaks:{automatic:true}}'+"});"+'MathJax.Hub.Register.StartupHook("End",function () { '+'    $(window).lazyLoadMathJax({mmlSel:".mathContainer"});  '+'    MathJax.Hub.Queue(["Typeset",MathJax.Hub,$("#leftPane")[0]]);'+'    MathJax.Hub.Queue(["Typeset",MathJax.Hub,$("#rightPane")[0]]);'+"});"+'MathJax.Hub.Register.MessageHook("End Math", function(data) {'+'    if(data[2]=="Rerender"){mathRenderer.handleRerender($("#centerPane"));}'+
'    $(data[1]).closest(".mathmlsrc,.formula").find(mathRenderer.opt.image).hide();'+'    $(data[1]).closest(".mathmlsrc,.formula").find(mathRenderer.opt.container).css({"visibility":""});'+"    $(data[1]).find(mathRenderer.opt.image).hide();"+"    mathRenderer.handleError($(data)[1]);"+"    mathRenderer.activateButtons();"+"});";this.activateButtons();$("body").off("mouseover").on("mouseover",function(e){if($(e.target).closest("div.formula > .mathml")[0]){$(mathRenderer.opt.button).not(".firstFormula").removeClass("buttonOn");
$(e.target).closest("div.formula > .mathml").find(mathRenderer.opt.button).not(".firstFormula").addClass("buttonOn")}else $(mathRenderer.opt.button).not(".firstFormula").removeClass("buttonOn")})},activateButtons:function(){$("#page-area").off("keydown",this.opt.button).on("keydown",this.opt.button,function(e){if(e.keyCode==13){$(this).trigger("click",true);e.preventDefault()}});$("#page-area").off("mouseover",".formula > .mathml").on("mouseover",".formula .mathml",function(e,keyPress){$(mathRenderer.opt.button).css("display",
"")});$("#page-area").off("click",this.opt.button).on("click",this.opt.button,function(e,keyPress){mathRenderer.toggleButton(e,keyPress)})},render:function(){if(window.MathJax===undefined){var script=document.createElement("script");script.type="text/javascript";script.src="//cdn.mathjax.org/mathjax/latest/MathJax.js";if(window.opera)script.innerHTML=this.opt.config;else script.text=this.opt.config;document.getElementsByTagName("head")[0].appendChild(script)}else{$(document).lazyLoadMathJax({mmlSel:".mathContainer"});
mathRenderer.handleRerender($("#leftPane"));mathRenderer.handleRerender($("#rightPane"))}},handleRerender:function(obj){$(obj).find(mathRenderer.opt.container).each(function(){if(!$(this).find("span.MathJax")[0]){if($(obj).attr("id")!="centerPane")MathJax.Hub.Queue(["Typeset",MathJax.Hub,$(this).find(".mathCode")[0]])}else if(window.MathJax!=undefined){var tex,script=$(this).find("script")[0];if(window.opera)tex=script.innerHTML;else tex=script.text;$(script).remove();$(this).find("span.MathJax").remove();
$(this).find(".mathCode").append(tex);MathJax.Hub.Queue(["Typeset",MathJax.Hub,$(this).find(".mathCode")[0]])}})},toggleButton:function(e,keyPress){if(!keyPress)if($(e.target).hasClass("mathButton")||$(e.target).hasClass("firstFormula"))$(e.target).blur();else $(e.target).parent().blur();e.preventDefault();e.stopPropagation();if(!this.opt.renderOn){this.opt.renderOn=true;$("span.MathJax").each(function(){var parentElement=$(this).closest(".mathmlsrc");if(parentElement.closest(".formula")[0])$(parentElement).find(mathRenderer.opt.container).css({"width":"100%",
"height":"auto","display":"block"}).removeClass("hidden");else $(parentElement).find(mathRenderer.opt.container).css({"width":"auto","height":"auto","display":""}).removeClass("hidden");$(parentElement).find(mathRenderer.opt.image).hide()});this.render();$(this.opt.button).html('Turn<span class="mathjax">&nbsp;</span><span class="offscreen">MathJax </span>off');$(this.opt.button).attr("title","Turn MathJax off");$(mathRenderer.opt.container).closest(".formula").find(".scrollOn").removeClass("scrollOn").addClass("scrollOff");
mathRenderer.sendMathjaxUserKeyEvent("turnMathJaxOn","article","centerPane",SDM.pm.contentFamily,SDM.pm.pii)}else{$("span.MathJax").each(function(){var parentElement=$(this).closest(".formula,.mathmlsrc");$(parentElement).find(mathRenderer.opt.container).css({"width":"0px","height":"0px"}).addClass("hidden");$(parentElement).find(mathRenderer.opt.image).show()});this.opt.renderOn=false;$(this.opt.button).html('Turn<span class="mathjax">&nbsp;</span><span class="offscreen">MathJax </span>on');$(this.opt.button).attr("title",
"Turn MathJax on");$(window).lazyLoadImages({imgClass:"imgLazyJSB"});$(mathRenderer.opt.container).closest(".formula").find(".scrollOff").removeClass("scrollOff").addClass("scrollOn");mathRenderer.sendMathjaxUserKeyEvent("turnMathJaxOff","article","centerPane",SDM.pm.contentFamily,SDM.pm.pii)}$(".firstFormula").first().removeClass("firstFormula").addClass("mathButton");this.activateButtons();this.handleError();$("div.btContainer").replaceWith($("div.btContainer").contents());return false},handleError:function(obj){if($(obj).attr("id")==
"leftPane"||$(obj).attr("id")=="rightPane")if($(obj).find(".formula")[0])$(obj).find(this.opt.container).css({"height":"auto","width":"100%","display":"block"}).removeClass("hidden");else $(obj).find(this.opt.container).css({"height":"auto","width":"auto","display":""}).removeClass("hidden");else if($(obj).closest(".formula")[0])$(obj).closest(this.opt.container).css({"height":"auto","width":"100%","display":"block"}).removeClass("hidden");else $(obj).closest(this.opt.container).css({"height":"auto",
"width":"auto","display":""}).removeClass("hidden");$(".merror").each(function(){$(this).closest(mathRenderer.opt.container).css({"width":"0px","height":"0px"}).addClass("hidden");$(this).closest(mathRenderer.opt.container).siblings(mathRenderer.opt.image).show();$(this).closest(mathRenderer.opt.container).siblings(".mathjax").removeClass("mathjax").hide()});$(obj).find("span.MathJax").each(function(){if($(this).text()==""&&!$(this).find("svg")[0]){$(this).closest(mathRenderer.opt.container).css({"width":"0px",
"height":"0px"}).addClass("hidden");$(this).closest(mathRenderer.opt.container).siblings(mathRenderer.opt.image).show();$(this).closest(mathRenderer.opt.container).siblings(".mathjax").removeClass("mathjax").hide()}})},sendMathjaxUserKeyEvent:function(a,o,z,ocf,pii){$.get(SDM.ep.userActionURL+"/"+o+"/"+z+"/"+ocf+"/"+a+"/"+pii)}};
$.fn.lazyLoadMathJax=function(opts){var cfg={mmlSel:"",preLoadLine:10};var lastScrollTop=0;function scrollAction(){var bottom=$(window).height()+$(document).scrollTop();var marginLevel=SDU.isIE7()?700:300;if(mathRenderer.opt.renderOn){var totalCount=$(cfg.mmlSel).size();var loopBool=true;if($(window).scrollTop()>lastScrollTop)var scrollDown=true;else var scrollUp=true;for(i=0;i<totalCount&&loopBool==true;i++){var obj=$(cfg.mmlSel)[i];var pos=$(obj).positionA("#centerContent"),wX=$(window).scrollLeft(),
wY=$(window).scrollTop(),wH=$(window).height(),wW=$(window).width(),oH=$(obj).closest(".formula,.mathmlsrc").outerHeight(),oW=$(obj).closest(".formula,.mathmlsrc").outerWidth();if(pos.top>=wY&&oH+pos.top<=wY+wH+marginLevel&&!$(obj).find(".MathJax")[0]){if($(obj).closest(".formula")[0])$(obj).css({"visibility":"hidden","display":"block","width":"100%"});else $(obj).css({"visibility":"hidden","display":"","width":"auto"});MathJax.Hub.Queue(["Typeset",MathJax.Hub,$(obj).find(".mathCode")[0]])}else{if(pos.top>=
wY&&(oH+pos.top>=wY+wH+marginLevel&&scrollDown))loopBool=false;if(pos.top<=wY&&(oH+pos.top<=wY+wH+marginLevel&&scrollUp))loopBool=false}}lastScrollTop=$(window).scrollTop()}}return this.each(function(){if(opts)$.extend(cfg,opts);scrollAction();var lazyScroll=_.debounce(scrollAction,300);$(this).scroll(lazyScroll)})};
jQuery.fn.positionA=function(selector){var left=0;var top=0;this.each(function(index,element){var $ancestor=$(this).closest(selector);if($ancestor.length&&$ancestor.css("position")!=="static"){var $child=$(this);$child.add($child.parentsUntil($ancestor)).each(function(){var posTop=$(this).position().top;var posLeft=$(this).position().left;if($(this).offsetParent().attr("id")==$ancestor.attr("id")&&(Math.abs(posTop)>0||Math.abs(posLeft)>0)||posTop>$ancestor.height()){left=Math.abs(posLeft);top=Math.abs(posTop)}else{left+=
Math.abs(posLeft);top+=Math.abs(posTop)}});return false}else{top=$(this).position().top;left=$(this).position().left}});return{left:left,top:top}};
$.fn.scrollToTopic=function(opts){var cfg={selTopic:""};return this.each(function(){if(opts)$.extend(cfg,opts);var $scrollContainer=$(this);var $topic=$(cfg.selTopic,this);if(!$topic.length)return false;var vx=$scrollContainer.width();var vy=$scrollContainer.height();var pos=$topic.position();var size={"width":$topic.outerWidth(),"height":$topic.outerHeight()};if(size.width>vx)if(pos.left>vx/2)sl=vx/2;else sl=0;else if(pos.left>vx/2)sl=vx/2;else sl=0;if(size.height>vy)st=pos.top+20;else st=pos.top+
size.height-(vy+16)*0.8;if(0>sl)sl=0;if(0>st)st=0;$scrollContainer.animate({"scrollTop":st,"scrollLeft":sl})})};function loadBreadCrumbs(){$.get(SDM.pf.mrwmod.breadCrumbPathURL,function(response){$(".module_topic_paths").html(response);$(".module_topic_path").mrwBreadCrumbScroller()})}
$.fn.mrwBreadCrumbScroller=function(){return this.each(function(){var $scrollContainer=$("> div",this).css("overflow","hidden"),$scrollArea=$scrollContainer.prop("scrollWidth")-$scrollContainer.width(),$timePerPixel=3,$recall=false;if(0>=$scrollArea)return;$scrollContainer.scrollLeft($scrollArea);var $left=$('<a class="scroll left active" href="#left" title="Scroll to the left"></a>');var $right=$('<a class="scroll right deactive" href="#right" title="Scroll to the right"></a>');$(this).append($left).append($right);
function scroller(offset){var current=$scrollContainer.scrollLeft();var pos=current+offset;if(0>=pos){pos=0;$left.addClass("deactive").removeClass("active")}else $left.addClass("active").removeClass("deactive");if($scrollArea<pos){pos=$scrollArea;$right.addClass("deactive").removeClass("active")}else $right.addClass("active").removeClass("deactive");var duration=1+$timePerPixel*Math.abs(current-pos);$scrollContainer.stop().animate({"scrollLeft":pos},duration,"easeOutCirc",function(){if($recall)scroller(offset)});
return false}$left.bind("click",function(){return scroller(-300)}).bind("mouseenter",function(){$recall=true;return scroller(-10)}).bind("mouseleave",function(){$recall=false;return false});$right.bind("click",function(){return scroller(+300)}).bind("mouseenter",function(){$recall=true;return scroller(+10)}).bind("mouseleave",function(){$recall=false;return false})})};
var mrwLeftPane={currentTab:"",init:function(){$("#outlineContainer").prepend('<ul id="lpTabs">'+'<li class="leftTab tab" tabindex="0">Subject Browse</li>'+'<li class="rightTab tab S_C_articleOutline" tabindex="0">Article Outline</li>'+"</ul>");$("#lpTabs .leftTab").click(function(){mrwLeftPane.showSubject(this);SD_UTIL.sendUserKeyEvent("subjectBrowse","article","leftPane",SDM.pm.contentFamily)});$("#lpTabs .rightTab").click(function(){mrwLeftPane.showOutline(this);SD_UTIL.sendUserKeyEvent("articleOutline",
"article","leftPane",SDM.pm.contentFamily)});$("#outline, #outlineContainer, #leftPaneInner").addClass("book");$("#outline").prepend(this.load());if(SDM.pf.mrwmod.isModArticle){mrwLeftPane.showSubject($("#lpTabs .leftTab")[0]);mrwLeftPane.currentTab="S"}else{mrwLeftPane.showOutline($("#lpTabs .rightTab")[0]);mrwLeftPane.currentTab="O"}},load:function(){$("body").append('<ul id="srcOutline"></ul>');if(SDM.pf.mrwmod.expAllURL!=undefined&&SDM.pf.mrwmod.expAllURL!=""){var linkHTML='<span><a class="expAll" href="'+
SDM.pf.mrwmod.expAllURL+'">Expand Hierarchy</a></span>';$("#srcOutline").prepend(linkHTML)}if(SDM.pf.mrwmod.isFreeStandingNoSat)$('<div class="subjectMsg"><span class="iconFull infoIcon_yellow">&nbsp;</span><div class="msgTxt">Subject hierarchy temporarily unavailable.</div></div>').appendTo("#srcOutline");else{var breadCrumbTreeUrl;if(SDM.pf.mrwmod.modsActiveNode!=undefined&&SDM.pf.mrwmod.modsActiveNode!="")breadCrumbTreeUrl=SDM.pf.mrwmod.breadCrumbTreeURL+"/concept/"+SDM.pf.mrwmod.modsActiveNode;
else breadCrumbTreeUrl=SDM.pf.mrwmod.breadCrumbTreeURL;$.get(breadCrumbTreeUrl,function(res){if(res&&res.length>1){$("#srcOutline").append(res).addClass("taxonomy");$("ul.taxonomy").tree({"expanded":$("ul.taxonomy a.selected").parents("li")});$("#srcOutline").show();if(!$("ul.taxonomy a.activeNode")[0])$("#outline").scrollToTopic({selTopic:"ul.taxonomy a.selected"});else $("#outline").scrollToTopic({selTopic:"ul.taxonomy a.activeNode"});$("#outline").css("overflow-x","auto");$("ul.taxonomy h2").wrap("<li>")}else $('<div class="subjectMsg"><span class="iconFull infoIcon_yellow">&nbsp;</span><div class="msgTxt">Subject hierarchy temporarily unavailable.</div></div>').appendTo("#srcOutline")}).fail(function(){$('<div class="subjectMsg"><span class="iconFull infoIcon_yellow">&nbsp;</span><div class="msgTxt">Subject hierarchy temporarily unavailable.</div></div>').appendTo("#srcOutline")})}return $("#srcOutline")},
showSubject:function(e){$(e).parent().children(".tab").removeClass("activeTab");$(e).addClass("activeTab");$(".outlineMsg").hide();$("#srcOutline").show().css({"display":"inline-block"});if(SDU.isIE7())$("#srcOutline").show().css({"display":"inline","zoom":"1"});$("#olGraphCbBox").hide();$("#outline").css("top",27);$("#itemOutline,#fig").hide();mrwLeftPane.currentTab="S"},showOutline:function(e){$(e).parent().children(".tab").removeClass("activeTab");$(e).addClass("activeTab");$("#itemOutline,#fig").show();
$(".outlineMsg").show();$("#srcOutline").hide();$("#olGraphCbBox").show();mrwLeftPane.currentTab="O";if($("#itemOutline").text()!="")$("#outline.book").css("top",27);if($("#outlineGraphicsCheckBox").prop("checked")==true)Outline.toggleGraphics("show")}};function logoutFromGS(){gigya.services.socialize.logout()}
function openPopup(url,windowName,width,height){if(navigator.appName=="Microsoft Internet Explorer"&&parseFloat(navigator.appVersion)<4)return false;var xOffset=25,yOffset=25;var parms="width="+width+",height="+height+",left="+xOffset+",top="+yOffset+",status=no,toolbar=no,menubar=no"+",scrollbars=yes,resizable=yes";var displayName=windowName;nsWin=window.open(url,displayName,parms);nsWin.focus();return false}
var CollapsibleTextbox={init:function(){var locHash=window.location.hash;if(locHash!="undefined"&&locHash!=""){var idSelUnescaped=locHash.substr(1);CollapsibleTextbox.openTboxForTarget(idSelUnescaped)}},openTboxForTarget:function(idSelUnescaped){var idSel=idSelUnescaped.replace(/[\.]/g,"\\.").replace(/[\:]/g,"\\:");var secSegment=$("#"+idSel).parents("*").andSelf().filter(".textboxe-extra, .textboxcollaborative").children(".displayNone");if(secSegment)if(secSegment.css("display")=="none"){var secImg=
$("#"+idSel).parents("*").andSelf().filter(".textboxe-extra, .textboxcollaborative").children(".tbxCollapse");secImg.attr("src","/scidirimg/minus_lt.png");secImg.attr("data-inlimg","/minus_lt.png");secSegment.css("display","block")}}};
var ExpandAll={init:function(){$(".expAll").click(function(event){event.preventDefault();ExpandAll.expandAllItems($("li.hasChildren"))})},expandAllItems:function(obj){if($(obj).length)$(obj).each(function(){var target=$(this).find("a:first");target.removeClass("tree-parent-collapsed");if(!target.find(">span").hasClass("srcPartOpened"))target.find(">span").toggleClass("srcPartOpened").toggleClass("srcPartClosed");if(target.parent().children("ul")[0])target.next().hide().removeClass("tree-group-collapsed").slideDown(150,
function(){$(this).removeAttr("style");target.parent().attr("aria-expanded","true").find(">span").toggleClass("srcPartClosed").toggleClass("srcPartOpened")});else $.get(target.parent().attr("data-childUrl"),function(response){target.parent().attr("aria-expanded","true");var childRes=$("<ul>"+response+"</ul>");childRes.find("li.hasChildren").attr("aria-expanded","false").find(">a").addClass("tree-parent tree-parent-collapsed");childRes.find("li>a").not("a.module").prepend("<span>&nbsp;</span>");childRes.find("li.hasChildren>a>span").addClass("srcPartClosed");
target.parent().append(childRes);if(childRes.find("li.hasChildren")!="undefined")ExpandAll.expandAllItems(childRes.find("li.hasChildren"))})})}};var blockCollab=false;
var MoreInformation={onDemand:true,closed:true,hideFrag:function($f){if($f.attr("id")=="frag_1")return true;if($f.find(".moreLink").length)return true;if($f.find("ul.authorGroup").parent().hasClass("textboxHead"))return true;if($f.find("ul.authorGroup").hasClass("subChapAuth"))return true;if($f.find(".smh5").length)return true;if($f.find("ul.authorGroup").length||$f.find("ul.affiliation").length){$f.attr("data-mi","1");return false}else return true},fragLoad:function(obj){var current=obj.c;var start=
obj.s;var len=obj.l;var func=obj.f;$.ajax({type:"GET",url:SDM.ep.urlPrefix+"/frag/"+SDM.pm.pii+"/"+SDM.pf.frag.fat+"/"+"batch"+"/"+obj.s+"/"+obj.l,success:function(str,b,c){str.length>30?sI=-30:sI=str.length*-1;var endStr=str.slice(sI);if(endStr.match(/ERROR::/)){DBG.out(0,"MoreInformation::fragLoad:: Unable to retrieve batch");return}var parts=str.split("!!!FRAG!!!");var partCount=parts.length-1;DBG.out(1,"MoreInformation::fragLoad:: received "+partCount+" fragments");for(var i=0;i<partCount;i++){DBG.out(1,
"MoreInformation::fragLoad::working on "+(start+i));var fragIdNum=start+i;if(!$("#frag_"+fragIdNum).length){var prevFrag=Fragment.getPrevFrag(fragIdNum);DBG.out(1,"Inserting after "+prevFrag.attr("id"));prevFrag.after(parts[i]);$("#frag_"+fragIdNum).hide();Fragment.processFrag($("#frag_"+fragIdNum),true);$("#frag_"+fragIdNum).children("ul.authorGroup").not(".subChapAuth").addClass("smh").css("display","inline");$("#frag_"+fragIdNum).find("ul.affiliation.authAffil").addClass("smh")}else DBG.out(1,
"ignoring frag_"+fragIdNum)}func()},error:function(a,b,c){}})},onDemandLoad:function(func){if(MoreInformation.onDemand){var begin=MoreInformation.calculateFid();var end=Fragment.foldCheckJumper();var len=end-begin;DBG.out(1,"MoreInformation::onDemandLoad()::begin::"+begin+"\tend::"+end+"\tlen::"+len);if(begin==-1||len<1){DBG.out(1,"Nothing to load");func()}else{DBG.out(1,"Need to load "+begin+","+len);MoreInformation.fragLoad({c:begin,s:begin,l:len,f:func})}}},cleanFrag:function(fid){DBG.out(1,"MoreInformation.cleanFrag("+
fid+")::")},calculateFid:function(){var end=Fragment.foldCheckJumper();var i=2;while($("#frag_"+i).length&&i<end)i++;if(i>=end)i=-1;return i},init:function(){var fid=1;if(MoreInformation.onDemand)fid=-1;else if(Fragment.isAvail())fid=MoreInformation.calculateFid();else fid=-1;if(fid!=-1){DBG.out(1,"MoreInformation fetching frag_"+fid);Fragment.get("frag_"+(fid+0),undefined,{successCb:function(fi){MoreInformation.cleanFrag(fi);MoreInformation.init()},successCbArg:fid,showLoadedFrag:MoreInformation.hideFrag})}else if($("#showMoreButtons").size()==
0){curTmpFrag++;Fragment.get("frag_"+(curTmpFrag+0),undefined,{successCb:function(fi){MoreInformation.cleanFrag(fi);MoreInformation.init()},successCbArg:curTmpFrag,showLoadedFrag:MoreInformation.hideFrag})}else{if($("#ppvPlaceHolder").length&&SDM.pageType=="article_full")$("#ppvPlaceHolder").hide();$(".articleDates").addClass("smh");$(".preprint").addClass("smh");$(".miscInfo").addClass("smh");if(Fragment.isAvail()){$(".page_fragment").children("ul.authorGroup").not(".subChapAuth").addClass("smh").css("display",
"inline");$(".page_fragment").children("ul.authorGroup").eq(0).removeClass("smh");$(".page_fragment").find("ul.affiliation.authAffil").addClass("smh")}else{$("#centerInner").children("ul.authorGroup").not(".subChapAuth").addClass("smh").css("display","inline");$("#centerInner").children("ul.authorGroup").eq(0).removeClass("smh");$("#centerInner").find("ul.affiliation.authAffil").addClass("smh")}var btnHtmlStr='<a class="showLess moreLink"><span class="CollapseText">&nbsp;</span><span class="showInfo expand" title="Show more author and article information">Show more</span><a class="showLess lessLink"><span class="ExpandText">&nbsp;</span><span class="showInfo collapse" title="Hide more author and article information">Show less</span>';
$("#showMoreButtons").html(btnHtmlStr);$(".ExpandText").hide();OpenAccess.init();var htmlStr='<dl class="citation">';if(SDM.pf.oa&&SDM.pf.oa.sponsor)htmlStr+='<dd class="oaSponsor">'+SDM.pf.oa.sponsorLabel+SDM.pf.oa.sponsor+"</dd>";if(SDM.pf.oa&&(SDM.pf.oa.userLicense&&SDM.pf.oa.userLicense!="")){var OAuserLicense=decodeURIComponent(SDM.pf.oa.userLicense);if(OAuserLicense.match(/^http/i)!=null){if(OAuserLicense.indexOf("creativecommons.org")!=-1)htmlStr+='<dd class="oaUserLicense wrap2">Under a Creative Commons ';
else if(OAuserLicense.indexOf("elsevier.com")!=-1)htmlStr+='<dd class="oaUserLicense wrap2">Under an Elsevier ';else htmlStr+='<dd class="oaUserLicense wrap2">License: &nbsp;';htmlStr+="<span>";if(OAuserLicense.indexOf("creativecommons.org")!=-1)htmlStr+='<a id="ddOAuserLicense" href="'+OAuserLicense+'" target="_blank">license</a>';else if(OAuserLicense.indexOf("elsevier.com")!=-1)htmlStr+='<a id="ddOAuserLicense" href="'+OAuserLicense+'" target="_blank">user license</a>';else htmlStr+='<a id="ddOAuserLicense" href="'+
OAuserLicense+'" target="_blank">'+decodeURIComponent(OAuserLicense)+"</a>";htmlStr+="</span>";htmlStr+="</dd>"}else{htmlStr+='<dd class="oaUserLicense wrap2">';htmlStr+="<span>";htmlStr+=OAuserLicense;htmlStr+='<a class="icon_oaUserLicenseLink" title="Click to see terms of use (Opens new window)" href="http://www.elsevier.com/openaccesslicenses" target="sdhelp" onmouseover="window.status='+"'Help is Available';return true"+'" onclick="var helpWin; helpWin=window.open('+"'http://www.elsevier.com/openaccesslicenses' , 'sdhelp', 'scrollbars=yes,resizable=yes,directories=no, toolbar=no,menubar=no,status=no,width=760,height=570'); helpWin.focus()"+
'"></a>';htmlStr+="</span>";htmlStr+="</dd>"}}htmlStr+="</dl>";$("#centerInner .moreInformation").html(htmlStr);if($(".mostRecentDt").html.length>0){$('<div id="currtAsOf"></div>').insertBefore($(".articleDates"));$("#currtAsOf").html($(".mostRecentDt").html())}if(!SDM.pf.ignoreForceAbst)$("#ppvPlaceHolder").show();if(SDM.pm.entitled&&!SDM.pf.forceAbst)$("#ppvPlaceHolder").remove();$("dl.extLinks.nonEmpty").after($(".moreInformation"));if(SDM.pf.crossMark)$(".articleDates dd:first-child").after(CrossMark.buildHTML(SDM.pm.doi));
$(".lessLink,.ExpandText").click(function(){MoreInformation.showLessInfo();return false});$(".moreLink,.CollapseText").click(function(){if(MoreInformation.onDemand&&Fragment.isAvail())MoreInformation.onDemandLoad(function(){MoreInformation.showMoreInfo();ArticlePage.viewHandler()});else{MoreInformation.showMoreInfo();ArticlePage.viewHandler()}return false});CrossMark.init();$(".smh").hide();MoreInformation.expandAuthInfoBrief();$(".smh5").parents(".page_fragment").show();var fontSize=$(".auth_frag .authorGroup").css("font-size");
var lineHeight=Math.floor(parseInt(fontSize.replace("px",""))*1.5);do{var totalHeight=0;$(".auth_frag .authorGroup").each(function(){totalHeight=totalHeight+$(this).height()});if(totalHeight/lineHeight>=6)$(" .smh5").eq($(" .smh5").size()-1).addClass("smh5plus").removeClass("smh5").css("display","none")}while(totalHeight/lineHeight>=6);$("dd.doiLink").parents(".page_fragment").show();if(typeof ArticlePage!="undefined")ArticlePage.setPaneWidths();Fragment.scrollFlag=true}},showLessInfo:function(){$(".moreLink span.showInfo").removeClass("open");
Fragment.scrollFlag=false;MoreInformation.closed=true;$(".ExpandText").hide();$(".CollapseText").show();$(".moreLink").show();$(".lessLink").hide();$(".smh, .smh5plus").hide();$(".smh5").show();var collabOpened=false;var aLink=$("a.collabText");if($(aLink).hasClass("collabOpened")){collabOpened=true;var aParent=$(aLink).parent();$(aParent).find(".smh").show();$(".page_fragment .hideShow .smh").show()}$(".smh5").parent().css("display","block");$(".smh5").parent().show();if(Fragment.isAvail()){if(!collabOpened){var fList=
$("#centerInner .page_fragment").filter(function(){return!MoreInformation.hideFrag($(this))});fList.hide()}$(".hideShow").hide();if($("li.collabWithAuthorsCollapse a.collabText").hasClass("collabOpened"))$(".hideShow:lt(5)").show();ArticlePage.viewHandler();$("html,body").scrollTop(0)}else $("html,body").scrollTop(0);Fragment.scrollFlag=true;return},showMoreInfo:function(){MoreInformation.closed=false;$(".moreLink span.showInfo").addClass("open");$(".ExpandText").show();$(".CollapseText").hide();
$(".moreLink").hide();$(".lessLink").show();$(".smh").show();$(".smh5plus").show();if(Fragment.isAvail()){var fList=$("#centerInner .page_fragment").filter(function(){return!MoreInformation.hideFrag($(this))});fList.show();if($("li.collabWithAuthorsCollapse a.collabText").hasClass("collabOpened"))$(".hideShow").css("display","block")}return},expandAuthInfoBrief:function(){var idx=0;var prevItem="";var authCnt=0;var lineCnt=1;var charsInLine=0;var maxCharsPerLine=90;var testLine="";$("div.auth_frag ul.authorGroup, div.auth_frag ul.affiliation").find("li").each(function(){var liText=
$(this).text();liText=liText.replace(/<[^>]+>/ig,"");if(prevItem==liText);else if($(this).parents().hasClass("hideShow"));else if(lineCnt<6)if($(this).parent().attr("class").indexOf("affiliation")>-1){if(authCnt>0){lineCnt++;authCnt=0;charsInLine=0}}else if($(this).hasClass("collab")){$(this).addClass("smh5");$(this).show();$(this).parent().css("display","block");$(this).parent().show();charsInLine=0;lineCnt++;authCnt=0}else{if($(this).parent().attr("class").indexOf("authorGroup")>-1){testLine+=liText;
$(this).addClass("smh5");$(this).show();$(this).parent().css("display","block");$(this).parent().show();authCnt++;var imgCnt=$(this).find("img").length;charsInLine+=imgCnt*2;charsInLine+=liText.length;var skinnyCnt=liText.match(/[Iil\.]/g)==null?0:liText.match(/[Iil\.]/g).length;charsInLine-=skinnyCnt;if(charsInLine>=maxCharsPerLine){lineCnt++;charsInLine=0}}}else $(this).not(".inlCollab ul.affiliation").addClass("smh5plus").css("display","none");idx++;prevItem=liText})}};
var OpenAccess={init:function(){if(SDM.pf.oa&&(SDM.pf.oa.item&&(!SDM.pf.oa.source&&!$("span.articleOAstatus")[0])))if($("hr.artHeader")[0]){$("hr.artHeader").first().wrap('<div class="OAlabel"/>');if(SDM.pf.oa.archive)$(".OAlabel").prepend('<span class="articleOAstatus">&nbsp;&nbsp;Open Archive</span>');else $(".OAlabel").prepend('<span class="articleOAstatus">&nbsp;&nbsp;Open Access</span>')}else if(SDM.pf.oa.archive)$(".articleOAlabelForced").html('<span class="articleOAstatus">&nbsp;&nbsp;Open Archive</span><hr/>').show();
else $(".articleOAlabelForced").html('<span class="articleOAstatus">&nbsp;&nbsp;Open Access</span><hr/>').show()}};
function placeHolderInit(){var placeHolderSupport=false;var test=document.createElement("input");if("placeholder"in test)placeHolderSupport=true;if(!placeHolderSupport)$("[placeholder]").focus(function(){var input=$(this);if(input.val()==input.attr("placeholder")){input.val("");input.removeClass("placeholder")}}).blur(function(){var input=$(this);if(input.val()==""||input.val()==input.attr("placeholder")){input.addClass("placeholder");input.val(input.attr("placeholder"))}}).blur().parents("form").submit(function(){$(this).find("[placeholder]").each(function(){var input=
$(this);if(input.val()==input.attr("placeholder"))input.val("")})})}function setQuickSearch(){var winWidth=$(window).width()-16;if(winWidth<=1024)$(".quicksearch").addClass("low");else $(".quicksearch").removeClass("low");if(winWidth>=1366)$("#page-area").addClass("pgBorder");else $("#page-area").removeClass("pgBorder")}
var prodMsg={init:function(){var sdMsg=Cookie.get("sd_system_msg");if(!sdMsg){$("#sdSystemMsg").show();$("#centerInner").on("click","#sdSystemMsg .closeBt",function(e){prodMsg.close(e)})}else $("#sdSystemMsg").remove()},close:function(e){var msgBlock=$("#sdSystemMsg");msgBlock.animate({height:0},200,"linear",function(){msgBlock.remove();Cookie.set("sd_system_msg",1)})}};
var adDisplay={init:function(){$(document).off("click").on("click",".adText .closeBt",function(e){adDisplay.close(e)})},close:function(e){var adBlock=$(e.target).closest(".adBlock");if(adBlock.attr("id")=="articleLeftAd")adBlock.animate({height:0},200,"linear",function(){adBlock.remove();Cookie.set("ad_left","1")});else if(adBlock.attr("id")=="articleRightAdLg"||adBlock.attr("id")=="articleRightAdSm")adBlock.animate({height:0},200,"linear",function(){adBlock.remove();Cookie.set("ad_right","1")})}};
var exportClicked=false;var exportRefworks=false;var action;var mendeleyZone="";var mendeleyOrigin="";
var exportCite={config:{exportType:"Export",splitCookie:"",finalExportCookie:[],firstExportCookie:[],clicked:"",exportCitab:"cite-abs"},init:function(){$(".exportDivision").on("click keypress",function(e){if(e.keyCode&&e.keyCode!=13)return;$(".RIS").prop("checked",true);$(".pdf_export_popup .cite-abs").prop("checked",true);$(".export_popup .cite-abs").prop("checked",true);if($(this).attr("title")=="Export Citation"){$("input.zone").attr("value","exportDropDown");exportPopUp(e)}else{$("input.zone").attr("value",
"toolbar");exportPopUp(e)}});formSubmit();$(document).keyup(function(e){if(e.keyCode==27)if($("#export_popup:visible")){$(".export_popup").addClass("hidden");$(".exportDivision").attr("aria-expanded","false");if($(".export_general").attr("aria-expanded")!=undefined)$(".export_general").attr("aria-expanded","false");$(".exportDivision").removeClass("openDropdown");$(".exportDivision span.downSM_"+SD_UTIL.getProdColor()).removeClass("upSM_"+SD_UTIL.getProdColor())}});$("body").on("click",function(e){exportPopupClose(e)});
$(".export_popup .warningIcon").hide();$(".pdf_export_popup .warningIcon").hide();$("body").on("click",".export_button",function(e){var zone=$("input[type='hidden'][name='zone']").val();internalExport(e);if(zone!="toolbar")$("input.zone").attr("value","exportDropDown")});$("body").on("click",".directExport",function(e){if($("#modalBoxDisplay").is(":visible"))mendeleyOrigin="relatedPdfPopup";mendeleyZone="mendeleyWebImporter";directExport(e)});$("body").off("click.refworks").on("click.refworks","#REFWX",
function(e){refworksClick(e)});exportCite.config.exportCountValue=$("input[type='hidden'][name='art']").length+$("input.checkBox:checked:visible").length;$.fn.appendAttr=function(attrName,suffix){this.attr(attrName,function(i,val){return val+suffix});return this};$('#SuggestedArtList .export_radio input[type="radio"]').appendAttr("id","_pdf");$("#SuggestedArtList .export_radio label").appendAttr("for","_pdf")},Mendeley:function(){MendeleyImporterApi.registerHostId("com.sciencedirect");MendeleyImporterApi.registerUserIdentityCallback(function(){return getUserIdentity()});
MendeleyImporterApi.registerDataCallback(function(bookmarklet){return getExportInfo(bookmarklet)})}};
function exportPopUp(event){var menu=$(".export_popup");var menu1=$(".pdf_export_popup");var aria,aria_input;if($("#modalBoxDisplay").is(":visible")){aria=$(".exportListitem .exportDivision");aria_input=$(".exportListitem .exportDivision .export_general")}else{aria=$(".exportPopupListitem .exportDivision");aria_input=$(".exportPopupListitem .exportDivision .export_general")}if(aria.attr("aria-expanded")=="true"){aria.attr("aria-expanded","false");if(aria_input.attr("aria-expanded")!=undefined)aria_input.attr("aria-expanded",
"false");if($("#modalBoxDisplay").is(":visible")){menu1.addClass("hidden");$(".exportListitem .exportDivision").removeClass("openDropdown");$(".exportListitem .exportDivision span.downSM_"+SD_UTIL.getProdColor()).removeClass("upSM_"+SD_UTIL.getProdColor())}else{menu.addClass("hidden");$(".exportPopupListitem .exportDivision").removeClass("openDropdown");$(".exportPopupListitem .exportDivision span.downSM_"+SD_UTIL.getProdColor()).removeClass("upSM_"+SD_UTIL.getProdColor())}}else{aria.attr("aria-expanded",
"true");if(aria_input.attr("aria-expanded")!=undefined)aria_input.attr("aria-expanded","true");if($("#modalBoxDisplay").is(":visible")){menu1.removeClass("hidden");$(".exportListitem .exportDivision").addClass("openDropdown");$(".exportListitem .exportDivision span.downSM_"+SD_UTIL.getProdColor()).addClass("upSM_"+SD_UTIL.getProdColor())}else{menu.removeClass("hidden");$(".exportPopupListitem .exportDivision").addClass("openDropdown");$(".exportPopupListitem .exportDivision span.downSM_"+SD_UTIL.getProdColor()).addClass("upSM_"+
SD_UTIL.getProdColor())}}if($("#modalBoxDisplay").is(":visible")){if($(".exportListitem .export_general").val()=="Save to Refworks")$(".pdf_export_popup .RIS").prop("checked",true);exportCount($("input[name=art].checkBox:checked:visible").length)}else{if($(".exportPopupListitem .export_general").val()=="Save to Refworks")$(".export_popup .RIS").prop("checked",true);exportCount(1)}}
function exportPopupClose(e){if(typeof e=="undefined"||$(e.target).closest(".pulldown").length===0)if($("#export_popup:visible,#pdf_export_popup:visible")){$(".export_popup").addClass("hidden");$(".pdf_export_popup").addClass("hidden");$(".exportDivision").attr("aria-expanded","false");if($(".export_general").attr("aria-expanded")!=undefined)$(".export_general").attr("aria-expanded","false");$(".exportDivision").removeClass("openDropdown");$(".exportDivision span.downSM_"+SD_UTIL.getProdColor()).removeClass("upSM_"+
SD_UTIL.getProdColor())}}
function exportCount(countValue){if(countValue==0){$(".pdf_export_popup .chkboxCount").text("All citation information on this page will be exported.");$(".pdf_export_popup .warningIcon").show();$(".cit").text("Citations Only");$(".cab").text("Citations and Abstracts");$(".export_pageSubHead tr").children().eq(0).addClass("countTd");$(".export_pageSubHead tr").children().eq(1).addClass("helpTd")}else if(countValue==1){if($(".eReadHead").length)$(".chkboxCount").text("You have selected "+countValue+
" article for export.");else $(".chkboxCount").text("You have selected "+countValue+" citation for export.");$(".pdf_export_popup .warningIcon").hide();$(".export_popup .warningIcon").hide();$(".cit").text("Citation Only");$(".cab").text("Citation and Abstract");$(".export_pageSubHead tr").children().eq(0).removeClass("countTd");$(".export_pageSubHead tr").children().eq(1).removeClass("helpTd")}else{$(".pdf_export_popup .chkboxCount").text("You have selected "+countValue+" citations for export.");
$(".pdf_export_popup .warningIcon").hide();$(".cit").text("Citations Only");$(".cab").text("Citations and Abstracts");$(".export_pageSubHead tr").children().eq(0).removeClass("countTd");$(".export_pageSubHead tr").children().eq(1).removeClass("helpTd")}}
function formSubmit(){$(".expContainer").closest("form").off("submit").on("submit",function(){if($("#modalBoxDisplay").is(":visible"))$("#modalBoxDisplay input.zone").val("relatedPdfPopup");if(exportRefworks){$(this).attr("target","_blank");exportRefworks=false}else if(exportClicked){$(this).attr("target","_blank");exportClicked=false}else $(this).removeAttr("target");if($("#modalBoxDisplay").is(":visible"))pdfCite.closePopup()})}
function internalExport(e){if($("#modalBoxDisplay").is(":visible"))if($("input.checkBox:checked:visible").length==0)$('#SuggestedArtList input[type="checkbox"]').prop("checked",true);$(".export_popup").addClass("hidden");$(".pdf_export_popup").addClass("hidden");$(".exportDivision").attr("aria-expanded","false");$(".exportDivision").removeClass("openDropdown");$(".exportDivision span.downSM_"+SD_UTIL.getProdColor()).removeClass("upSM_"+SD_UTIL.getProdColor());if($("#ASCII").prop("checked")==true||
$("#ASCII_pdf").prop("checked")==true)exportClicked=true;$(".export_general").removeAttr("aria-expanded");$(".export_general").removeAttr("aria-controls")}
function directExport(event){if($("#modalBoxDisplay").is(":visible"))if($("input.checkBox:checked:visible").length==0)$('#SuggestedArtList input[type="checkbox"]').prop("checked",true);$(".export_popup").addClass("hidden");$(".pdf_export_popup").addClass("hidden");$(".exportDivision").attr("aria-expanded","false");$(".exportDivision").removeClass("openDropdown");$(".exportDivision span.downSM_"+SD_UTIL.getProdColor()).removeClass("upSM_"+SD_UTIL.getProdColor());$(".export_general").removeAttr("aria-expanded");
$(".export_general").removeAttr("aria-controls");MendeleyImporterApi.open();exportCite.Mendeley()}
function refworksClick(event){$(event.currentTarget).closest("form").attr("target","_blank");exportRefworks=true;if($("#modalBoxDisplay").is(":visible"))$(".pdf_export_popup .REFWX").prop("checked",true);else $(".export_popup .REFWX").prop("checked",true);$(".export_popup").addClass("hidden");$(".pdf_export_popup").addClass("hidden");$(".exportDivision").attr("aria-expanded","false");$(".exportDivision").removeClass("openDropdown");$(".exportDivision span.downSM_"+SD_UTIL.getProdColor()).removeClass("upSM_"+
SD_UTIL.getProdColor());$(".export_general").removeAttr("aria-expanded");$(".export_general").removeAttr("aria-controls");$(event.currentTarget).closest(".pulldown").find(".menu .export_button").trigger("click")}
function getUserIdentity(){var arraydata=[];var userIdentityUrl="/science/export/userIdentity";if(mendeleyZone)userIdentityUrl=userIdentityUrl+"?zone="+mendeleyZone+"&"+"menOrigin="+mendeleyOrigin;jQuery.ajax({url:userIdentityUrl,type:"GET",dataType:"json",success:function(data){arraydata["hash"]=data.hash;delete data.hash;arraydata["json"]=JSON.stringify(data)},async:false,error:function(d){DBG.out(0,"Error on getting Encrypted AuthToken")}});return arraydata}
function getExportInfo(bookmarklet){var jsonToMendeley=[];if($("#modalBoxDisplay").is(":visible")){var tempStr;var pos;var i=0;var pagePIIs={};jQuery("input[type='checkbox'][name='art'].checkBox:checked:visible").each(function(key,value){tempStr=jQuery(this).val();pos=tempStr.lastIndexOf("-");tempStr=tempStr.substring(pos+1,tempStr.length);pagePIIs.pii=tempStr;jsonToMendeley[i]=pagePIIs;pagePIIs={};i++});pdfCite.closePopup();window.scrollTo(0,0)}else{var piiJson='{"pii":"'+SDM.pm.pii+'"}';jsonToMendeley[0]=
$.parseJSON(piiJson)}return jsonToMendeley}function getcitedByScopusCount(){var citedByURL=SDM.ep.urlPrefix+"/citedby/rslts/"+SDM.pm.pii+"/hitcount";try{$.get(citedByURL,function(res){res=$.trim(res);if(res&&res.length>0)if($("#rightPane span#hitcount")[0])$("#rightPane span#hitcount").text(res)})}catch(err){return}}
var homeaccPopup={closePopup:function(){document.getElementById("homeAccMsgWindow").style.display="none";Cookie.set("homeacc_pop",1)},init:function(){var msgBox=$("#homeAccPopupBox");var winWidth=$(window).width();var winHeight=$(window).height();var top=(winHeight-msgBox.outerHeight())/2;var left=(winWidth-msgBox.outerWidth())/2;msgBox.css("top",top+"px");msgBox.css("left",left+"px")}};
var eCredPopup={closePopup:function(){document.getElementById("confirmation_popup").style.display="none"},init:function(){var msgBox=$("#eCredPopupBox");var winWidth=$(window).width();var winHeight=$(window).height();var top=(winHeight-msgBox.outerHeight())/2;var left=(winWidth-msgBox.outerWidth())/2;msgBox.css("top",top+"px");msgBox.css("left",left+"px")}};
function handleImgLoadError(obj){var imgObj=$(obj);var errorSrc=$(imgObj).attr("data-errorSrc");if(typeof errorSrc!="undefined"&&errorSrc!=""){$(imgObj).attr("data-errorSrc","");$(imgObj).attr("src",errorSrc)}}
function getEcomponents(){var ecomponentURL=SDM.ep.urlPrefix+"/ecomponents/"+SDM.pm.eid;try{if(!SDM.pm.entitled||SDM.pf.forceAbst)$.get(ecomponentURL,function(resp){if($(".artEcomponent").html.length>0){var htmlObj=$.parseHTML(resp);$(htmlObj).find("dl.ecomponent").each(function(){var id=$(this).attr("id").replace(/[\.]/g,"\\.");if($("#"+id)[0])$(this).remove()});$(".artEcomponent").append(htmlObj);EComponent.init("centerInner")}})}catch(err){return}}
function handleImgLoadError(obj){var imgObj=$(obj);var errorSrc=$(imgObj).attr("data-errorSrc");if(typeof errorSrc!="undefined"&&errorSrc!=""){$(imgObj).attr("data-errorSrc","");$(imgObj).attr("src",errorSrc)}}function recordEmbedFailure(){var scope="#centerInner";var embeddedPDFHTML="<div>";var embeddedPDFHTML="<div>";embeddedPDFHTML+="<p>The embedded PDF failed to load. Try refreshing the page</p></div>";$(scope+" #embeddedPDF").html(embeddedPDFHTML)};
